!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="ccae77d8-837c-430e-8e61-eff0d9919ab8",e._sentryDebugIdIdentifier="sentry-dbid-ccae77d8-837c-430e-8e61-eff0d9919ab8")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["1444"],{23751:function(e,a,t){t.d(a,{D:function(){return r},KE:function(){return i},rb:function(){return s}});var l=t(52322);t(2784);var o=t(86874);function s(){return(0,l.jsxs)("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-4 flex-col p-4 w-full",children:[(0,l.jsx)(o.Z,{count:1,width:100,height:16}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.Z,{count:1,width:50,height:30}),(0,l.jsx)(o.Z,{count:1,width:75,height:20})]}),(0,l.jsx)(o.Z,{count:1,borderRadius:16,height:70})]})}function r(){return(0,l.jsxs)("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-1.5 flex-col p-4 w-full",children:[(0,l.jsx)(o.Z,{width:100,height:20}),(0,l.jsx)(o.Z,{width:336,height:40}),(0,l.jsx)(o.Z,{width:100,height:24})]})}function i(){return(0,l.jsxs)("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-950 w-full rounded-2xl gap-x-4",children:[(0,l.jsx)(o.Z,{circle:!0,width:28,height:28,className:"!z-0"}),(0,l.jsx)(o.Z,{count:1,width:100,height:16,className:"!z-0"})]})}},17469:function(e,a,t){t.d(a,{Z:function(){return r},m:function(){return s}});var l=t(52322);t(2784);var o=t(86874);function s(){return(0,l.jsxs)("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-900 w-full rounded-2xl my-2",children:[(0,l.jsx)(o.Z,{circle:!0,width:28,height:28,className:"z-0"}),(0,l.jsxs)("div",{className:"w-[120px] ml-2",children:[(0,l.jsx)(o.Z,{count:1,className:"z-0"}),(0,l.jsx)(o.Z,{count:1,className:"z-0"})]})]})}function r(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s,{}),(0,l.jsx)(s,{}),(0,l.jsx)(s,{}),(0,l.jsx)(s,{}),(0,l.jsx)(s,{})]})}},30942:function(e,a,t){t.d(a,{X:function(){return i}});var l=t(21950),o=t(26089),s=t(2784),r=t(37906);function i(e){let{rpcUrl:a}=(0,l.U9i)();(0,s.useEffect)(()=>{if(e){if(!(e.includes("was submitted but was not yet found on the chain. You might want to check later. There was a wait of 60 seconds.")||e.includes("Reward is too low")))!e.includes("You don't have enough")&&o.Tb(`${e} - node: ${a}`,{tags:r.r})}},[e,a])}},68708:function(e,a,t){t.d(a,{F:function(){return v},Z:function(){return w}});var l=t(52322),o=t(21950),s=t(39279),r=t(26007),i=t(14281),n=t(23751),d=t(69816),c=t(26571),m=t(96128),u=t.n(m),x=t(114),g=t(8891),h=t.n(g);t(2784);var f=t(49409);function v(e){let{provider:a,backgroundColor:t,rootDenomsStore:i,activeChain:n,activeNetwork:m}=e,[g]=(0,o.JsT)(i.allDenoms,n,m);return(0,l.jsx)(s.GenericCard,{onClick:()=>{window.open(a.url,"_blank"),h().track(c.B_.ButtonClick,{buttonType:"stake",buttonName:"liquid staking redirection",redirectURL:a.url,stakeToken:g.coinDenom})},className:`${t} w-full`,img:(0,l.jsx)("img",{src:a.image??x.GenericLight,onError:(0,f._)(x.GenericLight),width:30,height:30,className:"rounded-full mr-4"}),isRounded:!0,size:"md",title:(0,l.jsx)(d.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold overflow-hidden",children:a.name}),subtitle:(0,l.jsx)(d.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:a.apy?`APY ${u()((100*a.apy).toString(),{precision:2,symbol:""}).format()}%`:"N/A"}),icon:(0,l.jsx)(r.O,{size:16,weight:"bold",className:"dark:text-white-100 text-black-100"})})}function w(e){let{isVisible:a,onClose:t,providers:o,rootDenomsStore:s,forceChain:r,forceNetwork:d}=e;return(0,l.jsx)(i.Z,{isOpen:a,onClose:t,closeOnBackdropClick:!0,title:"Select Provider",className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-4",children:[0===o.length&&(0,l.jsx)(n.KE,{}),o.length>0&&o.map(e=>(0,l.jsxs)("div",{className:"relative",children:[e.priority&&(0,l.jsx)("div",{className:"text-white-100 dark:text-white-100 absolute top-0 right-4 px-1.5 py-0.5 bg-green-600 rounded-b-[4px] text-[10px] font-bold",children:"Promoted"}),(0,l.jsx)(v,{provider:e,backgroundColor:`${e.priority?"!bg-[#29A87426]":"bg-white-100 dark:bg-gray-950"}`,rootDenomsStore:s,activeChain:r,activeNetwork:d})]},e.name))]})})}},7803:function(e,a,t){t.r(a),t.d(a,{default:()=>e3});var l=t("52322"),o=t("21950"),s=t("26571"),r=t("23259"),i=t("78646"),n=t("42941"),d=t("2784"),c=t("36321"),m=t("42799"),u=t("48346"),x=t("84601"),g=t("48272"),h=t("63161"),f=t("6391"),v=t.n(f),w=t("94184"),p=t.n(w),k=t("54235"),b=t("84562"),j=t("27963"),y=t("76464"),N=t("3929"),S=t("96128"),C=t.n(S),D=t("79533"),M=t("29312"),Z=t("6401"),z=t("98851"),A=t("75958"),B=t("9501"),_=t("32079"),F=t("41320"),E=t("39279"),R=t("75442"),P=t("23751"),T=t("69816"),L=t("76131"),O=t("71566"),H=t("50449"),J=t("34844"),G=t("9577"),$=t("86874"),V=t("10289"),I=t("34733"),W=t("83275"),U=t("46103"),Y=t("53221"),K=t("50292"),Q=t("14281"),X=t("84994");let q=(0,A.Pi)(e=>{let{isOpen:a,onClose:t,onClaim:s,onClaimAndStake:r,rootDenomsStore:i,delegationsStore:n,validatorsStore:c,unDelegationsStore:m,claimRewardsStore:u,forceChain:x,forceNetwork:g}=e,h=(0,o.a74)(),f=(0,d.useMemo)(()=>x||h,[x,h]),w=(0,o.obn)(),p=(0,d.useMemo)(()=>g||w,[g,w]),[k]=(0,Z.nB)(),b=i.allDenoms,j=n.delegationsForChain(f),y=c.validatorsForChain(f),N=m.unDelegationsForChain(f),S=u.claimRewardsForChain(f),[C]=(0,o.JsT)(b,f,p),{totalRewardsDollarAmt:D,rewards:M}=(0,o.nDu)(b,j,y,N,S,f,p),z=(0,d.useMemo)(()=>{if(M){var e;return null===(e=M.total)||void 0===e?void 0:e.find(e=>e.denom===(null==C?void 0:C.coinMinimalDenom))}},[null==C?void 0:C.coinMinimalDenom,M]),A=(0,d.useMemo)(()=>!z||new(v())(z.amount).lt(1e-5),[z]),B=(0,d.useMemo)(()=>X.J.formatHideBalance((0,o.LHZ)((null==z?void 0:z.amount)??"",null==C?void 0:C.coinDenom)),[null==C?void 0:C.coinDenom,null==z?void 0:z.amount]),_=(0,d.useMemo)(()=>new(v())((null==z?void 0:z.currencyAmount)??"").gt(0)?X.J.formatHideBalance(k(new(v())((null==z?void 0:z.currencyAmount)??""))):B,[k,B,null==z?void 0:z.currencyAmount]),F=(0,d.useMemo)(()=>new(v())((null==z?void 0:z.currencyAmount)??"").gt(0)?B:"",[B,null==z?void 0:z.currencyAmount]),R=(0,d.useMemo)(()=>{var e;let a=(null==M?void 0:null===(e=M.total)||void 0===e?void 0:e.length)??0;return X.J.formatHideBalance(`${(0,o.LHZ)((null==z?void 0:z.amount)??"",null==C?void 0:C.coinDenom)} ${a>1?`+${a-1} more`:""}`)},[null==C?void 0:C.coinDenom,null==z?void 0:z.amount,null==M?void 0:M.total.length]),P=(0,d.useMemo)(()=>D&&new(v())(D).gt(0)?X.J.formatHideBalance(k(new(v())(D))):R,[k,R,D]),L=(0,d.useMemo)(()=>D&&new(v())(D).gt(0)?R:"",[R,D]);return(0,l.jsx)(Q.Z,{isOpen:a,onClose:t,title:"Claim Rewards",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:`Claim rewards on ${C.coinDenom}`}),(0,l.jsx)(E.GenericCard,{title:(0,l.jsx)(T.Z,{size:"sm",color:"text-gray-800 dark:text-white-100",className:"font-bold mb-0.5",children:P}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:L}),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:(0,l.jsx)("button",{onClick:s,className:"rounded-full text-xs font-bold text-white-100 dark:text-gray-900 dark:bg-white-100 bg-gray-900 px-4 py-2",children:"Claim"})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Auto stake the rewards earned"}),(0,l.jsx)(E.GenericCard,{title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:_}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:F}),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:(0,l.jsx)("button",{onClick:r,disabled:A,className:`rounded-full text-xs font-bold px-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-white-100 text-gray-900 ${A&&"opacity-70 !cursor-not-allowed"} `,children:"Claim and Stake"})})]})]})})}),ee=(0,A.Pi)(e=>{let{rootDenomsStore:a,activeChain:t,activeNetwork:s}=e,[r]=(0,o.JsT)(a.allDenoms,t,s);return(0,l.jsxs)("div",{className:"flex flex-col items-center w-full px-4 pt-6 bg-white-100 dark:bg-gray-950 rounded-2xl",children:[(0,l.jsxs)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",children:["You haven't staked any ",r.coinDenom]}),(0,l.jsx)(T.Z,{className:"text-[18px] font-bold",color:"text-black-100 dark:text-white-100",children:"Stake tokens to earn rewards"}),(0,K.l)()?(0,l.jsx)("img",{className:"w-full h-[120px] object-cover mt-2",src:z.r.Misc.CompassNoStake}):(0,l.jsx)("img",{className:"w-[200px] h-[106px] object-cover mt-8",src:z.r.Logos.LeapLogo})]})});var ea=t("23060"),et=t("51994"),el=t("80588"),eo=t("42152"),es=t("30942"),er=t("57124"),ei=t("81252"),en=t("63242"),ed=t("97680"),ec=t.n(ed),em=t("8891"),eu=t.n(em),ex=t("49409"),eg=t("48534"),eh=t("13287");let ef=ei.w.useGetWallet,ev=(0,A.Pi)(e=>{var a,t;let{isOpen:r,onClose:i,validators:n,chainRewards:c,rootDenomsStore:m,rootBalanceStore:u,delegationsStore:x,validatorsStore:g,unDelegationsStore:h,claimRewardsStore:f,forceChain:w,forceNetwork:p}=e,k=(0,o.a74)(),b=(0,d.useMemo)(()=>w||k,[k,w]),j=(0,o.obn)(),y=(0,d.useMemo)(()=>p||j,[j,p]),N=ef(b),[S]=(0,Z.nB)(),C=(0,er.a)(),D=m.allDenoms,M=x.delegationsForChain(b),A=g.validatorsForChain(b),B=h.unDelegationsForChain(b),_=f.claimRewardsForChain(b),[F]=(0,o.JsT)(D,b,y),{delegations:R,totalRewardsDollarAmt:P,rewards:L}=(0,o.nDu)(D,M,A,B,_,b,y),[O,H]=(0,d.useState)(""),J=(0,ea.e7)(D,{activeChain:b,selectedNetwork:y}),{claimAndStakeRewards:G,loading:$,recommendedGasLimit:I,userPreferredGasLimit:W,setUserPreferredGasLimit:Y,setUserPreferredGasPrice:q,gasOption:ee,setGasOption:ei,userPreferredGasPrice:ed,setFeeDenom:em,setMemo:ev,showLedgerPopup:ew,ledgerError:ep,setLedgerError:ek}=(0,o.QnK)(D,R,c,_.refetchDelegatorRewards,H,b,void 0,y),[eb,ej]=(0,d.useState)(null),[ey,eN]=(0,d.useState)(!1),[eS,eC]=(0,d.useState)({option:ee,gasPrice:ed??J.gasPrice}),eD=(0,V.s0)(),eM=(0,d.useMemo)(()=>{if(L){var e;return null===(e=L.total)||void 0===e?void 0:e.find(e=>e.denom===(null==F?void 0:F.coinMinimalDenom))}},[null==F?void 0:F.coinMinimalDenom,L]),eZ=(0,d.useMemo)(()=>{if(L&&Object.values(n??{}).length)return L.rewards.filter(e=>e.reward.some(e=>e.denom===(null==F?void 0:F.coinMinimalDenom))).map(e=>n[e.validator_address])},[null==F?void 0:F.coinMinimalDenom,L,n]),{data:ez}=(0,o.pD_)(eZ&&eZ[0]);(0,es.X)(O),(0,d.useEffect)(()=>{let e=!1;if(null==eZ?void 0:eZ.length)for(let t of eZ){var a;if(t&&(null===(a=t.custom_attributes)||void 0===a?void 0:a.priority)&&t.custom_attributes.priority>0){e=!0;break}}ev(e?"Staked with Leap Wallet":"")},[eZ,ev]);let eA=(0,d.useCallback)(()=>{let e={validator:eZ&&eZ[0],mode:"CLAIM_AND_DELEGATE",forceChain:b,forceNetwork:y};sessionStorage.setItem("navigate-stake-pending-txn-state",JSON.stringify(e)),eD("/stake/pending-txn",{state:e}),eu().track(s.B_.TransactionSigned,{transactionType:"stake_claim_and_delegate"})},[b,y,eD,eZ]),eB=(0,d.useCallback)(async()=>{try{let e=await N();await G(e,{success:eA})}catch(e){ek(e.message),setTimeout(()=>{ek("")},6e3)}},[G,N,ek,eA]);(0,d.useEffect)(()=>{eS.option&&ei(eS.option),eS.gasPrice&&q(eS.gasPrice)},[eS,ei,q]);let e_=(0,d.useCallback)((e,a)=>{eC(e),em(a.denom)},[em]),eF=(0,d.useCallback)(()=>{eN(!1)},[]),eE=(0,d.useMemo)(()=>X.J.formatHideBalance((0,o.LHZ)((null==eM?void 0:eM.amount)??"",null==F?void 0:F.coinDenom)),[null==F?void 0:F.coinDenom,null==eM?void 0:eM.amount]),eR=(0,d.useMemo)(()=>P&&new(v())(P).gt(0)?X.J.formatHideBalance(S(new(v())(P))):eE,[S,eE,P]),eP=(0,d.useMemo)(()=>P&&new(v())(P).gt(0)?eE:"",[eE,P]);return(0,eh.U)(ep||O,{activeChain:b,activeNetwork:y}),(0,l.jsxs)(ea.ZP,{recommendedGasLimit:I,gasLimit:(null==W?void 0:W.toString())??I,setGasLimit:e=>Y(Number(e.toString())),gasPriceOption:eS,onGasPriceOptionChange:e_,error:eb,setError:ej,chain:b,network:y,rootDenomsStore:m,rootBalanceStore:u,children:[(0,l.jsx)(Q.Z,{isOpen:r,onClose:i,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",children:[(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:null==F?void 0:F.icon,onError:(0,ex._)(C),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:eR}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:eP})}),(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:ez??(eZ&&(null===(a=eZ[0])||void 0===a?void 0:a.image))??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:eZ&&(0,o.MDB)(null===(t=eZ[0])||void 0===t?void 0:t.moniker,(0,eg.oj)()?15+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:eZ&&(eZ.length>1?`+${eZ.length-1} more validators`:"")})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2 items-center",children:[(0,l.jsx)(et.a,{setShowFeesSettingSheet:eN}),ep&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:ep}),O&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:O}),eb&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:eb}),(0,l.jsx)(E.Buttons.Generic,{color:(0,K.l)()?U.w.compassPrimary:U.w.green600,size:"normal",disabled:$||!!O||!!eb||!!ep||ew,className:"w-full",onClick:eB,children:$?(0,l.jsx)(ec(),{loop:!0,autoplay:!0,animationData:en,rendererSettings:{preserveAspectRatio:"xMidYMid slice"},className:"h-[28px] w-[28px]"}):"Confirm Claim & Stake"})]})]})}),ew&&(0,l.jsx)(eo.Z,{showLedgerPopup:ew}),(0,l.jsx)(el.k,{showFeesSettingSheet:ey,onClose:eF,gasError:eb})]})}),ew=ei.w.useGetWallet,ep=(0,A.Pi)(e=>{var a,t;let{isOpen:r,onClose:i,validator:n,validators:c,rootDenomsStore:m,delegationsStore:u,validatorsStore:x,unDelegationsStore:g,claimRewardsStore:h,forceChain:f,forceNetwork:w,rootBalanceStore:p}=e,k=(0,o.a74)(),b=(0,d.useMemo)(()=>f||k,[k,f]),j=(0,o.obn)(),y=(0,d.useMemo)(()=>w||j,[j,w]),N=ew(b),S=m.allDenoms,C=(0,ea.e7)(S,{activeChain:b,selectedNetwork:y}),[D]=(0,Z.nB)(),M=(0,er.a)(),[A]=(0,o.JsT)(S,b,y),B=u.delegationsForChain(b),_=x.validatorsForChain(b),F=g.unDelegationsForChain(b),R=h.claimRewardsForChain(b),{delegations:P,totalRewardsDollarAmt:L,rewards:O,totalRewards:H}=(0,o.nDu)(S,B,_,F,R,b,y),{showLedgerPopup:J,onReviewTransaction:G,isLoading:$,error:I,setAmount:W,recommendedGasLimit:Y,userPreferredGasLimit:q,setUserPreferredGasLimit:ee,gasOption:ei,setGasOption:ed,userPreferredGasPrice:em,setFeeDenom:ef,ledgerError:ev,setLedgerError:ep,customFee:ek,feeDenom:eb,setUserPreferredGasPrice:ej}=(0,o.rKd)(S,"CLAIM_REWARDS",n,void 0,Object.values(P??{}),b,y),[ey,eN]=(0,d.useState)(!1),[eS,eC]=(0,d.useState)(null),[eD,eM]=(0,d.useState)({option:ei,gasPrice:em??C.gasPrice}),eZ=(0,V.s0)(),ez=(0,d.useMemo)(()=>{if(O&&c)return O.rewards.map(e=>c[e.validator_address])},[O,c]),{data:eA}=(0,o.pD_)(ez&&ez[0]),eB=(0,d.useMemo)(()=>{if(O){var e;return null==O?void 0:null===(e=O.total)||void 0===e?void 0:e.find(e=>e.denom===(null==A?void 0:A.coinMinimalDenom))}},[null==A?void 0:A.coinMinimalDenom,O]);(0,es.X)(I),(0,d.useEffect)(()=>{W((null==eB?void 0:eB.amount)??"0")},[H]),(0,d.useEffect)(()=>{eD.option&&ed(eD.option),eD.gasPrice&&ej(eD.gasPrice)},[eD,ed,ej]);let e_=(0,d.useCallback)((e,a)=>{eM(e),ef(a.denom)},[ef]),eF=(0,d.useCallback)(()=>{eN(!1)},[]),eE=(0,d.useMemo)(()=>{var e;let a=(null==O?void 0:null===(e=O.total)||void 0===e?void 0:e.length)??0;return X.J.formatHideBalance(`${(0,o.LHZ)((null==eB?void 0:eB.amount)??"",null==A?void 0:A.coinDenom)} ${a>1?`+${a-1} more`:""}`)},[null==A?void 0:A.coinDenom,null==eB?void 0:eB.amount,null==O?void 0:O.total.length]),eR=(0,d.useMemo)(()=>L&&new(v())(L).gt(0)?X.J.formatHideBalance(D(new(v())(L))):eE,[D,eE,L]),eP=(0,d.useMemo)(()=>L&&new(v())(L).gt(0)?eE:"",[eE,L]),eT=(0,d.useCallback)(()=>{let e={validator:ez&&ez[0],mode:"CLAIM_REWARDS",forceChain:b,forceNetwork:y};sessionStorage.setItem("navigate-stake-pending-txn-state",JSON.stringify(e)),eZ("/stake/pending-txn",{state:e}),eu().track(s.B_.TransactionSigned,{transactionType:"stake_claim"})},[b,y,eZ,ez]),eL=(0,d.useCallback)(async()=>{try{let e=await N(b);G(e,eT,!1,{stdFee:ek,feeDenom:eb})}catch(e){ep(e.message),setTimeout(()=>{ep("")},6e3)}},[b,ek,eb,N,G,ep,eT]);return(0,eh.U)(ev||I,{activeChain:b,activeNetwork:y}),(0,l.jsxs)(ea.ZP,{recommendedGasLimit:Y,gasLimit:(null==q?void 0:q.toString())??Y,setGasLimit:e=>ee(Number(e.toString())),gasPriceOption:eD,onGasPriceOptionChange:e_,error:eS,setError:eC,chain:b,network:y,rootDenomsStore:m,rootBalanceStore:p,children:[(0,l.jsx)(Q.Z,{isOpen:r,onClose:i,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",children:[(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:A.icon,onError:(0,ex._)(M),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:eR}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:eP})}),(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:eA??(ez&&(null===(a=ez[0])||void 0===a?void 0:a.image))??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:ez&&(0,o.MDB)(null===(t=ez[0])||void 0===t?void 0:t.moniker,(0,eg.oj)()?15+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:ez&&(ez.length>1?`+${ez.length-1} more validators`:"")})})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-2",children:[(0,l.jsx)(et.a,{setShowFeesSettingSheet:eN}),ev&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:ev}),I&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:I}),eS&&!ey&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:eS}),(0,l.jsx)(E.Buttons.Generic,{color:(0,K.l)()?U.w.compassPrimary:U.w.green600,size:"normal",disabled:$||!!I||!!eS||J||!!ev,className:"w-full",onClick:eL,children:$?(0,l.jsx)(ec(),{loop:!0,autoplay:!0,animationData:en,rendererSettings:{preserveAspectRatio:"xMidYMid slice"},className:"h-[28px] w-[28px]"}):"Confirm Claim"})]})]})}),J&&(0,l.jsx)(eo.Z,{showLedgerPopup:J}),(0,l.jsx)(el.k,{showFeesSettingSheet:ey,onClose:eF,gasError:eS})]})});var ek=t("68708"),eb=t("71603");let ej=(0,A.Pi)(e=>{var a;let{onClaim:t,onClaimAndStake:s,rootDenomsStore:r,delegationsStore:i,validatorsStore:n,unDelegationsStore:c,claimRewardsStore:m,forceChain:u,forceNetwork:x}=e,h=(0,o.a74)(),f=(0,d.useMemo)(()=>u||h,[h,u]),{data:w}=(0,o.S2A)(),p=(0,o.obn)(),k=(0,d.useMemo)(()=>x||p,[p,x]),b=r.allDenoms,[j]=(0,o.JsT)(b,f,k),y=i.delegationsForChain(f),N=n.validatorsForChain(f),S=c.unDelegationsForChain(f),C=m.claimRewardsForChain(f),[D]=(0,Z.nB)(),{activeWallet:M}=(0,eb.ZP)(),{rewards:z}=(0,o.fHb)(),{totalRewards:A,totalRewardsDollarAmt:B,loadingRewards:_,rewards:F}=(0,o.nDu)(b,y,N,S,C,f,k),E=(0,d.useMemo)(()=>"evmos"===f&&(null==M?void 0:M.walletType)===o._KQ.LEDGER||!A||new(v())(A).lt(1e-5),[f,null==M?void 0:M.walletType,A]),R=(0,d.useMemo)(()=>{if(F){var e;return null===(e=F.total)||void 0===e?void 0:e.find(e=>e.denom===(null==j?void 0:j.coinMinimalDenom))}},[null==j?void 0:j.coinMinimalDenom,F]),P=(0,d.useMemo)(()=>{if(B&&new(v())(B).gt(0))return X.J.formatHideBalance(D(new(v())(B)));{var e;let a=(null==F?void 0:null===(e=F.total)||void 0===e?void 0:e.length)??0;return X.J.formatHideBalance(`${(0,o.LHZ)((null==R?void 0:R.amount)??"",null==j?void 0:j.coinDenom)} ${a>1?`+${a-1} more`:""}`)}},[null==j?void 0:j.coinDenom,D,null==R?void 0:R.amount,null==F?void 0:F.total.length,B]);return(0,l.jsxs)("div",{className:"rounded-2xl flex items-center p-4 bg-gray-50 dark:bg-gray-900 justify-between w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,l.jsx)(T.Z,{size:"xs",className:"font-medium",color:"text-gray-700 dark:text-gray-400",children:"You have earned"}),_&&(0,l.jsx)($.Z,{width:50,height:14}),!_&&(0,l.jsx)(T.Z,{size:"sm",className:"font-bold",color:"text-black-100 dark:text-white-100",children:P})]}),_&&(0,l.jsx)($.Z,{width:95,height:28,borderRadius:100}),!_&&("lava"===f&&(null==w?void 0:null===(a=w.restaking)||void 0===a?void 0:a.extension)==="active"?(0,l.jsxs)("button",{disabled:E&&new(v())(z.totalRewards).lt(1e-5),onClick:t,className:`py-2 pl-4 pr-3 hover:cursor-pointer flex items-center rounded-full bg-gray-200 dark:bg-gray-800 gap-x-2 ${E&&new(v())(z.totalRewards).lt(1e-5)&&"opacity-70 !cursor-not-allowed"}`,children:[(0,l.jsx)("span",{className:"font-bold text-xs text-black-100 dark:text-white-100",children:"Claim"}),(0,l.jsx)(g.p,{size:12,className:"text-black-100 dark:text-white-100"})]}):(0,l.jsxs)("button",{disabled:E,className:`hover:cursor-pointer flex items-center rounded-full overflow-hidden bg-gray-200 dark:bg-gray-800 ${E&&"opacity-70 !cursor-not-allowed"}`,children:[(0,l.jsx)("span",{onClick:t,className:"pr-2 py-2 pl-4 font-bold text-xs text-black-100 dark:text-white-100",children:"Claim"}),(0,l.jsx)("div",{className:"w-px h-4 bg-gray-400 dark:bg-gray-700"}),(0,l.jsx)("span",{onClick:s,className:"pr-3 py-2 pl-2",children:(0,l.jsx)(g.p,{size:12,className:"text-black-100 dark:text-white-100"})})]}))]})}),ey=(0,A.Pi)(e=>{let{onClaim:a,onClaimAndStake:t,rootDenomsStore:s,delegationsStore:r,validatorsStore:i,unDelegationsStore:n,claimRewardsStore:c,forceChain:m,forceNetwork:u}=e,x=(0,o.a74)(),g=(0,d.useMemo)(()=>m||x,[x,m]),h=(0,o.obn)(),f=(0,d.useMemo)(()=>u||h,[h,u]),w=s.allDenoms,p=r.delegationsForChain(g),k=i.validatorsForChain(g),b=n.unDelegationsForChain(g),j=c.claimRewardsForChain(g),{loadingDelegations:y,currencyAmountDelegation:N,totalDelegationAmount:S}=(0,o.nDu)(w,p,k,b,j,g,f),[C]=(0,Z.nB)(),D=(0,d.useMemo)(()=>{if(N&&new(v())(N).gt(0))return C(new(v())(N))},[N,C]);return(0,l.jsxs)("div",{className:"flex flex-col w-full bg-white-100 dark:bg-gray-950 rounded-2xl p-4 gap-y-4",children:[(0,l.jsx)(T.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium",children:"Your deposited amount"}),y&&(0,l.jsx)($.Z,{width:100,count:2}),!y&&(0,l.jsxs)("div",{children:[(0,l.jsx)(T.Z,{size:"lg",className:"font-black",children:D&&X.J.formatHideBalance(D)}),(0,l.jsx)(T.Z,{size:"sm",className:"font-medium",color:"text-gray-800 dark:text-gray-200",children:X.J.formatHideBalance(S??"-")})]}),(0,l.jsx)(ej,{onClaim:a,onClaimAndStake:t,rootDenomsStore:s,delegationsStore:r,validatorsStore:i,unDelegationsStore:n,claimRewardsStore:c,forceChain:g,forceNetwork:f})]})}),eN=(0,A.Pi)(e=>{let{rootDenomsStore:a,delegationsStore:t,validatorsStore:s,unDelegationsStore:r,claimRewardsStore:i,forceChain:n,forceNetwork:c}=e,m=(0,O.a7)(),u=(0,d.useMemo)(()=>n||m,[m,n]),x=(0,o.obn)(),g=(0,d.useMemo)(()=>c||x,[x,c]),h=(0,er.a)(),f=(0,o.QSC)(u),v=a.allDenoms,w=t.delegationsForChain(u),p=s.validatorsForChain(u),k=r.unDelegationsForChain(u),b=i.claimRewardsForChain(u),{network:j}=(0,o.nDu)(v,w,p,k,b,u,g),y=(0,d.useMemo)(()=>{if(null==j?void 0:j.chainApr)return C()(((null==j?void 0:j.chainApr)*100).toString(),{precision:2,symbol:""}).format()},[null==j?void 0:j.chainApr]);return(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsxs)("div",{className:"flex gap-x-[4px]",children:[(0,l.jsx)("img",{width:24,height:24,src:f.chainSymbolImageUrl??h,onError:(0,ex._)(h)}),(0,l.jsx)(T.Z,{size:"md",className:"font-bold",children:f.chainName})]}),(0,l.jsx)(T.Z,{size:"md",color:"dark:text-gray-400 text-gray-700",className:"font-medium",children:y&&`APR ${y}%`})]})}),eS=(0,A.Pi)(e=>{let{isOpen:a,onClose:t,onSwitchValidator:s,provider:r,delegation:i,rootDenomsStore:n,forceChain:c,forceNetwork:m}=e,u=n.allDenoms,x=(0,o.a74)(),g=(0,d.useMemo)(()=>c||x,[x,c]),h=(0,o.obn)(),f=(0,d.useMemo)(()=>m||h,[h,m]),[w]=(0,o.JsT)(u,g,f),[p]=(0,Z.nB)(),{theme:k}=(0,E.useTheme)(),b=(0,d.useMemo)(()=>new(v())(i.amount.currencyAmount??"").gt(0)?X.J.formatHideBalance(p(new(v())(i.amount.currencyAmount??""))):X.J.formatHideBalance(i.amount.formatted_amount??i.amount.amount),[i.amount.amount,i.amount.currencyAmount,i.amount.formatted_amount,p]),j=(0,d.useMemo)(()=>new(v())(i.amount.currencyAmount??"").gt(0)?X.J.formatHideBalance(i.amount.formatted_amount??i.amount.amount):"",[i.amount.amount,i.amount.currencyAmount,i.amount.formatted_amount]);return(0,l.jsx)(Q.Z,{isOpen:a,onClose:t,title:"Provider Details",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col w-full gap-y-4",children:[(0,l.jsxs)("div",{className:"flex w-full gap-x-2 items-center",children:[(0,l.jsx)("img",{width:24,height:24,className:"rounded-full",src:z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator)}),(0,l.jsx)(T.Z,{size:"lg",color:"text-black-100 dark:text-white-100",className:"font-bold",children:(0,o.MDB)(null==r?void 0:r.moniker,(0,eg.oj)()?8+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):15,3)})]}),(0,l.jsxs)("div",{className:"flex w-full rounded-lg p-3 bg-white-100 dark:bg-gray-950 border  border-gray-100 dark:border-gray-850",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"Total Staked"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:"N/A"})]}),(0,l.jsx)("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"Commission"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:"N/A"})]}),(0,l.jsx)("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"APY"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:"N/A"})]})]}),(0,l.jsxs)("div",{className:"w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium",children:"Your deposited amount"}),(0,l.jsxs)("div",{className:"flex gap-x-4 mt-4",children:[(0,l.jsx)("img",{className:"w-9 h-9",src:w.icon}),(0,l.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:b}),(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:j})]})]})]}),(0,l.jsx)(E.Buttons.Generic,{onClick:s,color:k===E.ThemeName.DARK?U.w.white100:U.w.black100,className:"w-full",size:"normal",children:(0,l.jsx)(T.Z,{color:"text-white-100 dark:text-black-100",children:"Switch provider"})})]})})}),eC=(0,A.Pi)(e=>{let{provider:a,delegation:t,onClick:s}=e,[r]=(0,Z.nB)(),i=(0,d.useMemo)(()=>new(v())(t.amount.currencyAmount??"").gt(0)?X.J.formatHideBalance(r(new(v())(t.amount.currencyAmount??""))):X.J.formatHideBalance(t.amount.formatted_amount??t.amount.amount),[t.amount.amount,t.amount.currencyAmount,t.amount.formatted_amount,r]),n=(0,d.useMemo)(()=>new(v())(t.amount.currencyAmount??"").gt(0)?X.J.formatHideBalance(t.amount.formatted_amount??t.amount.amount):"",[t.amount.amount,t.amount.currencyAmount,t.amount.formatted_amount]);return(0,l.jsx)("div",{onClick:s,className:"flex justify-between items-center px-4 py-3 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl",children:(0,l.jsxs)("div",{className:"flex items-center w-full",children:[(0,l.jsx)("img",{src:z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:28,height:28,className:"mr-4 rounded-full"}),(0,l.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-start",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden",children:(0,o.MDB)(null==a?void 0:a.moniker,(0,eg.oj)()?5+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),a.specs.length>0&&(0,l.jsx)(T.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:`${a.specs.length} Services`})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-y-0.5",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold",children:i}),(0,l.jsx)(T.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium",children:n})]})]})]})})});function eD(e){let{forceChain:a,forceNetwork:t}=e,s=(0,V.s0)(),[r,i]=(0,d.useState)(!1),[n,c]=(0,d.useState)(),{delegations:u,loadingDelegations:x,providers:g}=(0,o.fHb)(),h=(0,d.useMemo)(()=>Object.values(u??{}).find(e=>"empty_provider"===e.provider),[u]),f=(0,d.useMemo)(()=>Object.values(u??{}).sort((e,a)=>parseFloat(a.amount.amount)-parseFloat(e.amount.amount)),[u]),v=(0,d.useMemo)(()=>({provider:(null==h?void 0:h.provider)??"",moniker:"Empty Provider",address:(null==h?void 0:h.provider)??"",specs:[]}),[null==h?void 0:h.provider]);return(0,l.jsxs)(l.Fragment,{children:[x&&(0,l.jsx)(P.KE,{}),(0,l.jsx)("div",{className:"flex flex-col w-full gap-y-2",children:!x&&g&&f.length>0&&(0,l.jsxs)(l.Fragment,{children:[h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Empty Provider"}),(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Amount Staked"})]}),(0,l.jsx)(eC,{delegation:h,provider:v,onClick:()=>{c(h),i(!0)}})]}),f.length>1&&(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Provider"}),(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Amount Staked"})]}),f.map(e=>{let a=null==g?void 0:g.find(a=>a.address===e.provider);return a&&(0,l.jsx)(eC,{delegation:e,provider:a,onClick:()=>{c(e),i(!0)}},null==a?void 0:a.address)})]})}),n&&(0,l.jsx)(eS,{rootDenomsStore:m.gb,isOpen:r,onClose:()=>i(!1),provider:n.provider===(null==h?void 0:h.provider)?v:g.find(e=>e.address===n.provider),delegation:n,onSwitchValidator:()=>{s("/stake/input",{state:{mode:"REDELEGATE",fromProvider:n.provider===(null==h?void 0:h.provider)?v:g.find(e=>e.address===n.provider),providerDelegation:n}})},forceChain:a,forceNetwork:t})]})}var eM=t("17469"),eZ=t("31655"),ez=t("32692");let eA=(0,A.Pi)(e=>{let{validator:a,currencyBalance:t,formattedBalance:s}=e,{data:r}=(0,o.pD_)(a),[i]=(0,Z.nB)(),n=(0,d.useMemo)(()=>new(v())(t??"").gt(0)?X.J.formatHideBalance(i(new(v())(t??""))):X.J.formatHideBalance(s??""),[t,s,i]),c=(0,d.useMemo)(()=>new(v())(t??"").gt(0)?X.J.formatHideBalance(s??""):"",[t,s]);return(0,l.jsx)("div",{className:"flex justify-between items-center px-4 py-3 bg-white-100 dark:bg-gray-950 rounded-xl",children:(0,l.jsxs)("div",{className:"flex items-center w-full",children:[(0,l.jsx)("img",{src:r??(null==a?void 0:a.image)??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:28,height:28,className:"mr-4 rounded-full"}),(0,l.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden",children:(0,o.MDB)(a.moniker,(0,eg.oj)()?6+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),(0,l.jsxs)(T.Z,{size:"xs",color:"dark:text-yellow-500 text-yellow-600",className:"font-medium",children:["Queued for unstaking in ",ez.t.timeLeft]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold",children:n}),(0,l.jsx)(T.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:c})]})]})]})})});var eB=t("114"),e_=t("36906");let eF=ei.w.useGetWallet,eE=(0,A.Pi)(e=>{let{isOpen:a,onClose:t,validator:r,unbondingDelegationEntry:i,rootDenomsStore:n,rootBalanceStore:c,forceChain:m,forceNetwork:u}=e,x=n.allDenoms,g=eF(),h=(0,o.a74)(),f=(0,d.useMemo)(()=>m||h,[h,m]),w=(0,o.obn)(),p=(0,d.useMemo)(()=>u||w,[w,u]),k=(0,ea.e7)(x,{activeChain:f,selectedNetwork:p}),[b]=(0,Z.nB)(),[j]=(0,o.JsT)(x,f,p),y=(0,M.a1)(),{theme:N}=(0,E.useTheme)(),{showLedgerPopup:S,onReviewTransaction:C,isLoading:D,error:A,setAmount:B,recommendedGasLimit:_,userPreferredGasLimit:F,setUserPreferredGasLimit:R,setUserPreferredGasPrice:P,gasOption:L,setGasOption:O,userPreferredGasPrice:H,setFeeDenom:J,setCreationHeight:G,ledgerError:$,setLedgerError:I,customFee:W,feeDenom:Y}=(0,o.rKd)(x,"CANCEL_UNDELEGATION",r,void 0,void 0,f,p),[X,q]=(0,d.useState)(!1),[ee,er]=(0,d.useState)(null),[ei,ed]=(0,d.useState)({option:L,gasPrice:H??k.gasPrice}),em=(0,V.s0)(),{data:ef}=(0,o.pD_)(r);(0,es.X)(A),(0,d.useEffect)(()=>{G(i.creation_height),B(i.balance)},[i]),(0,d.useEffect)(()=>{ei.option&&O(ei.option),ei.gasPrice&&P(ei.gasPrice)},[ei,O,P]);let ev=(0,d.useCallback)((e,a)=>{ed(e),J(a.denom)},[J]),ew=(0,d.useCallback)(()=>{q(!1)},[]),ep=(0,d.useCallback)(()=>{let e={validator:r,mode:"CANCEL_UNDELEGATION",forceChain:f,forceNetwork:p};sessionStorage.setItem("navigate-stake-pending-txn-state",JSON.stringify(e)),em("/stake/pending-txn",{state:e}),eu().track(s.B_.TransactionSigned,{transactionType:"stake_cancel_undelegate"})},[f,p,em,r]),ek=(0,d.useCallback)(async()=>{try{let e=await g(f);C(e,ep,!1,{stdFee:W,feeDenom:Y})}catch(e){I(e.message),setTimeout(()=>{I("")},6e3)}},[W,Y,g,C,I,ep,f]);return(0,eh.U)($||A,{activeChain:f,activeNetwork:p}),(0,l.jsxs)(ea.ZP,{recommendedGasLimit:_,gasLimit:(null==F?void 0:F.toString())??_,setGasLimit:e=>R(Number(e.toString())),gasPriceOption:ei,onGasPriceOptionChange:ev,error:ee,setError:er,chain:f,network:p,rootDenomsStore:n,rootBalanceStore:c,children:[(0,l.jsx)(Q.Z,{isOpen:a,onClose:t,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsx)(e_.k,{size:20,className:"text-orange-500 dark:text-orange-300"}),(0,l.jsx)(T.Z,{size:"sm",className:"font-bold",children:"Confirm Unstaking"})]}),(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",children:"This will reset the unstaking period and stake the tokens back to the validator"})]}),(0,l.jsxs)("div",{className:"flex gap-x-4 w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg",children:[(0,l.jsx)("img",{className:"w-9 h-9",src:j.icon,onError:(0,ex._)(y)}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mb-0.5",children:b(new(v())((null==i?void 0:i.currencyBalance)??""))}),(0,l.jsx)(T.Z,{color:"text-gray-600 dark:text-gray-400",size:"xs",className:"font-medium",children:null==i?void 0:i.formattedBalance})]}),(0,l.jsxs)("div",{className:"ml-auto flex flex-col items-end",children:[(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mb-0.5",children:(0,eZ.z)((null==i?void 0:i.completion_time)??"")}),(0,l.jsx)(T.Z,{color:"text-gray-600 dark:text-gray-400",size:"xs",className:"font-medium",children:(null==i?void 0:i.completion_time)&&(0,o.E0P)(null==i?void 0:i.completion_time)})]})]}),(0,l.jsxs)("div",{className:"flex gap-x-4 w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg",children:[(0,l.jsx)("img",{className:"w-9 h-9",src:ef??(null==r?void 0:r.image)??z.r.Misc.Validator,onError:(0,ex._)(eB.GenericLight)}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mb-0.5",children:(0,o.MDB)(null==r?void 0:r.moniker,(0,eg.oj)()?15+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),(0,l.jsx)(T.Z,{color:"text-gray-600 dark:text-gray-400",size:"xs",className:"font-medium",children:"Validator"})]})]}),(0,l.jsx)(et.a,{setShowFeesSettingSheet:q}),$&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 my-1 px-2",children:$}),A&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 my-1 px-2",children:A}),ee&&!X&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 my-1 px-2",children:ee}),(0,l.jsxs)("div",{className:"flex gap-x-4 w-full",children:[(0,l.jsx)(E.Buttons.Generic,{onClick:t,color:N===E.ThemeName.DARK?U.w.gray800:U.w.gray200,className:"w-full",size:"normal",children:(0,l.jsx)(T.Z,{color:"dark:text-white-100 text-black-100",children:"Cancel"})}),(0,l.jsx)(E.Buttons.Generic,{onClick:ek,color:(0,K.l)()?U.w.compassPrimary:U.w.green600,className:"w-full",size:"normal",disabled:D||!!A||!!ee||!!$,children:D?(0,l.jsx)(ec(),{loop:!0,autoplay:!0,animationData:en,rendererSettings:{preserveAspectRatio:"xMidYMid slice"},className:"h-[28px] w-[28px]"}):"Confirm"})]})]})}),S&&(0,l.jsx)(eo.Z,{showLedgerPopup:S}),(0,l.jsx)(el.k,{showFeesSettingSheet:X,onClose:ew,gasError:ee})]})}),eR=(0,A.Pi)(e=>{var a,t,s;let{isOpen:r,onClose:i,validator:n,unbondingDelegation:c,unbondingDelegationEntry:m,rootDenomsStore:u,delegationsStore:x,validatorsStore:g,unDelegationsStore:h,claimRewardsStore:f,rootBalanceStore:w,forceChain:p,forceNetwork:k}=e,b=(0,o.a74)(),j=(0,d.useMemo)(()=>p||b,[b,p]),y=(0,o.obn)(),N=(0,d.useMemo)(()=>k||y,[y,k]),S=u.allDenoms,D=x.delegationsForChain(j),A=g.validatorsForChain(j),B=h.unDelegationsForChain(j),_=f.claimRewardsForChain(j),[F]=(0,o.JsT)(S,j,N),R=(0,M.a1)(),[P]=(0,Z.nB)(),{theme:L}=(0,E.useTheme)(),[O,H]=(0,d.useState)(!1),{network:J}=(0,o.nDu)(S,D,A,B,_,j,N),G=null==J?void 0:J.validatorAprs,{data:$}=(0,o.pD_)(n),V=(0,d.useMemo)(()=>new(v())((null==m?void 0:m.currencyBalance)??"").gt(0)?X.J.formatHideBalance(P(new(v())((null==m?void 0:m.currencyBalance)??""))):X.J.formatHideBalance((null==m?void 0:m.formattedBalance)??""),[P,null==m?void 0:m.currencyBalance,null==m?void 0:m.formattedBalance]),W=(0,d.useMemo)(()=>new(v())((null==m?void 0:m.currencyBalance)??"").gt(0)?X.J.formatHideBalance((null==m?void 0:m.formattedBalance)??""):"",[null==m?void 0:m.currencyBalance,null==m?void 0:m.formattedBalance]),Y=c&&m&&(null===(a=I.b.canceledUnBondingDelegationsMap[c.validator_address])||void 0===a?void 0:a.some(e=>e===m.creation_height));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Q.Z,{isOpen:r,onClose:i,title:"Validator Details",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col w-full gap-y-4",children:[(0,l.jsxs)("div",{className:"flex w-full gap-x-2 items-center",children:[(0,l.jsx)("img",{width:24,height:24,className:"rounded-full",src:$??(null==n?void 0:n.image)??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator)}),(0,l.jsx)(T.Z,{size:"lg",color:"text-black-100 dark:text-white-100",className:"font-bold",children:(0,o.MDB)(n.moniker,(0,eg.oj)()?15+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)})]}),(0,l.jsxs)("div",{className:"flex w-full rounded-lg p-3 bg-white-100 dark:bg-gray-950 border  border-gray-100 dark:border-gray-850",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"Total Staked"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:C()((null==n?void 0:null===(t=n.delegations)||void 0===t?void 0:t.total_tokens_display)??n.tokens??"",{symbol:"",precision:0}).format()})]}),(0,l.jsx)("div",{className:"w-px h-10 bg-gray-200 dark:bg-gray-850"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"Commission"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:(null===(s=n.commission)||void 0===s?void 0:s.commission_rates.rate)?`${new(v())(n.commission.commission_rates.rate).multipliedBy(100).toFixed(0)}%`:"N/A"})]}),(0,l.jsx)("div",{className:"w-px h-10 bg-gray-200 dark:bg-gray-850"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"APR"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:G&&(G[null==n?void 0:n.address]?`${C()(100*G[null==n?void 0:n.address],{precision:2,symbol:""}).format()}%`:"N/A")})]})]}),(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium",children:"Pending Unstake"}),(0,l.jsxs)("div",{className:"flex gap-x-4 w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg",children:[(0,l.jsx)("img",{className:"w-9 h-9",src:F.icon,onError:(0,ex._)(R)}),(0,l.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mt-0.5",children:V}),(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:W})]}),(0,l.jsxs)("div",{className:"ml-auto flex flex-col items-end",children:[(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold mt-0.5",children:(0,eZ.z)((null==m?void 0:m.completion_time)??"")}),(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:(null==m?void 0:m.completion_time)&&(0,o.E0P)(null==m?void 0:m.completion_time)})]})]}),!Y&&(0,l.jsx)(E.Buttons.Generic,{onClick:()=>{H(!0),i()},className:"w-full",size:"normal",color:L===E.ThemeName.DARK?U.w.white100:U.w.black100,children:(0,l.jsx)(T.Z,{color:"text-white-100 dark:text-black-100",children:"Cancel Unstake"})})]})}),(0,l.jsx)(eE,{isOpen:O,onClose:()=>H(!1),unbondingDelegationEntry:m,validator:n,rootDenomsStore:u,rootBalanceStore:w,forceChain:j,forceNetwork:N})]})}),eP=(0,A.Pi)(e=>{let{validator:a,isCancelledScheduled:t,onClick:s,isCancleUnstakeSupported:r,timeLeftText:i,entry:n}=e,{data:c}=(0,o.pD_)(a),[m]=(0,Z.nB)(),u=(0,d.useMemo)(()=>new(v())(n.currencyBalance??"").gt(0)?X.J.formatHideBalance(m(new(v())(n.currencyBalance??""))):X.J.formatHideBalance(n.formattedBalance??""),[n.currencyBalance,n.formattedBalance,m]),x=(0,d.useMemo)(()=>new(v())(n.currencyBalance??"").gt(0)?X.J.formatHideBalance(n.formattedBalance??""):"",[n.currencyBalance,n.formattedBalance]);return(0,l.jsx)("div",{onClick:s,className:`flex justify-between items-center px-4 py-3 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl ${r&&"cursor-pointer"}`,children:(0,l.jsxs)("div",{className:"flex items-center w-full",children:[(0,l.jsx)("img",{src:c??(null==a?void 0:a.image)??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:28,height:28,className:"mr-4 rounded-full"}),(0,l.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden",children:(0,o.MDB)(a.moniker,(0,eg.oj)()?6+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),t?(0,l.jsxs)(T.Z,{size:"xs",color:"dark:text-yellow-500 text-yellow-600",className:"font-medium",children:["Queued for cancellation in ",ez.t.timeLeft]}):!!i&&(0,l.jsx)(T.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:i})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold",children:u}),(0,l.jsx)(T.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:x})]})]})]})})}),eT=(0,A.Pi)(e=>{let{rootDenomsStore:a,delegationsStore:t,validatorsStore:s,unDelegationsStore:r,claimRewardsStore:i,forceChain:n,forceNetwork:c,rootBalanceStore:m}=e,u=(0,o.a74)(),x=(0,d.useMemo)(()=>n||u,[u,n]),g=(0,o.obn)(),h=(0,d.useMemo)(()=>c||g,[g,c]),f=a.allDenoms,v=t.delegationsForChain(x),w=s.validatorsForChain(x),p=r.unDelegationsForChain(x),k=i.claimRewardsForChain(x),[b]=(0,o.JsT)(f,x,h),j=I.b.getUnDelegationEpochMessages(b),{unboundingDelegationsInfo:y,loadingUnboundingDelegations:N}=(0,o.nDu)(f,v,w,p,k,x,h),S=(0,d.useMemo)(()=>{var e;return null===(e=w.validatorData.validators)||void 0===e?void 0:e.reduce((e,a)=>(e[a.address]=a,e),{})},[w.validatorData.validators]),C=(0,d.useMemo)(()=>{var e;return null===(e=Object.values(y??{}))||void 0===e?void 0:e[0]},[y]),{isCancleUnstakeSupported:D}=(0,o.MY5)(C,x,h),[M,Z]=(0,d.useState)(!1),[z,A]=(0,d.useState)(),[B,_]=(0,d.useState)();return N||0!==Object.values(y??{}).length&&S||0!==j.length?(0,l.jsxs)(l.Fragment,{children:[N&&(0,l.jsx)(eM.m,{}),!N&&S&&y&&(0,l.jsxs)("div",{className:"flex flex-col w-full gap-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Validator"}),(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Amount Staked"})]}),j.map((e,a)=>{let t=S[e.validatorAddress];return t?(0,l.jsx)(eA,{currencyBalance:e.currencyBalance,formattedBalance:e.formattedBalance,validator:t},`${null==t?void 0:t.address} ${a}`):null}),Object.values(y??{}).map(e=>{let a=S[null==e?void 0:e.validator_address];return a?e.entries.map((t,o)=>{var s;let r="babylon"===x?null:(0,eZ.z)(t.completion_time),i=null===(s=I.b.canceledUnBondingDelegationsMap[e.validator_address])||void 0===s?void 0:s.some(e=>e===t.creation_height);return(0,l.jsx)(eP,{entry:t,isCancleUnstakeSupported:D,timeLeftText:r,isCancelledScheduled:i,validator:a,onClick:()=>{D&&(Z(!0),A(e),_(t))}},`${null==a?void 0:a.address} ${o}`)}):null})]}),z&&B&&S&&(0,l.jsx)(eR,{isOpen:M,onClose:()=>Z(!1),unbondingDelegation:z,unbondingDelegationEntry:B,validator:S[z.validator_address],rootDenomsStore:a,rootBalanceStore:m,delegationsStore:t,validatorsStore:s,unDelegationsStore:r,claimRewardsStore:i,forceChain:x,forceNetwork:h})]}):(0,l.jsx)(l.Fragment,{})});var eL=t("64891");let eO=ei.w.useGetWallet,eH=(0,A.Pi)(e=>{let{isOpen:a,onClose:t,validator:r,rootDenomsStore:i,delegationsStore:n,validatorsStore:c,unDelegationsStore:m,claimRewardsStore:u,forceChain:x,forceNetwork:g,rootBalanceStore:h,selectedDelegation:f}=e,w=(0,o.a74)(),p=(0,d.useMemo)(()=>x||w,[w,x]),k=(0,o.obn)(),b=(0,d.useMemo)(()=>g||k,[k,g]),j=eO(p),y=i.allDenoms,N=(0,ea.e7)(y,{activeChain:p,selectedNetwork:b}),[S]=(0,Z.nB)(),C=(0,er.a)(),[D]=(0,o.JsT)(y,p,b),M=n.delegationsForChain(p),A=c.validatorsForChain(p),B=m.unDelegationsForChain(p),_=u.claimRewardsForChain(p),{rewards:F}=(0,o.nDu)(y,M,A,B,_,p,b),{showLedgerPopup:R,onReviewTransaction:P,isLoading:L,error:O,setAmount:H,recommendedGasLimit:J,userPreferredGasLimit:G,setUserPreferredGasLimit:$,gasOption:I,setGasOption:W,userPreferredGasPrice:Y,setFeeDenom:X,ledgerError:q,setLedgerError:ee,customFee:ei,feeDenom:ed,setUserPreferredGasPrice:em}=(0,o.rKd)(y,"CLAIM_REWARDS",r,void 0,[f],p,b),[ef,ev]=(0,d.useState)(!1),[ew,ep]=(0,d.useState)(null),[ek,eb]=(0,d.useState)({option:I,gasPrice:Y??N.gasPrice}),ej=(0,V.s0)(),{data:ey}=(0,o.pD_)(r),[eN,eS,eC]=(0,d.useMemo)(()=>{let e=_.rewards.rewards[(null==r?void 0:r.address)??""],a=null==e?void 0:e.reward.reduce((e,a)=>e.plus(new(v())(a.currencyAmount??"")),new(v())(0)),t=(null==e?void 0:e.reward.length)??0,l=null==e?void 0:e.reward.find(e=>e.denom===(null==D?void 0:D.coinMinimalDenom)),s=(0,o.LHZ)((null==l?void 0:l.amount)??"",null==D?void 0:D.coinDenom)+`${t>1?` +${t-1} more`:""}`;return[a,s,null==e?void 0:e.reward.reduce((e,a)=>e.plus(new(v())(a.amount)),new(v())(0))]},[null==D?void 0:D.coinDenom,null==D?void 0:D.coinMinimalDenom,_.rewards.rewards,null==r?void 0:r.address]);(0,es.X)(O),(0,d.useEffect)(()=>{H((null==eC?void 0:eC.toString())??"0")},[eC]),(0,d.useEffect)(()=>{ek.option&&W(ek.option),ek.gasPrice&&em(ek.gasPrice)},[ek,W,em]);let eD=(0,d.useCallback)((e,a)=>{eb(e),X(a.denom)},[X]),eM=(0,d.useCallback)(()=>{ev(!1)},[]),eZ=(0,d.useCallback)(()=>{let e={validator:r,mode:"CLAIM_REWARDS",forceChain:p,forceNetwork:b};sessionStorage.setItem("navigate-stake-pending-txn-state",JSON.stringify(e)),ej("/stake/pending-txn",{state:e}),eu().track(s.B_.TransactionSigned,{transactionType:"stake_claim"})},[p,b,ej,r]),ez=(0,d.useCallback)(async()=>{try{let e=await j(p);P(e,eZ,!1,{stdFee:ei,feeDenom:ed})}catch(e){ee(e.message),setTimeout(()=>{ee("")},6e3)}},[p,ei,ed,j,P,ee,eZ]);return(0,eh.U)(q||O,{activeChain:p,activeNetwork:b}),(0,l.jsxs)(ea.ZP,{recommendedGasLimit:J,gasLimit:(null==G?void 0:G.toString())??J,setGasLimit:e=>$(Number(e.toString())),gasPriceOption:ek,onGasPriceOptionChange:eD,error:ew,setError:ep,chain:p,network:b,rootDenomsStore:i,rootBalanceStore:h,children:[(0,l.jsx)(Q.Z,{isOpen:a,onClose:t,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",children:[(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:D.icon,onError:(0,ex._)(C),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:S(eN??new(v())(""))}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:eS})}),(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:ey??(null==r?void 0:r.image)??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:r&&(0,o.MDB)(r.moniker,(0,eg.oj)()?15+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)})})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-2",children:[(0,l.jsx)(et.a,{setShowFeesSettingSheet:ev}),q&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:q}),O&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:O}),ew&&!ef&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:ew}),(0,l.jsx)(E.Buttons.Generic,{color:(0,K.l)()?U.w.compassPrimary:U.w.green600,size:"normal",disabled:L||!!O||!!ew||R||!!q,className:"w-full",onClick:ez,children:L?(0,l.jsx)(ec(),{loop:!0,autoplay:!0,animationData:en,rendererSettings:{preserveAspectRatio:"xMidYMid slice"},className:"h-[28px] w-[28px]"}):"Confirm Claim"})]})]})}),R&&(0,l.jsx)(eo.Z,{showLedgerPopup:R}),(0,l.jsx)(el.k,{showFeesSettingSheet:ef,onClose:eM,gasError:ew})]})}),eJ=(0,A.Pi)(e=>{var a,t,s;let{isOpen:r,onClose:i,onSwitchValidator:n,onUnstake:c,validator:m,delegation:u,rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,forceChain:p,forceNetwork:k,onValidatorClaim:b}=e,j=(0,o.a74)(),y=(0,d.useMemo)(()=>p||j,[j,p]),N=(0,o.obn)(),S=(0,d.useMemo)(()=>k||N,[N,k]),D=x.allDenoms,A=g.delegationsForChain(y),B=h.validatorsForChain(y),_=f.unDelegationsForChain(y),F=w.claimRewardsForChain(y),R=(0,M.a1)(),[P]=(0,o.JsT)(D,y,S),[L]=(0,Z.nB)(),{network:O,rewards:H}=(0,o.nDu)(D,A,B,_,F,y,S),J=null==O?void 0:O.validatorAprs,{data:G}=(0,o.pD_)(m),{theme:$}=(0,E.useTheme)(),[V,I,W]=(0,d.useMemo)(()=>{let e=F.rewards.rewards[(null==m?void 0:m.address)??""],a=null==e?void 0:e.reward.reduce((e,a)=>e.plus(new(v())(a.currencyAmount??"")),new(v())(0)),t=(null==e?void 0:e.reward.length)??0,l=null==e?void 0:e.reward.find(e=>e.denom===(null==P?void 0:P.coinMinimalDenom)),s=(0,o.LHZ)((null==l?void 0:l.amount)??"",null==P?void 0:P.coinDenom)+`${t>1?` +${t-1} more`:""}`;return[a,s,null==e?void 0:e.reward.reduce((e,a)=>e.plus(new(v())(a.amount)),new(v())(0))]},[null==P?void 0:P.coinDenom,null==P?void 0:P.coinMinimalDenom,F.rewards.rewards,null==m?void 0:m.address]),Y=(0,d.useMemo)(()=>new(v())(u.balance.currencyAmount??"").gt(0)?X.J.formatHideBalance(L(new(v())(u.balance.currencyAmount??""))):X.J.formatHideBalance(u.balance.formatted_amount??u.balance.amount),[u.balance.amount,u.balance.currencyAmount,u.balance.formatted_amount,L]),q=(0,d.useMemo)(()=>new(v())(u.balance.currencyAmount??"").gt(0)?X.J.formatHideBalance(u.balance.formatted_amount??u.balance.amount):"",[u.balance.amount,u.balance.currencyAmount,u.balance.formatted_amount]);return(0,l.jsx)(Q.Z,{isOpen:r,onClose:i,title:"Validator Details",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col w-full gap-y-4",children:[(0,l.jsxs)("div",{className:"flex w-full gap-x-2 items-center",children:[(0,l.jsx)("img",{width:24,height:24,className:"rounded-full",src:G??m.image??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator)}),(0,l.jsx)(T.Z,{size:"lg",color:"text-black-100 dark:text-white-100",className:"font-bold",children:(0,o.MDB)(m.moniker,(0,eg.oj)()?18+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)})]}),(0,l.jsxs)("div",{className:"flex w-full rounded-lg p-3 bg-white-100 dark:bg-gray-950 border  border-gray-100 dark:border-gray-850",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"Total Staked"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:C()((null==m?void 0:null===(a=m.delegations)||void 0===a?void 0:a.total_tokens_display)??m.tokens??"",{symbol:"",precision:0}).format()})]}),(0,l.jsx)("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"Commission"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:(null==m?void 0:null===(s=m.commission)||void 0===s?void 0:null===(t=s.commission_rates)||void 0===t?void 0:t.rate)?`${new(v())(m.commission.commission_rates.rate).multipliedBy(100).toFixed(0)}%`:"N/A"})]}),(0,l.jsx)("div",{className:"w-px h-10 bg-gray-100 dark:bg-gray-850"}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5 w-1/3",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:"APR"}),(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:J&&(J[null==m?void 0:m.address]?`${C()(100*J[null==m?void 0:m.address],{precision:2,symbol:""}).format()}%`:"N/A")})]})]}),(0,l.jsxs)("div",{className:"w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium",children:"Your deposited amount"}),(0,l.jsxs)("div",{className:"flex gap-x-4 mt-4",children:[(0,l.jsx)("img",{className:"w-9 h-9",src:P.icon,onError:(0,ex._)(R)}),(0,l.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,l.jsx)(T.Z,{color:"text-black-100 dark:text-white-100",size:"sm",className:"font-bold",children:Y}),(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:q})]})]})]}),"delegation_pending_epoch_cycle"!==u.status&&"re_delegation_pending_epoch_cycle"!==u.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center w-full p-4 bg-white-100 dark:bg-gray-950 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold",children:"Your Rewards"}),(0,l.jsxs)("div",{className:"flex gap-x-2 justify-center",children:[(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:L(V??new(v())(""))}),(0,l.jsx)("div",{className:"w-px h-4 bg-gray-400 dark:bg-gray-700"}),(0,l.jsx)(T.Z,{color:"text-gray-700 dark:text-gray-400",size:"xs",className:"font-medium",children:I})]})]}),(0,l.jsx)("button",{disabled:!W||W.lt(1e-5),onClick:b,className:`hover:cursor-pointer rounded-[14px] px-3 py-1 ${(!W||W.lt(1e-5))&&"opacity-70 !cursor-not-allowed"}`,style:{backgroundColor:(0,eL.r)((0,K.l)()?U.w.compassPrimary:U.w.green600,.2)},children:(0,l.jsx)(T.Z,{size:"xs",className:"font-bold",style:{color:(0,K.l)()?U.w.compassPrimary:U.w.green500},children:"Claim"})})]}),(0,l.jsxs)("div",{className:"flex gap-x-4 w-full",children:[(0,l.jsx)(E.Buttons.Generic,{onClick:n,color:$===E.ThemeName.DARK?U.w.gray800:U.w.gray200,className:"flex-1 px-2",size:"normal",children:(0,l.jsx)(T.Z,{color:"dark:text-white-100 text-black-100",children:"Switch validator"})}),(0,l.jsx)(E.Buttons.Generic,{onClick:c,color:U.w.red300,className:"flex-1",size:"normal",children:(0,l.jsx)(T.Z,{color:"dark:text-white-100 text-white-100",children:"Unstake"})})]})]})]})})}),eG=(0,A.Pi)(e=>{let{validator:a,delegation:t,onClick:s,status:r}=e,[i]=(0,Z.nB)(),{data:n}=(0,o.pD_)(a),c=(0,d.useMemo)(()=>new(v())(t.balance.currencyAmount??"").gt(0)?X.J.formatHideBalance(i(new(v())(t.balance.currencyAmount??""))):X.J.formatHideBalance(t.balance.formatted_amount??t.balance.amount),[t.balance.amount,t.balance.currencyAmount,t.balance.formatted_amount,i]),m=(0,d.useMemo)(()=>new(v())(t.balance.currencyAmount??"").gt(0)?X.J.formatHideBalance(t.balance.formatted_amount??t.balance.amount):"",[t.balance.amount,t.balance.currencyAmount,t.balance.formatted_amount]);return(0,l.jsx)("div",{onClick:s,className:"flex justify-between items-center px-4 py-3 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl",children:(0,l.jsxs)("div",{className:"flex items-center w-full",children:[(0,l.jsx)("img",{src:n??a.image??z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:28,height:28,className:"mr-4 rounded-full"}),(0,l.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-y-1",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold  overflow-hidden",children:(0,o.MDB)(a.moniker,(0,eg.oj)()?5+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),"delegation_pending_epoch_cycle"===r?(0,l.jsxs)(T.Z,{size:"xs",color:"dark:text-yellow-500 text-yellow-600",className:"font-medium",children:["Queued for staking in ",ez.t.timeLeft]}):"re_delegation_pending_epoch_cycle"===r?(0,l.jsxs)(T.Z,{size:"xs",color:"dark:text-yellow-500 text-yellow-600",className:"font-medium",children:["Queued for restaking in ",ez.t.timeLeft]}):null,a.jailed&&(0,l.jsx)(T.Z,{color:"text-red-600 dark:text-red-300",className:"font-bold text-[10px] px-1.5 py-0.5 rounded-[4px] bg-red-600 dark:bg-red-300 bg-opacity-10 dark:bg-opacity-10",children:"Jailed"})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-y-0.5",children:[(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold text-right",children:c}),(0,l.jsx)(T.Z,{size:"xs",color:"dark:text-gray-400 text-gray-700",className:"font-medium text-right",children:m})]})]})]})})}),e$=(0,A.Pi)(e=>{var a;let{rootDenomsStore:t,delegationsStore:s,validatorsStore:r,unDelegationsStore:i,claimRewardsStore:c,forceChain:m,forceNetwork:u,rootBalanceStore:x}=e,g=(0,V.s0)(),[h,f]=(0,d.useState)(!1),[v,w]=(0,d.useState)(!1),[p,k]=(0,d.useState)(),b=(0,o.a74)(),j=(0,d.useMemo)(()=>m||b,[b,m]),y=(0,o.obn)(),N=(0,d.useMemo)(()=>u||y,[y,u]),S=t.allDenoms,C=s.delegationsForChain(j),D=r.validatorsForChain(j),M=i.unDelegationsForChain(j),Z=c.claimRewardsForChain(j),[z]=(0,o.JsT)(S,j,N),{delegations:A,loadingNetwork:B,loadingDelegations:_}=(0,o.nDu)(S,C,D,M,Z,j,N),F=I.b.getDelegationEpochMessages(z),E=I.b.getReDelegationEpochMessages(z),R=(0,d.useMemo)(()=>{var e;return null===(e=D.validatorData.validators)||void 0===e?void 0:e.reduce((e,a)=>(e[a.address]=a,e),{})},[D.validatorData.validators]),L=B||_,O=(0,n.Z)(),H=O.get("validatorAddress")??void 0,J=O.get("action")??void 0;(0,d.useEffect)(()=>{if(H&&"DELEGATE"!==J){let e=Object.values(A??{}).find(e=>e.delegation.validator_address===H);e&&(k(e),f(!0))}},[A,J,H]);let[G,$]=(0,d.useMemo)(()=>{let e=[...E,...F,...Object.values(A??{}).sort((e,a)=>parseFloat(a.balance.amount)-parseFloat(e.balance.amount))],a=e.filter(e=>{var a;let t=null==R?void 0:R[null==e?void 0:null===(a=e.delegation)||void 0===a?void 0:a.validator_address];return!!t&&!1!==t.active||!1});return[a,e.filter(e=>{var a;let t=null==R?void 0:R[null==e?void 0:null===(a=e.delegation)||void 0===a?void 0:a.validator_address];return!!t&&!1===t.active||!1})]},[A,F,E,R]),W=(0,d.useCallback)(()=>{f(!1),w(!0)},[]);return(0,l.jsxs)(l.Fragment,{children:[L&&(0,l.jsx)(P.KE,{}),(0,l.jsxs)("div",{className:"flex flex-col w-full gap-y-2",children:[!L&&R&&G.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Validator"}),(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Amount Staked"})]}),G.map(e=>{var a;let t=null==R?void 0:R[null==e?void 0:null===(a=e.delegation)||void 0===a?void 0:a.validator_address];return(0,l.jsx)(eG,{delegation:e,validator:t,status:e.status,onClick:()=>{k(e),f(!0)}},t.address)})]}),!L&&R&&$.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Inactive validator"}),(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Amount Staked"})]}),$.map(e=>{var a;let t=R[null==e?void 0:null===(a=e.delegation)||void 0===a?void 0:a.validator_address];return(0,l.jsx)(eG,{delegation:e,validator:t,onClick:()=>{k(e),f(!0)}},t.address)})]})]}),h&&p&&(0,l.jsx)(eJ,{isOpen:h,onClose:()=>f(!1),onSwitchValidator:()=>{let e={mode:"REDELEGATE",fromValidator:R[p.delegation.validator_address],delegation:p,forceChain:j,forceNetwork:N};sessionStorage.setItem("navigate-stake-input-state",JSON.stringify(e)),g("/stake/input",{state:e})},onUnstake:()=>{let e={mode:"UNDELEGATE",toValidator:R[p.delegation.validator_address],delegation:p,forceChain:j,forceNetwork:N};sessionStorage.setItem("navigate-stake-input-state",JSON.stringify(e)),g("/stake/input",{state:e})},validator:R[null==p?void 0:null===(a=p.delegation)||void 0===a?void 0:a.validator_address],delegation:p,rootDenomsStore:t,delegationsStore:s,validatorsStore:r,unDelegationsStore:i,claimRewardsStore:c,forceChain:j,forceNetwork:N,onValidatorClaim:W}),v&&p&&(0,l.jsx)(eH,{isOpen:v,onClose:()=>w(!1),validator:R[p.delegation.validator_address],selectedDelegation:p,rootDenomsStore:t,rootBalanceStore:x,delegationsStore:s,validatorsStore:r,unDelegationsStore:i,claimRewardsStore:c,forceChain:j,forceNetwork:N})]})}),eV=(0,A.Pi)(e=>{var a;let{rootDenomsStore:t,rootBalanceStore:s,delegationsStore:r,validatorsStore:i,unDelegationsStore:n,claimRewardsStore:c,forceChain:m,forceNetwork:u}=e,x=(0,o.a74)(),g=(0,d.useMemo)(()=>m||x,[x,m]),h=(0,o.obn)(),f=(0,d.useMemo)(()=>u||h,[h,u]),v=t.allDenoms,w=r.delegationsForChain(g),p=i.validatorsForChain(g),k=n.unDelegationsForChain(g),b=c.claimRewardsForChain(g),{delegations:j,unboundingDelegationsInfo:y,loadingDelegations:N,loadingUnboundingDelegations:S}=(0,o.nDu)(v,w,p,k,b,g,f),{delegations:C}=(0,o.fHb)(),[D]=(0,o.JsT)(v,g,f),[M,Z]=(0,d.useState)(),{data:z}=(0,o.S2A)(),A=(0,d.useMemo)(()=>{var e;let a=I.b.getDelegationEpochMessages(D),t=I.b.getUnDelegationEpochMessages(D),l=[];return(Object.values(j??{}).length>0||a.length>0)&&l.push("Your validators"),Object.values(C??{}).length>0&&(null==z?void 0:null===(e=z.restaking)||void 0===e?void 0:e.extension)==="active"&&"lava"===g&&l.push("Your providers"),(Object.values(y??{}).length>0||t.length>0)&&l.push("Pending unstake"),l.length>0&&Z(l[0]),l},[g,D,j,null==z?void 0:null===(a=z.restaking)||void 0===a?void 0:a.extension,C,y]);return N||S?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,l.jsx)("div",{className:"flex gap-x-2",children:A.map(e=>(0,l.jsx)("div",{onClick:()=>{M!==e&&Z(e)},children:(0,l.jsx)(T.Z,{className:`rounded-full hover:cursor-pointer px-3 py-2 border bg-white-100 dark:bg-gray-950 font-bold ${M===e?"dark:border-white-100 border-gray-800":"border-white-100 dark:border-gray-950"}`,size:"xs",color:M===e?"text-gray-900 dark:text-white-100":"text-gray-800 dark:text-gray-200",children:e})},e))}),"Your validators"===M&&(0,l.jsx)(e$,{rootDenomsStore:t,rootBalanceStore:s,delegationsStore:r,validatorsStore:i,unDelegationsStore:n,claimRewardsStore:c,forceChain:g,forceNetwork:f}),"Pending unstake"===M&&(0,l.jsx)(eT,{rootDenomsStore:t,delegationsStore:r,validatorsStore:i,unDelegationsStore:n,claimRewardsStore:c,forceChain:g,forceNetwork:f,rootBalanceStore:s}),"Your providers"===M&&(0,l.jsx)(eD,{forceChain:g,forceNetwork:f})]})});var eI=t("38313");let eW=(0,A.Pi)(e=>{let{isOpen:a,onClose:t,onClaimValidatorRewards:s,onClaimProviderRewards:r,rootDenomsStore:i,delegationsStore:n,validatorsStore:c,unDelegationsStore:m,claimRewardsStore:u,forceChain:x,forceNetwork:g}=e,[h]=(0,Z.nB)(),f=i.allDenoms,w=(0,O.a7)(),p=(0,d.useMemo)(()=>x||w,[w,x]),k=(0,eI.ob)(),b=(0,d.useMemo)(()=>g||k,[k,g]),[j]=(0,o.JsT)(f,p,b),y=n.delegationsForChain(p),N=c.validatorsForChain(p),S=m.unDelegationsForChain(p),C=u.claimRewardsForChain(p),{totalRewardsDollarAmt:D=0,rewards:M={total:[]},totalRewards:z}=(0,o.nDu)(f,y,N,S,C,p,b),A=(0,d.useMemo)(()=>!z||new(v())(z).lt(1e-5),[z]),{rewards:B}=(0,o.fHb)(),_=(0,d.useMemo)(()=>!(null==B?void 0:B.totalRewards)||new(v())(null==B?void 0:B.totalRewards).lt(1e-5),[null==B?void 0:B.totalRewards]),F=(0,d.useMemo)(()=>{if(M){var e;return null==M?void 0:null===(e=M.total)||void 0===e?void 0:e.find(e=>e.denom===(null==j?void 0:j.coinMinimalDenom))}},[null==j?void 0:j.coinMinimalDenom,M]),R=(0,d.useMemo)(()=>{if(B){let e=Object.keys(B.rewards.flatMap(e=>e.amount).reduce((e,a)=>(e[a.denom]=e[a.denom]?new(v())(e[a.denom]).plus(new(v())(a.amount)):new(v())(a.amount),e),{})).length;return X.J.formatHideBalance(`${B.formattedTotalRewards} ${e>1?`+${e-1} more`:""}`)}},[B]),P=(0,d.useMemo)(()=>{var e,a;return X.J.formatHideBalance(`${(0,o.LHZ)((null==F?void 0:F.amount)??"",j.coinDenom)} ${(null==M?void 0:null===(e=M.total)||void 0===e?void 0:e.length)>1?`+${(null==M?void 0:null===(a=M.total)||void 0===a?void 0:a.length)-1} more`:""}`)},[null==j?void 0:j.coinDenom,null==F?void 0:F.amount,null==M?void 0:M.total.length]),L=(0,d.useMemo)(()=>new(v())(D).gt(0)?X.J.formatHideBalance(h(new(v())(D))):P,[h,P,D]),H=(0,d.useMemo)(()=>new(v())(D).gt(0)?P:"",[P,D]),J=(0,d.useMemo)(()=>new(v())(null==B?void 0:B.totalRewardsDollarAmt).gt(0)?X.J.formatHideBalance(h(new(v())(null==B?void 0:B.totalRewardsDollarAmt))):R,[h,R,null==B?void 0:B.totalRewardsDollarAmt]),G=(0,d.useMemo)(()=>new(v())(null==B?void 0:B.totalRewardsDollarAmt).gt(0)?R:"",[R,null==B?void 0:B.totalRewardsDollarAmt]);return(0,l.jsx)(Q.Z,{isOpen:a,onClose:t,title:"Claim Rewards",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Validator Rewards"}),(0,l.jsx)(E.GenericCard,{title:(0,l.jsx)(T.Z,{size:"sm",color:"text-gray-800 dark:text-white-100",className:"font-bold mb-0.5",children:L}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:H}),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:(0,l.jsx)("button",{onClick:s,disabled:A,className:`rounded-full text-xs font-bold text-white-100 dark:text-gray-900 dark:bg-white-100 bg-gray-900 px-4 py-2 ${A&&"opacity-70 !cursor-not-allowed"}`,children:"Claim"})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",children:"Provider Rewards"}),(0,l.jsx)(E.GenericCard,{title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:J}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:G}),size:"md",isRounded:!0,className:"bg-white-100 dark:bg-gray-950",title2:(0,l.jsx)("button",{onClick:r,disabled:_,className:`rounded-full text-xs font-bold text-white-100 dark:text-gray-900 dark:bg-white-100 bg-gray-900 px-4 py-2 ${_&&"opacity-70 !cursor-not-allowed"}`,children:"Claim"})})]})]})})}),eU=ei.w.useGetWallet,eY=(0,A.Pi)(e=>{var a;let{isOpen:t,onClose:r,validator:i,rootDenomsStore:n,rootBalanceStore:c,forceChain:m,forceNetwork:u}=e,x=n.allDenoms,g=(0,o.a74)(),h=(0,d.useMemo)(()=>m||g,[g,m]),f=(0,o.obn)(),w=(0,d.useMemo)(()=>u||f,[f,u]),p=eU(),k=(0,ea.e7)(x,{activeChain:h,selectedNetwork:w}),[b]=(0,Z.nB)(),j=(0,er.a)(),[y]=(0,o.JsT)(x,h,w),{rewards:N,providers:S}=(0,o.fHb)(),C=(0,d.useMemo)(()=>{if(N&&S){var e;return null==N?void 0:null===(e=N.rewards)||void 0===e?void 0:e.map(e=>S.find(a=>a.address===e.provider)).filter(e=>void 0!==e)}},[S,N]),{showLedgerPopup:D,onReviewTransaction:M,isLoading:A,error:B,setAmount:_,recommendedGasLimit:F,userPreferredGasLimit:R,setUserPreferredGasLimit:P,gasOption:L,setGasOption:O,userPreferredGasPrice:H,setFeeDenom:J,customFee:G,feeDenom:$,ledgerError:I,setLedgerError:W}=(0,o.$l7)(x,"CLAIM_REWARDS",i,void 0,void 0,void 0,void 0,void 0,C,h,w),[Y,q]=(0,d.useState)(!1),[ee,ei]=(0,d.useState)(null),[ed,em]=(0,d.useState)({option:L,gasPrice:H??k.gasPrice}),ef=(0,V.s0)();(0,es.X)(B),(0,d.useEffect)(()=>{_((null==N?void 0:N.totalRewards)??"0")},[null==N?void 0:N.totalRewards]);let ev=(0,d.useMemo)(()=>{if(N){let e=Object.keys(N.rewards.flatMap(e=>e.amount).reduce((e,a)=>(e[a.denom]=e[a.denom]?new(v())(e[a.denom]).plus(new(v())(a.amount)):new(v())(a.amount),e),{})).length;return X.J.formatHideBalance(`${N.formattedTotalRewards} ${e>1?`+${e-1} more`:""}`)}},[N]),ew=(0,d.useCallback)((e,a)=>{em(e),J(a.denom),e.option&&O(e.option)},[J,O]),ep=(0,d.useCallback)(()=>{q(!1)},[]),ek=(0,d.useCallback)(()=>{ef("/stake/pending-txn",{state:{mode:"CLAIM_REWARDS"}}),eu().track(s.B_.TransactionSigned,{transactionType:"stake_claim"})},[ef]),eb=(0,d.useCallback)(async()=>{try{let e=await p(h);M(e,ek,!1,{stdFee:G,feeDenom:$})}catch(e){W(e.message),setTimeout(()=>{W("")},6e3)}},[h,G,$,p,M,W,ek]);return(0,eh.U)(I||B),(0,l.jsxs)(ea.ZP,{recommendedGasLimit:F,gasLimit:(null==R?void 0:R.toString())??F,setGasLimit:e=>P(Number(e.toString())),gasPriceOption:ed,onGasPriceOptionChange:ew,error:ee,chain:h,network:w,setError:ei,rootDenomsStore:n,rootBalanceStore:c,children:[(0,l.jsx)(Q.Z,{isOpen:t,onClose:r,title:"Review Transaction",closeOnBackdropClick:!0,className:"p-6",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",children:[(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:y.icon,onError:(0,ex._)(j),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:X.J.formatHideBalance(b(new(v())((null==N?void 0:N.totalRewardsDollarAmt)??"0")))}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:ev})}),(0,l.jsx)(E.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,l.jsx)("img",{src:z.r.Misc.Validator,onError:(0,ex._)(z.r.Misc.Validator),width:36,height:36,className:"rounded-full"}),isRounded:!0,size:"md",title:(0,l.jsx)(T.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:C&&(0,o.MDB)(null===(a=C[0])||void 0===a?void 0:a.moniker,(0,eg.oj)()?2+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),subtitle:(0,l.jsx)(T.Z,{size:"xs",color:"text-gray-600 dark:text-gray-400",className:"font-medium",children:C&&(C.length>1?`+${C.length-1} more providers`:"")})})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-2",children:[(0,l.jsx)(et.a,{setShowFeesSettingSheet:q}),I&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:I}),B&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:B}),ee&&!Y&&(0,l.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:ee}),(0,l.jsx)(E.Buttons.Generic,{color:(0,K.l)()?U.w.compassPrimary:U.w.green600,size:"normal",disabled:A||!!B||!!ee||D||!!I,className:"w-full",onClick:eb,children:A?(0,l.jsx)(ec(),{loop:!0,autoplay:!0,animationData:en,rendererSettings:{preserveAspectRatio:"xMidYMid slice"},className:"h-[28px] w-[28px]"}):"Confirm Claim"})]})]})}),D&&(0,l.jsx)(eo.Z,{showLedgerPopup:D}),(0,l.jsx)(el.k,{showFeesSettingSheet:Y,onClose:ep,gasError:ee})]})}),eK=(0,A.Pi)(e=>{var a,t,s;let{forceChain:i,forceNetwork:c,showBackAction:m,onBackClick:u,rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,rootBalanceStore:p,chainTagsStore:k}=e,S=(0,o.a74)(),C=(0,O.N8)(),Z=(0,d.useMemo)(()=>i||S,[S,i]),A=(0,o.obn)(),F=(0,d.useMemo)(()=>c||A,[A,c]),{walletAvatar:Q,walletName:X,activeWallet:ea}=(0,M.vL)(),{headerChainImgSrc:et}=(0,M.Cd)(),el=(0,H._)(W.t),eo=(0,J.G)(Z),es=(0,n.Z)(),er=es.get("validatorAddress")??void 0,ei=es.get("chainId")??void 0,en=es.get("action")??void 0,ed=(0,V.s0)(),ec=x.allDenoms,em=g.delegationsForChain(Z),eu=h.validatorsForChain(Z),ex=f.unDelegationsForChain(Z),eg=w.claimRewardsForChain(Z),{rewards:eh,delegations:ef,loadingDelegations:ew,loadingNetwork:eb,loadingRewards:ej,loadingUnboundingDelegations:eS}=(0,o.nDu)(ec,em,eu,ex,eg,Z,F,p.allSpendableTokens),eC=(0,d.useMemo)(()=>ew||eb||ej||eS,[ew,eb,ej,eS]),[eD]=(0,o.JsT)(ec,Z,F),{theme:eM}=(0,E.useTheme)(),[eZ,ez]=(0,d.useState)(!1),[eA,eB]=(0,d.useState)("All"),[e_,eF]=(0,d.useState)(!1),[eE,eR]=(0,d.useState)(!1),[eP,eT]=(0,d.useState)(!1),[eL,eO]=(0,d.useState)(!1),[eH,eJ]=(0,d.useState)(!1),[eG,e$]=(0,d.useState)(!1),[eI,eU]=(0,d.useState)(!1),[eK,eQ]=(0,d.useState)(!1),[eX,eq]=(0,d.useState)(!1),{isLoading:e0,data:e1={}}=(0,o.ViV)(),{data:e4}=(0,o.S2A)();(0,d.useEffect)(()=>{!eZ&&eB("All")},[eZ]);let e2=(0,d.useCallback)((e,a)=>{ez(!0),(null==a?void 0:a.defaultFilter)&&eB(a.defaultFilter)},[]),e5=(0,d.useCallback)(()=>eF(!0),[]),e3=(0,d.useCallback)(()=>{eq(!0),setTimeout(()=>eq(!1),2e3),Y.i.copyText(null==eo?void 0:eo[0])},[eo]),e6=(0,d.useMemo)(()=>{var e;return null===(e=e1[null==eD?void 0:eD.coinDenom])||void 0===e?void 0:e.sort((e,a)=>{let t=e.priority,l=a.priority;if(void 0!==t&&void 0!==l)return t-l;if(void 0!==t)return -1;if(void 0!==l)return 1;else return 0})},[null==eD?void 0:eD.coinDenom,e1]),e7=(0,d.useMemo)(()=>{var e;let a={};null==eh||null===(e=eh.rewards)||void 0===e||e.forEach(e=>{let t=e.validator_address;!a[t]&&(a[t]={validator_address:t,reward:[]});let l={};e.reward.forEach(e=>{let{denom:a,amount:t,tokenInfo:o}=e,s=parseFloat(t);l[a]?l[a]+=s*Math.pow(10,(null==o?void 0:o.coinDecimals)??6):l[a]=s*Math.pow(10,(null==o?void 0:o.coinDecimals)??6)}),a[t].reward.push(...Object.keys(l).map(e=>({denom:e,amount:l[e]})))});let t=null==eh?void 0:eh.total.find(e=>e.denom===(null==eD?void 0:eD.coinMinimalDenom));return{rewardsUsdValue:new(v())((null==t?void 0:t.currencyAmount)??"0"),rewardsStatus:"",usdValueStatus:"",denom:null==t?void 0:t.denom,rewardsDenomValue:new(v())((null==t?void 0:t.amount)??"0"),rewards:{rewardMap:a}}},[eD,eh]);(0,d.useEffect)(()=>{(async function e(){ei&&S!==r.HW&&C((await (0,D._d)())[ei])})()},[ei]);let e8=(0,d.useMemo)(()=>{var e;return null===(e=eu.validatorData.validators)||void 0===e?void 0:e.reduce((e,a)=>(e[a.address]=a,e),{})},[eu.validatorData.validators]),e9=(0,d.useCallback)(async()=>{let e=Z;ei&&S!==r.HW&&(e=(await (0,D._d)())[ei]),ed("/stake/input",{state:{mode:"DELEGATE",toValidator:er?e8[er]:void 0,forceChain:e,forceNetwork:F},replace:!0})},[S,Z,F,ed,ei,er,e8]);(0,d.useEffect)(()=>{switch(en){case"CLAIM_REWARDS":eT(!0);break;case"OPEN_LIQUID_STAKING":eQ(!0);break;case"DELEGATE":e9()}},[en,e9]);let ae=(0,d.useCallback)(()=>{var e;"lava"===Z&&(null==e4?void 0:null===(e=e4.restaking)||void 0===e?void 0:e.extension)?eU(!0):eT(!0)},[Z,null==e4?void 0:null===(a=e4.restaking)||void 0===a?void 0:a.extension]),aa=(0,d.useCallback)(()=>e$(!0),[]);return((0,L.$)({enabled:!!ea,page:"stake",op:"stakePageLoad",description:"loading state on stake page",queryStatus:eC?"loading":"success"}),ea)?(0,l.jsxs)("div",{className:"relative w-full overflow-clip panel-height",children:[(0,l.jsx)(_.ZP,{isShown:eE,toggler:()=>eR(!eE)}),(0,l.jsx)(N.Z,{header:(0,l.jsx)(y.m,{action:m&&u?{onClick:u,type:E.HeaderActionType.BACK}:{onClick:()=>eR(!0),type:E.HeaderActionType.NAVIGATION,className:"min-w-[48px] h-[36px] px-2 bg-[#FFFFFF] dark:bg-gray-950 rounded-full"},imgSrc:et,onImgClick:el?void 0:e2,title:(0,l.jsx)(R.T,{walletName:X,showWalletAvatar:!0,walletAvatar:Q,showDropdown:!0,handleDropdownClick:e5,giveCopyOption:!0,handleCopyClick:e3,isAddressCopied:eX})}),children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-6 p-6 mb-10 overflow-scroll",children:[(0,l.jsx)(eN,{rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,forceChain:Z,forceNetwork:F}),eC&&(0,l.jsx)(P.rb,{}),!eC&&(Object.values(ef??{}).length>0||I.b.getDelegationEpochMessages(eD).length>0?(0,l.jsx)(ey,{onClaim:ae,onClaimAndStake:aa,rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,forceChain:Z,forceNetwork:F}):(0,l.jsx)(ee,{rootDenomsStore:x,activeChain:Z,activeNetwork:F})),(0,l.jsxs)("div",{className:"flex gap-x-4 w-full",children:[e0&&(0,l.jsx)($.Z,{width:352,borderRadius:100,height:50}),!e0&&(0,l.jsxs)(l.Fragment,{children:[(null==e6?void 0:e6.length)>0&&(0,l.jsx)(E.Buttons.Generic,{size:"normal",className:"w-full",color:eM===E.ThemeName.DARK?U.w.gray800:U.w.gray200,disabled:e0,onClick:()=>eQ(!0),children:(0,l.jsx)(T.Z,{color:"dark:text-white-100 text-black-100",children:"Liquid Stake"})}),(0,l.jsx)(E.Buttons.Generic,{size:"normal",className:"w-full",color:(0,K.l)()?U.w.compassPrimary:U.w.green600,onClick:async()=>{ed("/stake/input",{state:{mode:"DELEGATE",forceChain:Z,forceNetwork:F}})},children:"Stake"})]})]}),(0,l.jsx)(eV,{rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,forceChain:Z,forceNetwork:F,rootBalanceStore:p})]})}),(0,l.jsx)(B.Z,{isVisible:eZ,onClose:()=>ez(!1),chainTagsStore:k,defaultFilter:eA}),(0,l.jsx)(G.Z,{isVisible:e_,onClose:()=>eF(!1),title:"Wallets"}),!eb&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ep,{isOpen:eP,onClose:()=>eT(!1),validators:e8,rootDenomsStore:x,rootBalanceStore:p,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,forceChain:Z,forceNetwork:F}),"lava"===Z&&(null==e4?void 0:null===(t=e4.restaking)||void 0===t?void 0:t.extension)==="active"&&(0,l.jsx)(eY,{isOpen:eL,onClose:()=>eO(!1),rootDenomsStore:x,rootBalanceStore:p,forceChain:Z,forceNetwork:F}),(0,l.jsx)(q,{isOpen:eG,onClose:()=>e$(!1),onClaim:()=>{e$(!1),eT(!0)},onClaimAndStake:()=>{e$(!1),eJ(!0)},rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,forceChain:Z,forceNetwork:F}),"lava"===Z&&(null==e4?void 0:null===(s=e4.restaking)||void 0===s?void 0:s.extension)==="active"&&(0,l.jsx)(eW,{isOpen:eI,onClose:()=>eU(!1),onClaimValidatorRewards:()=>{eU(!1),eT(!0)},onClaimProviderRewards:()=>{eU(!1),eO(!0)},rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,rootBalanceStore:p,forceChain:i,forceNetwork:c}),e7&&(0,l.jsx)(ev,{isOpen:eH,onClose:()=>eJ(!1),validators:e8,chainRewards:e7,rootDenomsStore:x,delegationsStore:g,validatorsStore:h,unDelegationsStore:f,claimRewardsStore:w,rootBalanceStore:p,forceChain:Z,forceNetwork:F})]}),e6&&(0,l.jsx)(ek.Z,{isVisible:eK,onClose:()=>eQ(!1),providers:e6,rootDenomsStore:x,forceChain:Z,forceNetwork:F}),(0,l.jsx)(b.Z,{label:b.W.Stake})]}):(0,l.jsx)("div",{className:"relative w-full overflow-clip panel-height",children:(0,l.jsx)(N.Z,{children:(0,l.jsx)("div",{children:(0,l.jsx)(j.S,{src:z.r.Logos.LeapCosmos,heading:"No wallet found"})})})})});function eQ(e){let{label:a,value:t,className:o}=e;return(0,l.jsxs)("div",{className:p()("flex flex-col gap-1 items-center flex-1",o),children:[(0,l.jsx)("h3",{className:"text-gray-600 dark:text-gray-400 text-[12px]",children:a}),(0,l.jsx)("p",{className:"text-black-100 dark:text-white-100 font-[700]",children:t})]})}function eX(e){let{tokenName:a,chainName:t,chainLogo:o,apr:s,amount:r,dollarAmount:i,onClick:n}=e;return(0,l.jsxs)("div",{className:"bg-white-100 dark:bg-gray-950 rounded-xl flex items-center justify-between p-[12px] cursor-pointer",onClick:n,children:[(0,l.jsxs)("div",{className:"flex items-center justify-start gap-2 w-[150px]",children:[(0,l.jsx)("img",{className:"w-[36px] h-[36px]",src:o,alt:t+" logo"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-black-100 dark:text-white-100 font-[700]",children:a}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-[12px] font-[500]",children:t})]})]}),(0,l.jsx)("p",{className:"text-black-100 dark:text-white-100 text-[14px]",children:s}),(0,l.jsxs)("div",{className:"flex flex-col items-end w-[90px]",children:["-"!==i?(0,l.jsx)("p",{className:"text-black-100 dark:text-white-100 font-[700] text-[14px] text-right",children:i}):null,(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-[12px] font-[500] text-right",children:r})]})]})}let eq=(0,A.Pi)(e=>{let{chainTagsStore:a,aggregateStakeStore:t,rootDenomsStore:s,delegationsStore:r,validatorsStore:i,unDelegationsStore:c,claimRewardsStore:m,rootBalanceStore:u}=e,[x,f]=(0,d.useState)(!1),[w,S]=(0,d.useState)(!1),[A,E]=(0,d.useState)("All"),{perChainDelegations:R,totalCurrencyAmountDelegation:P,averageApr:T,totalClaimRewardsAmount:L,isEveryChainLoading:O,isSomeChainLoading:H}=t.aggregatedStake,[J,G]=(0,d.useState)(""),[$,V]=(0,d.useState)(!1),[I]=(0,Z.nB)(),W=(0,o.DI5)(),[U,Y]=(0,d.useState)(!0),[K,Q]=(0,d.useState)(!0),[X,q]=(0,d.useState)("amount"),[ee,ea]=(0,d.useState)(null),{headerChainImgSrc:et}=(0,M.Cd)(),el=(0,n.Z)(),eo=el.get("chainId")??void 0;(0,d.useEffect)(()=>{(async function e(){eo&&(ea((await (0,D._d)())[eo]),el.delete("chainId"))})()},[eo]),(0,d.useEffect)(()=>{!w&&E("All")},[w]);let es=(0,d.useMemo)(()=>T?`${C()((100*T).toString(),{precision:2,symbol:""}).format()} %`:"-",[T]),er=(0,d.useMemo)(()=>{let e=J.trim().toLowerCase(),a=Object.keys(R).reduce((a,t)=>t.toLowerCase().includes(e)||R[t].stakingDenom.toLowerCase().includes(e)?[...a,{...R[t],chain:t}]:a,[]);switch(X){case"apr":return a.sort((e,a)=>U?a.apr-e.apr:e.apr-a.apr);case"amount":return a.sort((e,a)=>{let t=e.currencyAmountDelegation&&!isNaN(Number(e.currencyAmountDelegation));if(!(a.currencyAmountDelegation&&!isNaN(Number(a.currencyAmountDelegation)))){if(t)return K?-1:1;let l=e.totalDelegation,o=a.totalDelegation;if(!o||o.isNaN()||o.isZero())return!l||l.isNaN()||l.isZero()?K?1:-1:K?-1:1;return!l||l.isNaN()||l.isZero()?K?1:-1:K?o.minus(l).toNumber():e.totalDelegation.minus(a.totalDelegation).toNumber()}return t?K?Number(a.currencyAmountDelegation)-Number(e.currencyAmountDelegation):Number(e.currencyAmountDelegation)-Number(a.currencyAmountDelegation):K?1:-1})}},[R,J,K,U,X]),ei=(0,d.useCallback)((e,a)=>{S(!0),(null==a?void 0:a.defaultFilter)&&E(a.defaultFilter)},[]),en=(0,d.useCallback)(()=>f(!0),[]),ed=(0,d.useCallback)(e=>ea(e),[]),ec=(0,d.useCallback)(()=>ea(null),[]);return ee?(0,l.jsx)(eK,{forceChain:ee,forceNetwork:"mainnet",showBackAction:!0,onBackClick:ec,rootDenomsStore:s,delegationsStore:r,validatorsStore:i,unDelegationsStore:c,claimRewardsStore:m,rootBalanceStore:u,chainTagsStore:a}):(0,l.jsxs)("div",{className:"relative w-full overflow-clip panel-height",children:[(0,l.jsx)(_.ZP,{isShown:x,toggler:()=>f(!x)}),(0,l.jsx)(N.Z,{header:(0,l.jsx)(y.m,{title:"Staking",imgSrc:et,onImgClick:ei,action:{onClick:en,type:F.Y.NAVIGATION,className:"min-w-[48px] h-[36px] px-2 bg-[#FFFFFF] dark:bg-gray-950 rounded-full"}}),children:(0,l.jsxs)("div",{className:"flex flex-col pt-[16px] px-[24px] max-h-[calc(100%-156px)]",children:[$?(0,l.jsx)(k.SS,{handleClose:()=>{V(!1),G("")},handleChange:e=>G(e),value:J,placeholder:"Search staked tokens"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h1",{className:"flex items-center justify-between text-black-100 dark:text-white-100",children:[(0,l.jsx)("span",{className:"text-[24px] font-[700]",children:"Stake"}),(0,l.jsx)("button",{className:"bg-white-100 dark:bg-gray-950 w-[40px] h-[40px] rounded-full flex items-center justify-center",onClick:()=>V(!0),children:(0,l.jsx)("img",{src:z.r.Misc.SearchWhiteIcon,className:"w-[24px] h-[24px] invert dark:invert-0"})})]}),(0,l.jsxs)("div",{className:"bg-white-100 dark:bg-gray-950 border-[1px] border-solid border-gray-200 dark:border-gray-850 rounded-xl flex p-3 mb-4 mt-5",children:[(0,l.jsx)(eQ,{label:"Staked",value:I(P),className:"border-r-[1px] border-solid border-gray-200 dark:border-gray-850"}),(0,l.jsx)(eQ,{label:"Claimable",value:I(L),className:"border-r-[1px] border-solid border-gray-200 dark:border-gray-850"}),(0,l.jsx)(eQ,{label:"Avg APR",value:es})]})]}),(0,l.jsxs)("p",{className:"text-gray-800 dark:text-gray-200 text-[12px] text-[500] flex items-center justify-between mb-2 px-[12px]",children:[(0,l.jsx)("span",{className:"block w-[150px]",children:"Tokens"}),(0,l.jsxs)("button",{className:"flex items-center justify-between gap-1",onClick:()=>{Y(!U),q("apr")},children:["APR","apr"===X&&(0,l.jsx)(l.Fragment,{children:U?(0,l.jsx)(g.p,{size:16,className:"text-black-100 dark:text-white-100"}):(0,l.jsx)(h.U,{size:16,className:"text-black-100 dark:text-white-100"})})]}),(0,l.jsxs)("button",{className:"w-[90px] text-right flex items-center justify-end gap-1",onClick:()=>{Q(!K),q("amount")},children:["Amount","amount"===X&&(0,l.jsx)(l.Fragment,{children:K?(0,l.jsx)(g.p,{size:16,className:"text-black-100 dark:text-white-100"}):(0,l.jsx)(h.U,{size:16,className:"text-black-100 dark:text-white-100"})})]})]}),(0,l.jsx)("div",{className:p()("overflow-y-auto",{"max-h-[calc(100%-240px)]":$,"max-h-[calc(100%-332px)]":!$}),children:(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[O?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.p4,{}),(0,l.jsx)(k.p4,{})]}):null,O?null:er.length>0?(0,l.jsx)(l.Fragment,{children:er.map(e=>{let{totalDelegationAmount:a,currencyAmountDelegation:t,stakingDenom:o,apr:s,chain:r}=e,i=s?`${C()((100*s).toString(),{precision:2,symbol:""}).format()} %`:"-";return(0,l.jsx)(eX,{tokenName:o,chainName:W[r].chainName,chainLogo:W[r].chainSymbolImageUrl??"",apr:i,dollarAmount:I(new(v())(t)),amount:a,onClick:()=>ed(r)},r)})}):(0,l.jsx)(j.S,{isRounded:!0,subHeading:"Please try again with something else",heading:"No results for "+(0,o.jrB)(J)+"",src:z.r.Misc.Explore,classname:"dark:!bg-gray-950",imgContainerClassname:"dark:!bg-gray-900"}),H&&!$?(0,l.jsx)("div",{className:"rounded-xl dark:bg-gray-950 bg-white-100",children:(0,l.jsx)(k.p4,{})}):null]})})]})}),(0,l.jsx)(B.Z,{chainTagsStore:a,isVisible:w,onClose:()=>S(!1),defaultFilter:A}),(0,l.jsx)(b.Z,{label:b.W.Stake})]})});var e0=t("36400");function e1(e){let{title:a,message:t,backgroundColor:o,backgroundColorDark:s,color:r,onAction:i}=e,{theme:n}=(0,E.useTheme)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:`flex flex-col gap-y-2 w-full p-4 rounded-2xl ${o}`,children:[(0,l.jsxs)("div",{className:"flex gap-x-2",children:[(0,l.jsx)(e_.k,{size:16,className:`${r}`}),(0,l.jsx)(T.Z,{size:"sm",className:"font-bold",color:"dark:text-white-100",children:a})]}),(0,l.jsx)(T.Z,{size:"sm",color:"dark:text-gray-200",children:t}),(0,l.jsx)("div",{className:`rounded-2xl ${s}`,children:(0,l.jsx)("img",{className:"w-[200px] h-[106px] object-cover my-5 mx-auto",src:z.r.Logos.LeapLogo})})]}),(0,l.jsx)(E.Buttons.Generic,{onClick:i,color:n===E.ThemeName.DARK?U.w.white100:U.w.black100,className:"w-full",size:"normal",children:(0,l.jsx)(T.Z,{color:"text-white-100 dark:text-black-100",children:"Stake on a different chain"})})]})}function e4(e){let{onAction:a}=e,t=(0,o.a74)(),s=(0,e0.pb)()[t];return(0,l.jsx)(e1,{title:"Coming soon!",onAction:a,message:`Staking for ${s.chainName} is coming soon. Devs are hard at work. Stay tuned.`,backgroundColor:"bg-blue-100 dark:bg-blue-900",backgroundColorDark:"bg-blue-200 dark:bg-blue-800",color:"text-blue-600 dark:text-blue-400"})}function e2(e){let{onAction:a}=e,t=(0,o.a74)(),s=(0,e0.pb)()[t];return(0,l.jsx)(e1,{title:"Uh oh! Staking Unavailable...",onAction:a,message:`Staking is not yet available for ${s.chainName}. You can stake on other
          chains.`,backgroundColor:"bg-orange-100 dark:bg-orange-900",backgroundColorDark:"bg-orange-200 dark:bg-orange-800",color:"text-orange-500 dark:text-orange-300"})}let e5=(0,A.Pi)(e=>{let{isStakeNotSupported:a,isStakeComingSoon:t,rootDenomsStore:o,delegationsStore:s,validatorsStore:r,unDelegationsStore:i,claimRewardsStore:n,chainTagsStore:c}=e,{headerChainImgSrc:m}=(0,M.Cd)(),u=(0,H._)(W.t),x=(0,J.G)(),{walletAvatar:g,walletName:h,activeWallet:f}=(0,M.vL)(),[v,w]=(0,d.useState)(!1),[p,k]=(0,d.useState)("All"),[S,C]=(0,d.useState)(!1),[D,Z]=(0,d.useState)(!1),[A,F]=(0,d.useState)(!1);(0,d.useEffect)(()=>{!v&&k("All")},[v]);let P=(0,d.useCallback)((e,a)=>{w(!0),(null==a?void 0:a.defaultFilter)&&k(a.defaultFilter)},[]),T=(0,d.useCallback)(()=>C(!0),[]),L=(0,d.useCallback)(()=>{F(!0),setTimeout(()=>F(!1),2e3),Y.i.copyText(null==x?void 0:x[0])},[x]);return f?(0,l.jsxs)("div",{className:"relative w-full overflow-clip panel-height",children:[(0,l.jsx)(_.ZP,{isShown:D,toggler:()=>Z(!D)}),(0,l.jsx)(N.Z,{header:(0,l.jsx)(y.m,{action:{onClick:()=>Z(!0),type:E.HeaderActionType.NAVIGATION,className:"min-w-[48px] h-[36px] px-2 bg-[#FFFFFF] dark:bg-gray-950 rounded-full"},imgSrc:m,onImgClick:u?void 0:P,title:(0,l.jsx)(R.T,{walletName:h,showWalletAvatar:!0,walletAvatar:g,showDropdown:!0,handleDropdownClick:T,giveCopyOption:!0,handleCopyClick:L,isAddressCopied:A})}),children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-6 p-6 mb-10 overflow-scroll",children:[(0,l.jsx)(eN,{rootDenomsStore:o,delegationsStore:s,validatorsStore:r,unDelegationsStore:i,claimRewardsStore:n}),a?(0,l.jsx)(e2,{onAction:()=>w(!0)}):t?(0,l.jsx)(e4,{onAction:()=>w(!0)}):void 0]})}),(0,l.jsx)(B.Z,{isVisible:v,onClose:()=>w(!1),chainTagsStore:c,defaultFilter:p}),(0,l.jsx)(G.Z,{isVisible:S,onClose:()=>C(!1),title:"Wallets"}),(0,l.jsx)(b.Z,{label:b.W.Stake})]}):(0,l.jsx)("div",{className:"relative w-full overflow-clip panel-height",children:(0,l.jsx)(N.Z,{children:(0,l.jsx)("div",{children:(0,l.jsx)(j.S,{src:z.r.Logos.LeapCosmos,heading:"No wallet found"})})})})});function e3(){let e=(0,n.Z)().get("pageSource")??void 0,a=(0,d.useMemo)(()=>({pageViewSource:e}),[e]);(0,i.a)(s.q.Stake,!0,a);let t=(0,o.a74)(),g=(0,o.Xmk)({checkForExistenceType:"comingSoon",feature:"stake",platform:"Extension"}),h=(0,o.Xmk)({checkForExistenceType:"notSupported",feature:"stake",platform:"Extension"});return t===r.HW?(0,l.jsx)(eq,{aggregateStakeStore:x.jo,rootDenomsStore:m.gb,delegationsStore:x.xO,validatorsStore:x.fe,unDelegationsStore:x.GO,claimRewardsStore:x.eq,rootBalanceStore:u.jZ,chainTagsStore:c.HN}):h||g?(0,l.jsx)(e5,{chainTagsStore:c.HN,isStakeComingSoon:g,isStakeNotSupported:h,rootDenomsStore:m.gb,delegationsStore:x.xO,validatorsStore:x.fe,unDelegationsStore:x.GO,claimRewardsStore:x.eq}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(eK,{rootDenomsStore:m.gb,delegationsStore:x.xO,validatorsStore:x.fe,unDelegationsStore:x.GO,claimRewardsStore:x.eq,rootBalanceStore:u.jZ,chainTagsStore:c.HN})})}},32692:function(e,a,t){t.d(a,{t:function(){return i}});var l=t(24877),o=t(36321),s=t(48346),r=t(30809);let i=new l.H9(s.lc,o.Ui,r.i)},31655:function(e,a,t){t.d(a,{z:function(){return s}});var l=t(27484),o=t.n(l);let s=(e,a,t)=>{let l=o()(e).diff(t??new Date),s=Math.floor(l/864e5),r=Math.floor(l/36e5),i=Math.floor((l-36e5*r)/6e4),n=Math.floor((l-36e5*r-6e4*i)/1e3),d="";for(let e of[[s,"day"],[r,"hour"],[i,"minute"],[n,"second"]])if(0!==e[0]){d=`${e[0]} ${1===e[0]?e[1]:e[1]+"s"} ${a??"left"}`;break}return d}}}]);