!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="84a27a49-bcb3-4a57-bf4b-9e822de9e060",e._sentryDebugIdIdentifier="sentry-dbid-84a27a49-bcb3-4a57-bf4b-9e822de9e060")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["3013"],{84166:function(e,t,a){var s,n,i,l,r,o;a.d(t,{z3:()=>n,JY:()=>d}),(l=s||(s={})).DISCONNECT="disconnect",l.GET_KEYS="get-keys",l.GET_NETWORK="get-network",l.SIGN_TRANSACTION="sign-transaction",l.SWITCH_NETWORK="switch-chain",l.SIGN_MESSAGE="sign-message",(r=n||(n={})).CONNECT_WALLET="connect-wallet",r.GET_ADDRESS="get-address",r.GET_ACCOUNTS="get-accounts",r.GET_NETWORK="get-network",r.GET_PUBLIC_KEY="get-public-key",r.REQUEST_ACCOUNTS="request-accounts",r.SEND_BITCOIN="send-bitcoin",r.SIGN_MESSAGE="sign-message",r.SIGN_PSBT="sign-psbt",r.SIGN_PSBTS="sign-psbts",r.SWITCH_NETWORK="switch-network";let d=Object.assign(Object.assign({},{ETH__ACCOUNTS:"eth_accounts",ETH__CHAIN_ID:"eth_chainId",ETH__CALL:"eth_call",ETH__GET_BALANCE:"eth_getBalance",ETH__BLOCK_NUMBER:"eth_blockNumber",ETH__ESTIMATE_GAS:"eth_estimateGas",ETH__GAS_PRICE:"eth_gasPrice",ETH__GET_BLOCK_BY_NUMBER:"eth_getBlockByNumber",WALLET__REVOKE_PERMISSIONS:"wallet_revokePermissions",ETH__GET_TRANSACTION_RECEIPT:"eth_getTransactionReceipt",ETH__GET_TRANSACTION_BY_HASH:"eth_getTransactionByHash",ETH__GET_TRANSACTION_COUNT:"eth_getTransactionCount"}),{ETH__REQUEST_ACCOUNTS:"eth_requestAccounts",ETH__SEND_TRANSACTION:"eth_sendTransaction",ETH__SIGN:"eth_sign",ETH__SIGN_TYPED_DATA_V4:"eth_signTypedData_v4",PERSONAL_SIGN:"personal_sign",WALLET__REQUEST_PERMISSIONS:"wallet_requestPermissions",WALLET__WATCH_ASSET:"wallet_watchAsset",WALLET__SWITCH_ETHEREUM_CHAIN:"wallet_switchEthereumChain",WALLET__ADD_ETHEREUM_CHAIN:"wallet_addEthereumChain"}),c=4001,u=-32602;(o=i||(i={})).MAINNET="mainnet",o.TESTNET="testnet",o.SIGNET="signet",a("28649")},57767:function(e,t,a){a.d(t,{Z:function(){return r}});var s=a(52322),n=a(14281);a(2784);var i=a(86376),l=a(69816);function r(e){let{showLedgerPopup:t,onClose:a}=e;return(0,s.jsx)(n.Z,{isOpen:t,onClose:a,title:"Confirm on Ledger",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"my-10",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)(l.Z,{size:"md",className:"font-bold mb-7",children:"Approve transaction on your hardware wallet"})]})})}},99188:function(e,t,a){a.d(t,{m:function(){return r}});var s=a(52322),n=a(94184),i=a.n(n),l=a(2784);let r=e=>{let{tabsList:t,tabsContent:a,className:n}=e,[r,o]=l.useState(t[0].id);return(0,s.jsxs)("div",{className:i()("w-full",n),children:[(0,s.jsx)("div",{className:"w-full flex items-center justify-start border-b border-gray-900",children:t.map(e=>{let{id:t,label:a}=e;return(0,s.jsx)("button",{className:`px-4 py-2 cursor-pointer transition-colors border-b-2 ${r===t?"dark:border-white-100 border-gray-900 font-bold text-gray-900 dark:text-white-100":"border-transparent text-gray-700 dark:text-gray-400"}`,onClick:()=>o(t),children:a},t)})}),(0,s.jsx)("div",{className:"w-full",children:a[r]})]})}},74703:function(e,t,a){a.d(t,{u:function(){return n}});var s,n=((s={}).signResponse="sign-response",s.signingPopupOpen="signing-popup-open",s.signTransaction="sign-transaction",s.signBitcoinResponse="sign-bitcoin-response",s.signSeiEvmResponse="sign-sei-evm-response",s)},20214:function(e,t,a){a.r(t),a.d(t,{default:()=>et});var s=a("52322"),n=a("21950"),i=a("84166"),l=a("2826"),r=a("74703"),o=a("53108"),d=a("79533"),c=a("2784"),u=a("10289"),g=a("26245"),m=a("42799"),x=a("48346"),h=a("50292"),v=a("72565"),p=a.n(v),f=a("98851");function w(e){let{activeIndex:t,setActiveIndex:a,limit:n}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[t>0?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:()=>a(0),children:(0,s.jsx)("img",{src:f.r.Misc.ArrowDoubleLeft,alt:"arrow-double-left"})}),(0,s.jsx)("button",{onClick:()=>{t>0&&a(t-1)},children:(0,s.jsx)("img",{src:f.r.Misc.ArrowSingleLeft,alt:"arrow-single-left"})})]}):null,(0,s.jsxs)("div",{className:"flex-1 text-center",children:[(0,s.jsx)("p",{className:"dark:text-white-100 text-gray-900 text-[12px]",children:(0,s.jsxs)("strong",{children:[t+1," of ",n]})}),(0,s.jsx)("p",{className:"dark:text-white-100 text-gray-900 text-[10px]",children:"requests waiting to be acknowledged"})]}),t<n-1?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:()=>{t<n-1&&a(t+1)},children:(0,s.jsx)("img",{src:f.r.Misc.ArrowSingleRight,alt:"arrow-single-right"})}),(0,s.jsx)("button",{onClick:()=>a(n-1),children:(0,s.jsx)("img",{src:f.r.Misc.ArrowDoubleRight,alt:"arrow-double-right"})})]}):null]})}var T=a("39279"),_=a("3929"),y=a("19623");function N(){return(0,s.jsx)(_.Z,{className:"self-center justify-self-center",header:(0,s.jsx)(T.Header,{title:"Sign Transaction"}),children:(0,s.jsx)("div",{className:"h-full w-full flex flex-col gap-4 items-center justify-center",children:(0,s.jsx)(y.T,{color:"white"})})})}var b=a("69282"),E=a.n(b),j=a("94184"),S=a.n(j),C=a("86200"),D=a("57767"),k=a("23259"),I=a("29312"),A=a("78935"),G=a("81252"),L=a("46103"),O=a("32374"),R=a("49409"),B=a("48534"),M=a("71198");async function H(e,t,a){await p().runtime.sendMessage({type:r.u.signSeiEvmResponse,payloadId:t,payload:{status:"error",data:"User rejected the transaction"}}),!a&&((0,B.oj)()?e("/home"):window.close())}let P=G.w.useGetWallet;function W(e){var t,a,o;let{txnData:d,donotClose:g,handleTxnListUpdate:m}=e,x=(0,n.h8K)(),v=(0,n.a74)(),w=(0,h.l)()?v:x,N=(0,n.rTu)(),b=(0,u.s0)();E()(null!==N,"activeWallet is null");let j=(0,c.useMemo)(()=>(0,O.k)(N.name),[N.name]),G=null==d?void 0:d.origin,W=null==G?void 0:null===(o=G.split("//"))||void 0===o?void 0:null===(a=o.at(-1))||void 0===a?void 0:null===(t=a.split("."))||void 0===t?void 0:t.at(-2),U=(0,A.G)(G),Z=P(),[K,Y]=(0,c.useState)("idle"),[F,z]=(0,c.useState)(null),[q,J]=(0,c.useState)(!1),{chains:$}=(0,n._IL)(),Q=$[w],V=(0,I.a1)(),X=async()=>{try{let e;if(N.walletType===n._KQ.LEDGER){if((null==Q?void 0:Q.evmOnlyChain)===!0)J(!0);else throw Error(k.tR)}z(null),Y("loading");let t=await Z(w,!0);e=d.signTxnData.methodType===i.JY.ETH__SIGN_TYPED_DATA_V4?await (0,l.xqy)(d.signTxnData.data,N.addresses[w],t):await (0,l.W0A)(d.signTxnData.data,N.addresses[w],t);try{p().runtime.sendMessage({type:r.u.signSeiEvmResponse,payloadId:null==d?void 0:d.payloadId,payload:{status:"success",data:e}})}catch{throw Error("Could not send transaction to the dApp")}g?m():(0,B.oj)()?b("/home"):window.close()}catch(e){Y("error"),z(e.message)}},ee=!!F||"loading"===K;return(0,s.jsx)("div",{className:S()("panel-width enclosing-panel h-full relative self-center justify-self-center flex justify-center items-center",{"mt-2":!(0,B.oj)()}),children:(0,s.jsx)("div",{className:S()("relative w-full overflow-clip rounded-md border border-gray-300 dark:border-gray-900",{"panel-height":(0,B.oj)()}),children:(0,s.jsxs)(_.Z,{header:(0,s.jsx)("div",{className:"w-[396px]",children:(0,s.jsx)(T.Header,{imgSrc:Q.chainSymbolImageUrl||V,title:(0,s.jsx)(T.Buttons.Wallet,{brandLogo:(0,h.l)()?(0,s.jsx)("img",{className:"w-[24px] h-[24px] mr-1",src:f.r.Logos.CompassCircle}):void 0,title:(0,M.fy)(j,10),className:"pr-4 cursor-default"})})}),children:[(0,s.jsxs)("div",{className:"px-7 py-3 overflow-y-auto relative h-[450px]",children:[(0,s.jsx)("h2",{className:"text-center text-lg font-bold dark:text-white-100 text-gray-900 w-full",children:"Signature request"}),(0,s.jsx)("p",{className:"text-center text-sm dark:text-gray-300 text-gray-500 w-full",children:"Only sign this message if you fully understand the content and trust the requesting site"}),(0,s.jsxs)("div",{className:"flex items-center mt-3 rounded-2xl dark:bg-gray-900 bg-white-100 p-4",children:[(0,s.jsx)(T.Avatar,{avatarImage:U,avatarOnError:(0,R._)(f.r.Misc.Globe),size:"sm",className:"rounded-full overflow-hidden"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"capitalize text-gray-900 dark:text-white-100 text-base font-bold",children:W}),(0,s.jsx)("p",{className:"lowercase text-gray-500 dark:text-gray-400 text-xs font-medium",children:G})]})]}),d.signTxnData.details.Message&&"object"!=typeof d.signTxnData.details.Message?(0,s.jsx)("p",{className:"text-sm break-words text-gray-900 dark:text-white-100 dark:bg-gray-900 bg-white-100 p-4 w-full overflow-x-auto mt-3 rounded-2xl whitespace-break-spaces",children:d.signTxnData.details.Message}):(0,s.jsx)("pre",{className:"text-xs text-gray-900 dark:text-white-100 dark:bg-gray-900 bg-white-100 p-4 w-full overflow-x-auto mt-3 rounded-2xl",children:JSON.stringify(d.signTxnData.details,(e,t)=>"bigint"==typeof t?t.toString():t,2)}),F&&"error"===K?(0,s.jsx)(C._,{text:F,className:"mt-3"}):null,"error"!==K&&q?(0,s.jsx)(D.Z,{showLedgerPopup:q,onClose:()=>J(!1)}):null]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 py-3 px-7 dark:bg-black-100 bg-gray-50 w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-center w-full space-x-3",children:[(0,s.jsx)(T.Buttons.Generic,{title:"Reject Button",color:L.w.gray900,onClick:()=>{H(b,null==d?void 0:d.payloadId,g),g&&m()},disabled:"loading"===K,children:"Reject"}),(0,s.jsx)(T.Buttons.Generic,{title:"Approve Button",color:L.w.getChainColor(w),onClick:X,disabled:ee,className:`${ee?"cursor-not-allowed opacity-50":""}`,children:"loading"===K?(0,s.jsx)(y.T,{color:"white"}):"Sign"})]})})]})})})}var U=a("18812"),Z=a("26089"),K=a("6391"),Y=a.n(K),F=a("69332"),z=a("23060"),q=a("99188"),J=a("114"),$=a("75958"),Q=a("44818"),V=a("37906");let X=G.w.useGetWallet,ee=(0,$.Pi)(e=>{var t,a,i;let{txnData:o,rootDenomsStore:d,rootBalanceStore:g,evmBalanceStore:m,donotClose:x,handleTxnListUpdate:v,activeChain:w,activeNetwork:b}=e,E=X(w),{addressLinkState:j}=(0,n.uaF)(E,w),I=m.evmBalance,G=(0,n.QSC)(w),P=(0,n.rTu)(),W=g.getBalancesForChain(w,b),[K,$]=(0,c.useState)(!1),ee=(0,c.useMemo)(()=>{let e=W;return(0,n.hI9)((0,h.l)(),j,(null==G?void 0:G.evmOnlyChain)??!1)&&(e=[...e,...I.evmBalance??[]].filter(e=>new(Y())(e.amount).gt(0))),e},[j,W,null==G?void 0:G.evmOnlyChain,I.evmBalance]),et=(0,c.useMemo)(()=>(ee??[]).some(e=>(null==e?void 0:e.isEvm)&&((null==e?void 0:e.coinMinimalDenom)==="usei"||(null==G?void 0:G.evmOnlyChain))),[ee,null==G?void 0:G.evmOnlyChain]);(0,Q.h)(null!==P,"activeWallet is null");let ea=(0,n.FmJ)(),es=n.rNU.useLogCosmosDappTx(),en=(0,c.useMemo)(()=>(0,O.k)(P.name),[P.name]),ei=(0,u.s0)(),el=(0,n.SFn)(w),er=(0,n.xxU)(w,b,!0),{evmJsonRpc:eo}=(0,n.U9i)(w,b),ed=(0,z.e7)(d.allDenoms,{activeChain:w,isSeiEvmTransaction:!0}),{status:ec}=(0,n.CIk)(w,b),[eu,eg]=(0,c.useState)("idle"),[em,ex]=(0,c.useState)(""),[eh,ev]=(0,c.useState)(null),[ep,ef]=(0,c.useState)(null),[ew,eT]=(0,c.useState)(!1),e_=(0,n.dco)(),ey=(0,n._ty)(w),eN=(0,c.useMemo)(()=>{var e;return parseInt((((null===(e=e_[w])||void 0===e?void 0:e.DEFAULT_GAS_IBC)??l.N7W.DEFAULT_GAS_IBC)*ey).toString())},[w,e_,ey]),[eb,eE]=(0,c.useState)(eN),[ej,eS]=(0,c.useState)({gasPrice:ed.gasPrice,option:n.j1p.LOW}),eC=null==o?void 0:o.origin,eD=null==eC?void 0:null===(i=eC.split("//"))||void 0===i?void 0:null===(a=i.at(-1))||void 0===a?void 0:null===(t=a.split("."))||void 0===t?void 0:t.at(-2),ek=(0,A.G)(eC),eI=(0,n.bkk)(d.allDenoms,w,b),eA=(0,c.useMemo)(()=>{if(!!eI)return(ee??[]).find(e=>(null==e?void 0:e.coinMinimalDenom)===eI.coinMinimalDenom)},[ee,eI]);(0,c.useEffect)(()=>{g.loadBalances(w,b)},[w,b]),(0,c.useEffect)(()=>{!async function(){if(o.signTxnData.gas){eE(Number(o.signTxnData.gas));return}try{eT(!0);let t=eN;if(o.signTxnData.params){let e=await l.kZr.ExecuteEthEstimateGas(o.signTxnData.params,eo);t=Math.ceil(Number(e))}else{var e;let a=(0,l.DiR)(null==P?void 0:null===(e=P.pubKeys)||void 0===e?void 0:e[w]);t=await l.kZr.SimulateTransaction(o.signTxnData.to,o.signTxnData.value,eo,o.signTxnData.data,void 0,a)}eE(t)}catch(e){eE(eN)}finally{eT(!1)}}()},[w,null==P?void 0:P.pubKeys,eN,eo,ey,o.signTxnData.data,o.signTxnData.gas,o.signTxnData.params,o.signTxnData.to,o.signTxnData.value]),(0,c.useEffect)(()=>{function e(){((null==eh?void 0:eh.includes("Max fee per gas is less than the block base fee"))||(null==eh?void 0:eh.includes("Insufficient funds to cover gas and transaction amount.")))&&ev("")}(async function t(){var t;if("loading"===ec||!(null==ej?void 0:null===(t=ej.gasPrice)||void 0===t?void 0:t.amount)){e();return}let a=await l.kZr.BlockBaseFee(eo);if(a&&new(Y())(ej.gasPrice.amount.toString()).lt(a)){ev("Max fee per gas is less than the block base fee. Please increase the gas fee.");return}let s=o.signTxnData.value,n=new(Y())(em||eb).multipliedBy(ej.gasPrice.amount.toString()),i=(0,h.l)()?18:Number((null==eA?void 0:eA.coinDecimals)??18);if(eA&&s&&0!==Number(s)&&n.plus((0,U.vz)(Number(s).toFixed(i),i).toString()).gt((0,U.vz)(Number(eA.amount).toFixed(i),i).toString())){ev("Insufficient funds to cover gas and transaction amount.");return}e()})()},[eo,ej,ec,eA,eb,o.signTxnData.value,em]);let eG=(0,c.useCallback)(()=>{setTimeout(()=>{g.refetchBalances(w,b)},3e3)},[w,b,g]),eL=async()=>{try{if(P.walletType===n._KQ.LEDGER){if(null==G?void 0:G.evmOnlyChain)$(!0);else throw Error(k.tR)}ef(null),eg("loading");let t=await E(w,!0),a=l.kZr.GetSeiEvmClient(t,eo??"",Number(er)),s=await a.sendTransaction("",o.signTxnData.to,o.signTxnData.value,parseInt(Number(em||eb).toString()),parseInt(ej.gasPrice.amount.toString()),o.signTxnData.data);try{let t=s.hash,a=new(Y())(Number(em||eb).toString()).multipliedBy(ej.gasPrice.amount.toString()).dividedBy((0,h.l)()?1e12:1).toFixed(0),i=eI.coinMinimalDenom;if(null==G?void 0:G.evmOnlyChain){var e;await es({txType:n.pb0.Dapp,txHash:t,metadata:{...ea,dapp_url:eC??origin},address:(0,l.DiR)(null==P?void 0:null===(e=P.pubKeys)||void 0===e?void 0:e[w]),chain:w,network:b,isEvmOnly:!0,feeQuantity:a,feeDenomination:i})}else{let e=await l.kZr.GetCosmosTxHash(t,eo??"");await es({txType:n.pb0.Dapp,txHash:e,metadata:{...ea,dapp_url:eC??origin},address:el,chain:w,network:b,feeQuantity:a,feeDenomination:i})}}catch{}eg("success");try{p().runtime.sendMessage({type:r.u.signSeiEvmResponse,payloadId:null==o?void 0:o.payloadId,payload:{status:"success",data:s.hash}})}catch{throw Error("Could not send transaction to the dApp")}x?v():(0,B.oj)()?(eG(),ei("/home")):window.close()}catch(t){eg("error");let e=t instanceof Error?t.message:"Something went wrong.";if(e.includes("intrinsic gas too low")){ef("Please try again with higher gas fee.");return}ef(e),(0,Z.Tb)(t,{tags:V.r})}};if(((0,h.l)()&&!["done","unknown"].includes(j)||(null==G?void 0:G.evmOnlyChain))&&"loading"===m.evmBalance.status)return(0,s.jsx)(N,{});let eO=!!ep||"loading"===eu||!!eh||ew||"loading"===ec;return(0,s.jsx)("div",{className:S()("panel-width enclosing-panel h-full relative self-center justify-self-center flex justify-center items-center",{"mt-2":!(0,B.oj)()}),children:(0,s.jsx)("div",{className:S()("relative w-full overflow-clip rounded-md border border-gray-300 dark:border-gray-900",{"panel-height":(0,B.oj)()}),children:(0,s.jsxs)(_.Z,{header:(0,s.jsx)("div",{className:"w-[396px]",children:(0,s.jsx)(T.Header,{imgSrc:G.chainSymbolImageUrl??J.GenericLight,title:(0,s.jsx)(T.Buttons.Wallet,{brandLogo:(0,h.l)()?(0,s.jsx)("img",{className:"w-[24px] h-[24px] mr-1",src:f.r.Logos.CompassCircle}):void 0,title:(0,M.fy)(en,10),className:"pr-4 cursor-default"})})}),children:[(0,s.jsxs)("div",{className:"px-7 py-3 overflow-y-auto relative h-[calc(100%-150px)]",children:[(0,s.jsx)("h2",{className:"text-center text-lg font-bold dark:text-white-100 text-gray-900 w-full",children:"Approve Transaction"}),(0,s.jsxs)("div",{className:"flex items-center mt-3 rounded-2xl dark:bg-gray-900 bg-white-100 p-4",children:[(0,s.jsx)(T.Avatar,{avatarImage:ek,avatarOnError:(0,R._)(f.r.Misc.Globe),size:"sm",className:"rounded-full overflow-hidden"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"capitalize text-gray-900 dark:text-white-100 text-base font-bold",children:eD}),(0,s.jsx)("p",{className:"lowercase text-gray-500 dark:text-gray-400 text-xs font-medium",children:eC})]})]}),(0,s.jsx)(z.ZP,{gasLimit:em||(null==eb?void 0:eb.toString()),setGasLimit:e=>ex(e.toString()),recommendedGasLimit:null==eb?void 0:eb.toString(),gasPriceOption:ej,onGasPriceOptionChange:e=>eS(e),error:eh,setError:ev,considerGasAdjustment:!1,chain:w,network:b,isSelectedTokenEvm:et,isSeiEvmTransaction:!0,rootDenomsStore:d,rootBalanceStore:g,children:(0,s.jsx)(q.m,{className:"mt-3",tabsList:[{id:"fees",label:"Fees"},{id:"details",label:"Details"}],tabsContent:{fees:(0,s.jsxs)("div",{className:"rounded-2xl p-4 mt-3 dark:bg-gray-900 bg-white-100",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("p",{className:"text-gray-500 dark:text-gray-100 text-sm font-medium tracking-wide",children:["Gas Fees ",(0,s.jsxs)("span",{className:"capitalize",children:["(",ej.option,")"]})]}),(0,s.jsx)(F.Z,{content:(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-100 text-sm",children:"You can choose higher gas fees for faster transaction processing."}),children:(0,s.jsx)("div",{className:"relative ml-2",children:(0,s.jsx)("img",{src:f.r.Misc.InfoCircle,alt:"Hint"})})})]}),(0,s.jsx)(z.ZP.Selector,{className:"mt-2"}),(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsx)(z.ZP.AdditionalSettingsToggle,{className:"p-0 mt-3"})}),(0,s.jsx)(z.ZP.AdditionalSettings,{className:"mt-2",showGasLimitWarning:!0,rootDenomsStore:d,rootBalanceStore:g}),eh?(0,s.jsx)("p",{className:"text-red-300 text-sm font-medium mt-2 px-1",children:eh}):null]}),details:(0,s.jsx)("pre",{className:"text-xs text-gray-900 dark:text-white-100 dark:bg-gray-900 bg-white-100 p-4 w-full overflow-x-auto mt-3 rounded-2xl",children:JSON.stringify(o.signTxnData.details,(e,t)=>"bigint"==typeof t?t.toString():t,2)})}})}),ep&&"error"===eu?(0,s.jsx)(C._,{text:ep,className:"mt-3"}):null,"error"!==eu&&K?(0,s.jsx)(D.Z,{showLedgerPopup:K,onClose:()=>$(!1)}):null]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 py-3 px-7 dark:bg-black-100 bg-gray-50 w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-center w-full space-x-3",children:[(0,s.jsx)(T.Buttons.Generic,{title:"Reject Button",color:L.w.gray900,onClick:()=>{H(ei,null==o?void 0:o.payloadId,x),x&&v()},disabled:"loading"===eu,children:"Reject"}),(0,s.jsx)(T.Buttons.Generic,{title:"Approve Button",color:L.w.getChainColor(w),onClick:eL,disabled:eO,className:`${eO?"cursor-not-allowed opacity-50":""}`,children:"loading"===eu?(0,s.jsx)(y.T,{color:"white"}):"Approve"})]})})]})})})}),et=(e=>{let t=()=>{let[t,a]=(0,c.useState)(null),[i,o]=(0,c.useState)(null),u=(0,c.useCallback)(async(e,t)=>{if(t.id===p().runtime.id&&e.type===r.u.signTransaction){var s;let i=e.payload,r=(0,d.DY)(i.origin),c=await p().storage.local.get(r),u=(0,h.l)()?"seiTestnet2":"ethereum",{chainKey:g=u,network:m="mainnet"}=c[r]||{},x=await (0,d.Hg)(),v=x[g],f=Number("testnet"===m?null==v?void 0:v.evmChainIdTestnet:null==v?void 0:v.evmChainId);o({activeChain:g,activeNetwork:m});let{evmJsonRpc:w}=(0,n.Nf9)(g,m,x);if(null==i?void 0:null===(s=i.signTxnData)||void 0===s?void 0:s.spendPermissionCapValue){let e=await (0,l.d_E)(i.signTxnData.to,w??"",Number(f));i.signTxnData.details={Permission:`This allows the third party to spend ${(0,l.DZ4)(i.signTxnData.spendPermissionCapValue,e.decimals)} ${e.symbol} from your current balance.`,...i.signTxnData.details}}a(e=>(e=e??[]).some(e=>{var t,a;return(null==e?void 0:null===(t=e.origin)||void 0===t?void 0:t.toLowerCase())!==(null==i?void 0:null===(a=i.origin)||void 0===a?void 0:a.toLowerCase())})?e:[...e,{...i,customId:`${t.id}-00${e.length}`}])}},[]);return((0,c.useEffect)(()=>(p().runtime.sendMessage({type:r.u.signingPopupOpen}),p().runtime.onMessage.addListener(u),()=>{p().runtime.onMessage.removeListener(u)}),[u]),null==t?void 0:t.length)?(0,s.jsx)(e,{txnDataList:t,setTxnDataList:a,txOriginData:i}):(0,s.jsx)(N,{})};return t.displayName=`withSeiEvmTxnSigningRequest(${e.displayName})`,t})(c.memo(function(e){let{txnDataList:t,setTxnDataList:a,txOriginData:n}=e,l=(0,u.s0)(),[r,d]=(0,c.useState)(0);(0,c.useEffect)(()=>(window.addEventListener("beforeunload",()=>{var e;return H(l,null===(e=t[0])||void 0===e?void 0:e.payloadId)}),p().storage.local.remove(o.u1),()=>{window.removeEventListener("beforeunload",()=>{var e;return H(l,null===(e=t[0])||void 0===e?void 0:e.payloadId)})}),[]);let h=e=>{a(t.filter(t=>t.customId!==e)),d(0)};return(0,s.jsxs)(s.Fragment,{children:[t.length>1?(0,s.jsx)(w,{activeIndex:r,setActiveIndex:d,limit:t.length}):null,t.map((e,a)=>{if(a!==r)return null;switch(e.signTxnData.methodType){case i.JY.PERSONAL_SIGN:case i.JY.ETH__SIGN:case i.JY.ETH__SIGN_TYPED_DATA_V4:return(0,s.jsx)(W,{txnData:e,donotClose:t.length>1,handleTxnListUpdate:()=>h(e.customId)},e.customId)}return(0,s.jsx)(ee,{activeChain:n.activeChain,activeNetwork:n.activeNetwork,txnData:e,rootDenomsStore:m.gb,rootBalanceStore:x.jZ,evmBalanceStore:g.Ct,donotClose:t.length>1,handleTxnListUpdate:()=>h(e.customId)},e.customId)})]})}))}}]);