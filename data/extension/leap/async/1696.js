!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="efa18f47-72b2-4d2d-881a-ef3a83b34940",e._sentryDebugIdIdentifier="sentry-dbid-efa18f47-72b2-4d2d-881a-ef3a83b34940")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["1696"],{39284:function(e,t,s){s.d(t,{h:()=>h});var l=s("52322"),a=s("39279"),r=s("84562"),i=s("3929"),o=s("29312"),n=s("50449"),d=s("75958"),c=s("9501"),x=s("32079"),u=s("2784"),m=s("83275");let h=(0,d.Pi)(e=>{let{chainTagsStore:t,title:s,bottomNavLabel:d}=e,[h,p]=(0,u.useState)(!1),[g,v]=(0,u.useState)(!1),{headerChainImgSrc:f}=(0,o.Cd)(),j=(0,n._)(m.t);return(0,l.jsxs)("div",{className:"relative w-full overflow-clip panel-height",children:[(0,l.jsx)(x.ZP,{isShown:h,toggler:()=>p(!h)}),(0,l.jsx)(i.Z,{header:(0,l.jsx)(a.Header,{action:{onClick:function(){p(!0)},type:a.HeaderActionType.NAVIGATION,className:"min-w-[48px] h-[36px] px-2 bg-[#FFFFFF] dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full"},imgSrc:f,onImgClick:j?void 0:()=>v(!0),title:s}),children:(0,l.jsxs)("div",{className:"h-[475px] px-4 flex flex-col items-center justify-center text-center gap-[4px]",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"absolute w-[200px] h-[100px] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ml-[0.3rem]",style:{boxShadow:"2px -2px 4.5rem 1.5rem #28ba5b",borderRadius:"100% 100% 0 0"}}),(0,l.jsx)("img",{className:"z-[1] relative",src:"https://assets.leapwallet.io/frog-coming-soon.png",alt:"frog-coming-soon"})]}),(0,l.jsx)("h3",{className:"dark:text-white-100 font-bold text-[24px]",children:"Coming soon"}),(0,l.jsxs)("p",{className:"text-gray-400 text-[16px] font-medium",children:["We're working on it. Or perhaps the chain is...",(0,l.jsx)("br",{}),"Either way, this page is coming soon!"]})]})}),(0,l.jsx)(c.Z,{isVisible:g,onClose:()=>v(!1),chainTagsStore:t}),(0,l.jsx)(r.Z,{label:d})]})})},30942:function(e,t,s){s.d(t,{X:function(){return o}});var l=s(21950),a=s(26089),r=s(2784),i=s(37906);function o(e){let{rpcUrl:t}=(0,l.U9i)();(0,r.useEffect)(()=>{if(e){if(!(e.includes("was submitted but was not yet found on the chain. You might want to check later. There was a wait of 60 seconds.")||e.includes("Reward is too low")))!e.includes("You don't have enough")&&a.Tb(`${e} - node: ${t}`,{tags:i.r})}},[e,t])}},71845:function(e,t,s){s.d(t,{Z:function(){return n}});var l=s(52322),a=s(6806),r=s(2784);let i=new Map([["regular",(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("g",{clipPath:"url(#clip0_241_1099)",children:[(0,l.jsx)("path",{d:"M3 12.75H14.0625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M3 8.25H21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M3 17.25H7.125",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0_241_1099",children:(0,l.jsx)("rect",{width:"24",height:"24",fill:"currentColor"})})})]},"regular")],["bold",(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("g",{clipPath:"url(#clip0_256_253)",children:[(0,l.jsx)("path",{d:"M3 12.75H14.0625",stroke:"currentColor",strokeWidth:"2.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M3 8.25H21",stroke:"currentColor",strokeWidth:"2.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M3 17.25H7.125",stroke:"currentColor",strokeWidth:"2.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0_256_253",children:(0,l.jsx)("rect",{width:"24",height:"24",fill:"currentColor"})})})]},"bold")],["fill",(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 0H20C22.2091 0 24 1.79086 24 4V20C24 22.2091 22.2091 24 20 24H4C1.79086 24 0 22.2091 0 20V4C0 1.79086 1.79086 0 4 0ZM3 12C2.58579 12 2.25 12.3358 2.25 12.75C2.25 13.1642 2.58579 13.5 3 13.5H14.0625C14.4767 13.5 14.8125 13.1642 14.8125 12.75C14.8125 12.3358 14.4767 12 14.0625 12H3ZM2.25 8.25C2.25 7.83579 2.58579 7.5 3 7.5H21C21.4142 7.5 21.75 7.83579 21.75 8.25C21.75 8.66421 21.4142 9 21 9H3C2.58579 9 2.25 8.66421 2.25 8.25ZM3 16.5C2.58579 16.5 2.25 16.8358 2.25 17.25C2.25 17.6642 2.58579 18 3 18H7.125C7.53921 18 7.875 17.6642 7.875 17.25C7.875 16.8358 7.53921 16.5 7.125 16.5H3Z",fill:"currentColor"},"fill")]]),o=(0,r.forwardRef)((e,t)=>(0,l.jsx)(a.Z,{viewBox:"0 0 24 24",ref:t,...e,weights:i}));o.displayName="Sort";let n=o},37098:function(e,t,s){s.r(t),s.d(t,{default:()=>td});var l,a,r,i,o=s("52322"),n=s("21950"),d=s("84562"),c=s("39284"),x=s("26571"),u=s("23259"),m=s("78646"),h=s("76131"),p=s("75958"),g=s("2784"),v=s("36321"),f=s("43477"),j=s("84601"),S=s("39279"),b=s("94184"),N=s.n(b),w=s("54235"),y=s("27963"),k=s("3929"),P=s("98851"),C=s("9501"),_=s("10289"),O=s("50166"),T=s("48534");let E={60:18,637:8,118:6,529:6,750:6,394:8,234:6,564:6,852:6,639:6,459:6,330:6,990:6,931:6,4444:6,505:9,494:6,0:8,1:8};function A(e){let t=e,s=Math.floor(t/3600);s>=1?t-=3600*s:s="00";let l=Math.floor(t/60);return l>=1?t-=60*l:l="00",t<1&&(t="00"),1==l.toString().length&&(l="0"+l),1==t.toString().length&&(t="0"+t),s+":"+l+":"+t}function R(e,t,s){var l;if(!t)return!0;let a=t.trim().toLowerCase();return!!((e.chain?s[e.chain].chainName:"").toLowerCase().includes(a)||((null==e?void 0:e.title)??(null==e?void 0:null===(l=e.content)||void 0===l?void 0:l.title)??"").toLowerCase().includes(a)||e.proposal_id.toString().includes(a)||e.status.toLowerCase().includes(a))||!1}function D(e,t){return 0===t?"0%":`${Number(e/t*100).toFixed(2)}%`}function L(e,t,s){let l=e.chain??"cosmos",a=t.chain??"cosmos",r=s[l].chainName,i=s[a].chainName;return r.localeCompare(i)}var I=s("2826"),M=s("80229"),U=s("89145"),V=s("16698"),F=s("26089"),G=s("51994"),Z=s("19623"),B=s("46103");var H=((l={}).YES="Yes",l.NO="No",l.NO_WITH_VETO="No with Veto",l.ABSTAIN="Abstain",l);function z(e){let{onSubmitVote:t,setShowFeesSettingSheet:s,setRecommendedGasLimit:l,proposalId:a,isProposalInVotingPeriod:r,setGasLimit:i,feeDenom:d,forceChain:c,forceNetwork:x}=e,u=(0,n.a74)(),m=(0,g.useMemo)(()=>c||u,[u,c]),h=(0,n.QSC)(m),p=(0,n.obn)(),v=(0,g.useMemo)(()=>x||p,[p,x]),f=(0,n.dju)(m,v),j=(0,g.useRef)(!0),[b,w]=(0,g.useState)(!0),[y,k]=(0,g.useState)(void 0),P=(0,g.useMemo)(()=>{let e=[{label:"Yes",icon:(0,o.jsx)(M.V,{size:20}),selectedCSS:"text-white-100 bg-green-600"},{label:"No",icon:(0,o.jsx)(U.L,{size:20}),selectedCSS:"text-white-100 bg-red-300"}];return"atomone-1"!==h.chainId&&e.push({label:"No with Veto",icon:(0,o.jsx)(U.L,{size:20}),selectedCSS:"text-white-100 bg-indigo-300"}),e.push({label:"Abstain",icon:(0,o.jsx)(V.q,{size:20}),selectedCSS:"text-white-100 bg-yellow-600"}),e},[h.chainId]);return(0,g.useEffect)(()=>{let e=!1,t=async()=>{try{let t=(0,I.f3G)(d.coinMinimalDenom),s=await f({proposalId:a,voteOption:"Yes",fee:t});if(null!==s&&!e){let e=s.gasUsed.toString();l(e),j.current&&(i(e),j.current=!1)}}catch{}finally{w(!1)}};return r&&t().catch(F.Tb),()=>{e=!0}},[d.coinMinimalDenom,a,f,r]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"flex flex-col items-center gap-4",children:P.map(e=>(0,o.jsxs)("button",{onClick:()=>k(e.label),className:N()("flex items-center w-[344px] p-4 rounded-2xl cursor-pointer",{"dark:text-gray-200 dark:bg-gray-900 text-gray-600 bg-white-100":y!==e.label,[e.selectedCSS]:y===e.label}),children:[(0,o.jsx)("span",{className:"mr-3",children:e.icon}),(0,o.jsx)("span",{className:"text-base font-bold dark:text-white-100",children:e.label})]},e.label))}),b?(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(Z.T,{color:B.w.getChainColor(m)})}):(0,o.jsx)(G.a,{className:"mt-4",setShowFeesSettingSheet:s}),(0,o.jsx)(S.Buttons.Generic,{color:B.w.getChainColor(m),size:"normal",className:"w-[344px] py-3 mt-4",disabled:!y||b,onClick:()=>t(y),children:(0,o.jsx)("div",{className:"flex justify-center text-white-100 items-center",children:(0,o.jsx)("span",{children:"Submit"})})})]})}let $={[H.YES]:"dark:border-green-800 border-green-300",[H.ABSTAIN]:"dark:border-gray-800 border-gray-200",[H.NO]:"dark:border-red-800 border-red-300",[H.NO_WITH_VETO]:"dark:border-red-800 border-red-300",GENERAL:"dark:border-gray-800 border-gray-200"},Y={[H.YES]:"bg-green-600/20",[H.ABSTAIN]:"bg-gray-600/20",[H.NO]:"bg-red-600/20",[H.NO_WITH_VETO]:"bg-red-600/20",GENERAL:"bg-gray-600/20"};function W(e){let t=Number(e.yes),s=Number(e.no),l=Number(e.no_with_veto??0),a=Number(e.abstain),r=Math.max(t+s+a+l,1),i=t/r*100,o=s/r*100,n=l/r*100,d=a/r*100,c=Math.max(i,o,n,d,1);return[{label:H.YES,percentage:i,selectedBorderCSS:i===c?$[H.YES]:$.GENERAL,selectedBackgroundCSS:i===c?Y[H.YES]:Y.GENERAL,isMajor:i===c},{label:H.NO,percentage:o,selectedBorderCSS:o===c?$[H.NO]:$.GENERAL,selectedBackgroundCSS:o===c?Y[H.NO]:Y.GENERAL,isMajor:o===c},{label:H.NO_WITH_VETO,percentage:n,selectedBorderCSS:n===c?$[H.NO_WITH_VETO]:$.GENERAL,selectedBackgroundCSS:n===c?Y[H.NO_WITH_VETO]:Y.GENERAL,isMajor:n===c},{label:H.ABSTAIN,percentage:d,selectedBorderCSS:d===c?$[H.ABSTAIN]:$.GENERAL,selectedBackgroundCSS:d===c?Y[H.ABSTAIN]:Y.GENERAL,isMajor:d===c}]}var q=s("14281"),X=s("23060"),J=s("80588"),Q=s("30942"),K=s("81252"),ee=s("42799"),et=s("48346"),es=s("74079");var el=((a={}).YES="Yes",a.NO="No",a.NO_WITH_VETO="No with Veto",a.ABSTAIN="Abstain",a);let ea=(e,t)=>{if(!0===t){var s;return null==e?void 0:null===(s=e.proposal)||void 0===s?void 0:s.title}return null==e?void 0:e.title},er=(e,t)=>{if(!0===t){var s;return null==e?void 0:null===(s=e.proposal)||void 0===s?void 0:s.status}return null==e?void 0:e.status},ei=(e,t)=>!0===t?null==e?void 0:e.id:null==e?void 0:e.proposal_id,eo=(e,t,s)=>{var l;return!0===s?t/((null==e?void 0:null===(l=e.proposal)||void 0===l?void 0:l.total_power)??1)*100:null==e?void 0:e.turnout},en=(e,t)=>{var s,l,a,r;return!0===t?(null==e?void 0:null===(r=e.proposal)||void 0===r?void 0:null===(a=r.threshold)||void 0===a?void 0:null===(l=a.threshold_quorum)||void 0===l?void 0:null===(s=l.quorum)||void 0===s?void 0:s.percent)*100:null==e?void 0:e.quorum},ed=(e,t)=>{if(!0===t){var s;return null==e?void 0:null===(s=e.proposal)||void 0===s?void 0:s.description}return null==e?void 0:e.description},ec=(e,t)=>{if(!0===t){var s,l;return Math.ceil((null==e?void 0:null===(l=e.proposal)||void 0===l?void 0:null===(s=l.expiration)||void 0===s?void 0:s.at_time)/1e6)}return null==e?void 0:e.voting_end_time},ex=(e,t)=>{if(!0===t){var s;return null==e?void 0:null===(s=e.proposal)||void 0===s?void 0:s.votes}return null==e?void 0:e.tally},eu=(e,t)=>{var s,l;return!0===t?null==e?void 0:null===(l=e.proposal)||void 0===l?void 0:l.proposer:null==e?void 0:null===(s=e.proposer)||void 0===s?void 0:s.address},em=K.w.useGetWallet,eh=[{label:el.YES,icon:(0,o.jsx)(M.V,{size:20}),selectedCSS:"text-white-100 bg-green-600"},{label:el.NO,icon:(0,o.jsx)(U.L,{size:20}),selectedCSS:"text-white-100 bg-red-300"},{label:el.ABSTAIN,icon:(0,o.jsx)(V.q,{size:20}),selectedCSS:"text-white-100 bg-yellow-600"}];function ep(e){let{proposalId:t,isProposalInVotingPeriod:s,isOpen:l,setShowFeesSettingSheet:a,onCloseHandler:r,onSubmitVote:i,showFeesSettingSheet:d,gasError:c,forceChain:x,simulateNtrnVote:u}=e,[m,h]=(0,g.useState)(void 0),p=(0,n.a74)(),v=(0,g.useMemo)(()=>x||p,[p,x]),f=em(x),[j,b]=(0,g.useState)(""),[w,y]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{t&&m&&s&&(async()=>{try{y(!0);let e=await f();await u(e,Number(t),m)}catch(e){b(e.message)}finally{y(!1)}})()},[t,m,s]),(0,Q.X)(j),(0,o.jsxs)(q.Z,{isOpen:l,onClose:r,title:"Cast your Vote",closeOnBackdropClick:!0,children:[(0,o.jsx)("div",{className:"flex flex-col items-center gap-4",children:eh.map(e=>(0,o.jsxs)("button",{onClick:()=>h(e.label),className:N()("flex items-center w-[344px] p-4 rounded-2xl cursor-pointer",{"dark:text-gray-200 dark:bg-gray-900 text-gray-600 bg-white-100":m!==e.label,[e.selectedCSS]:m===e.label}),children:[(0,o.jsx)("span",{className:"mr-3",children:e.icon}),(0,o.jsx)("span",{className:"text-base font-bold dark:text-white-100",children:e.label})]},e.label))}),(0,o.jsx)(G.a,{className:"mt-4",setShowFeesSettingSheet:a}),c&&!d?(0,o.jsx)("p",{className:"text-red-300 text-sm font-medium mt-2 text-center",children:c}):null,(0,o.jsx)(S.Buttons.Generic,{color:B.w.getChainColor(v),size:"normal",className:"w-[344px] py-3 mt-4",disabled:!m||!!c||w,onClick:()=>i(m),children:w?(0,o.jsx)(Z.T,{color:B.w.white100}):"Approve"})]})}let eg=(0,p.Pi)(e=>{let{isProposalInVotingPeriod:t,proposalId:s,refetchVote:l,showCastVoteSheet:a,setShowCastVoteSheet:r,className:i,forceChain:d,forceNetwork:c}=e,x=em(d),u=ee.gb.allDenoms,m=(0,X.e7)(u,{activeChain:d,selectedNetwork:c}),h=(0,es._)(),{setFeeDenom:p,userPreferredGasPrice:v,userPreferredGasLimit:f,setGasOption:j,gasOption:S,gasEstimate:b,setUserPreferredGasLimit:w,setUserPreferredGasPrice:y,clearTxError:k,txError:P,memo:C,setMemo:_,isVoting:O,handleVote:T,simulateNtrnVote:E}=(0,n.k5N)(u,d,c),[A,R]=(0,g.useState)(void 0),[D,L]=(0,g.useState)(!1),[I,M]=(0,g.useState)(null),[U,V]=(0,g.useState)({option:n.j1p.LOW,gasPrice:v??m.gasPrice}),F=(0,g.useCallback)((e,t)=>{V(e),p(t.denom)},[p]);(0,g.useEffect)(()=>{V({option:S,gasPrice:m.gasPrice})},[m.gasPrice]),(0,g.useEffect)(()=>{j(U.option),y(U.gasPrice)},[U,j,y]);let G=(0,g.useCallback)(()=>{R(void 0),r(!1),k()},[k,r]),Z=async()=>{k();try{let e=await x();return await T({wallet:e,callback:h,voteOption:A,proposalId:Number(s)}),!0}catch(e){return!1}};return(0,o.jsx)("div",{className:N()("",i),children:(0,o.jsxs)(X.ZP,{recommendedGasLimit:b.toString(),gasLimit:(null==f?void 0:f.toString())??b.toString(),setGasLimit:e=>w(Number(e.toString())),gasPriceOption:U,onGasPriceOptionChange:F,error:I,setError:M,chain:d,network:c,rootDenomsStore:ee.gb,rootBalanceStore:et.jZ,children:[(0,o.jsx)(ep,{proposalId:s,isProposalInVotingPeriod:t,isOpen:a,setShowFeesSettingSheet:L,onCloseHandler:()=>r(!1),onSubmitVote:R,showFeesSettingSheet:D,gasError:I??"",simulateNtrnVote:E,forceChain:d}),(0,o.jsx)(J.k,{showFeesSettingSheet:D,onClose:()=>L(!1),gasError:I}),(0,o.jsx)(eH,{isOpen:void 0!==A,proposalId:s,error:P,loading:O,memo:C,setMemo:_,selectedVote:A,onSubmitVote:Z,refetchCurrVote:l,onCloseHandler:G,gasOption:U.option,forceChain:d})]})})});var ev=s("57849"),ef=s("26007"),ej=s("60431"),eS=s("55334"),eb=s("40304"),eN=s("69816"),ew=s("27484"),ey=s.n(ew),ek=s("38313"),eP=s("57124"),eC=s("86874"),e_=s("693"),eO=s("49409");var eT=((r={}).OPEN="open",r.EXECUTED="executed",r.PASSED="passed",r.REJECTED="rejected",r);function eE(e){let{status:t}=e;switch(t){case"open":case eJ.PROPOSAL_STATUS_IN_PROGRESS:case eJ.PROPOSAL_STATUS_VOTING_PERIOD:return(0,o.jsx)("span",{className:"font-semibold  dark:text-orange-300 text-orange-600",children:"In Progress"});case"passed":case"executed":case eJ.PROPOSAL_STATUS_PASSED:case eJ.PROPOSAL_STATUS_EXECUTED:return(0,o.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-300",children:"Executed"});case eJ.PROPOSAL_STATUS_FAILED:case eJ.PROPOSAL_STATUS_REJECTED:case"rejected":return(0,o.jsx)("span",{className:"font-semibold text-red-300",children:"Rejected"});default:return(0,o.jsx)("span",{className:"font-semibold text-gray-400",children:"Unspecified"})}}function eA(e){let{proposal:t,onVote:s,currVote:l,isLoading:a,shouldUseFallback:r,forceChain:i}=e,[d,c]=(0,g.useState)(),x=(0,n.a74)(),u=(0,g.useMemo)(()=>i||x,[x,i]);switch((0,g.useEffect)(()=>{let e=setInterval(()=>{let e=ey()();c(A(ey()(ec(t,r)).diff(e,"seconds")))},1e3);return()=>clearInterval(e)},[t,r]),er(t,r)){case eT.OPEN:case eJ.PROPOSAL_STATUS_IN_PROGRESS:case eJ.PROPOSAL_STATUS_VOTING_PERIOD:return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4",children:[(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-base font-bold",children:"Voting Ends"}),(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold",children:ey()(ec(t,r)).format("MMM DD, YYYY")})]}),(0,o.jsx)("div",{className:"px-4 pb-4 text-xs text-gray-600 dark:text-gray-200 min-h-[32px]",children:d&&`Ending in ${d}`})]}),a?(0,o.jsxs)("div",{className:"rounded-2xl mt-4 h-18 w-full p-4 flex bg-white-100 dark:bg-gray-900",children:[(0,o.jsx)(eC.Z,{count:1,className:"rounded-full mt-4 h-10 w-10"}),(0,o.jsxs)("div",{className:"ml-3 w-full",children:[(0,o.jsx)(eC.Z,{count:1,className:"h-6"}),(0,o.jsx)(eC.Z,{count:1,className:"h-5"})]})]}):null,l&&"NO_VOTE"!==l&&(0,o.jsxs)("div",{className:N()("flex p-4 w-[344px] mt-4 dark:bg-green-900 bg-green-300 border-2 dark:border-green-800 border-green-600 rounded-2xl"),children:[(0,o.jsx)("div",{className:"h-10 w-10 bg-green-400 rounded-full flex items-center justify-center",children:(0,o.jsx)(M.V,{size:16,className:"text-green-700"})}),(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start px-3",children:[(0,o.jsx)("div",{className:"text-base text-white-100 text-left",children:"Vote submitted"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 font-medium",children:["Voted ",l.toUpperCase()]})]})]}),(0,o.jsx)(S.Buttons.Generic,{color:B.w.getChainColor(u),size:"normal",className:"w-[344px] py-4 mt-4",onClick:()=>s(),children:(0,o.jsxs)("div",{className:"flex justify-center text-white-100 items-center",children:[(0,o.jsx)(M.V,{size:16,className:"mr-2"}),(0,o.jsx)("span",{children:"Vote"})]})})]});case eT.EXECUTED:case eT.PASSED:case eT.REJECTED:case eJ.PROPOSAL_STATUS_PASSED:case eJ.PROPOSAL_STATUS_EXECUTED:case eJ.PROPOSAL_STATUS_FAILED:case eJ.PROPOSAL_STATUS_REJECTED:return(0,o.jsxs)("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[(0,o.jsx)("div",{className:"text-gray-600 w-[200px] dark:text-gray-200 text-xs font-bold",children:"Results"}),(0,o.jsx)("div",{className:"text-gray-600 dark:text-gray-200 text-xs font-bold"})]}),(0,o.jsx)("div",{className:"flex flex-col justify-center gap-3 p-4",children:W(ex(t,r)).filter(e=>e.label!==el.NO_WITH_VETO).map(e=>(0,o.jsxs)("div",{className:"flex rounded-2xl relative overflow-clip",children:[(0,o.jsx)("div",{className:N()("text-black-100 dark:text-white-100 w-52 font-bold py-2 border-y-2 border-l-2 rounded-l-2xl z-10",e.selectedBorderCSS),children:(0,o.jsx)("span",{className:"ml-4 max-h-10",children:e.label})}),(0,o.jsx)("div",{className:N()("w-full text-black-100 py-[10px] dark:text-white-100 border-y-2 border-r-2 rounded-r-2xl",e.selectedBorderCSS),children:(0,o.jsx)("span",{className:"absolute right-4 font-bold",children:e.percentage.toFixed(2)})}),(0,o.jsx)("div",{style:{width:(3.12*e.percentage).toString()+"px"},className:N()("h-10 absolute l-0 m-[2px] rounded-2xl",e.selectedBackgroundCSS)})]},e.label))})]})}return(0,o.jsx)(o.Fragment,{})}function eR(e){let{selectedProp:t,onBack:s,proposalList:l,shouldUseFallback:a,forceChain:r,forceNetwork:i}=e,{chains:d}=(0,n._IL)(),c=(0,n.a74)(),x=(0,g.useMemo)(()=>r||c,[c,r]),u=(0,ek.ob)(),m=(0,g.useMemo)(()=>i||u,[u,i]),h=(0,n.SFn)(x),p=d[x],{rpcUrl:v,txUrl:f}=(0,n.U9i)(x,m),j=(0,eP.a)(),[b,N]=(0,g.useState)(!1),w=(0,g.useMemo)(()=>l.find(e=>(a?e.id:e.proposal_id)===t),[l,t,a]),{abstain:y,yes:P,no:C}=a?w.proposal.votes:w.tally,_=[P,C,y].reduce((e,t)=>e+Number(t),0),O=(0,g.useMemo)(()=>[eT.OPEN,eJ.PROPOSAL_STATUS_IN_PROGRESS,eJ.PROPOSAL_STATUS_VOTING_PERIOD].includes(er(w,a)),[w,a]),T=(0,g.useMemo)(()=>_?[{title:"YES",value:+P,color:"#29A874",percent:D(+P,_)},{title:"NO",value:+C,color:"#FF707E",percent:D(+C,_)},{title:"Abstain",value:+y,color:"#D1A700",percent:D(+y,_)}]:[{title:"loading",value:1,color:"#ccc",percent:"0%"}],[y,C,_,P]),E=(0,g.useMemo)(()=>[{label:"Turnout",value:eo(w,_,a)},{label:"Quorum",value:en(w,a)}],[w,a,_]),{data:A,refetch:R,isLoading:L}=(0,ej.useQuery)(["neutron-currVote",x,h,t,v],async function(){try{let{data:e}=await eS.Z.post(`https://api.leapwallet.io/gov/vote/${p.chainId}/${t}`,{userAddress:h});return{vote:e}}catch(e){return await (0,I.Jk_)(v??"",Number(t??""),h)}},{retry:e=>e<=2,enabled:O&&!!v});return(0,o.jsx)("div",{className:"relative w-full overflow-clip panel-height enclosing-panel",children:(0,o.jsxs)(k.Z,{children:[(0,o.jsx)(S.Header,{action:{onClick:s,type:S.HeaderActionType.BACK},title:"Proposal"}),(0,o.jsxs)("div",{className:"flex flex-col py-6 px-7 max-h-[calc(100%-80px)] overflow-y-scroll",children:[(0,o.jsxs)("div",{className:"text-gray-600 dark:text-gray-200 text-sm mb-1",children:["#",ei(w,a)," \xb7"," ",(0,o.jsx)(eE,{status:er(w,a)})]}),(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 font-bold text-xl break-words",children:ea(w,a)}),(0,o.jsx)(eA,{proposal:w,onVote:()=>N(!0),currVote:null==A?void 0:A.vote,isLoading:L,shouldUseFallback:a,forceChain:r}),(0,o.jsx)("div",{className:"my-8",children:(0,o.jsx)(S.LineDivider,{size:"sm"})}),_&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-full h-full flex items-center justify-center mb-8",children:(0,o.jsxs)("div",{className:"w-[180px] h-[180px] flex items-center justify-center relative",children:[(0,o.jsx)(e_.PieChart,{data:T,lineWidth:20}),(0,o.jsx)("p",{className:"text-md dark:text-white-100 text-dark-gray font-bold absolute",children:"Current Status"})]})}),(0,o.jsx)(ts,{dataMock:T,chain:p}),(0,o.jsx)(ta,{tallying:E})]}),O&&(0,o.jsxs)("div",{className:"rounded-2xl mt-6 h-18 w-full p-4 flex items-center justify-between roundex-xxl bg-white-100 dark:bg-gray-900",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)("div",{style:{backgroundColor:"#FFECA8",lineHeight:28},className:"relative h-10 w-10 rounded-full flex items-center justify-center text-lg",children:[(0,o.jsx)(ev.n,{size:16,className:"leading-none"}),(0,o.jsx)("img",{src:p.chainSymbolImageUrl??j,onError:(0,eO._)(j),alt:"chain logo",width:"16",height:"16",className:"rounded-full absolute bottom-0 right-0"})]}),(0,o.jsxs)("div",{className:"flex flex-col ml-3",children:[(0,o.jsx)(eN.Z,{size:"md",color:"font-bold dark:text-white-100 text-gray-800",children:"Proposer"}),(0,o.jsx)(eN.Z,{size:"xs",color:"font-medium text-gray-400",children:`${eu(w,a).slice(0,5)}...${eu(w,a).slice(-6)}`})]})]}),(0,o.jsx)("button",{className:"flex items-center justify-center px-1",onClick:()=>window.open(`${null==f?void 0:f.replace("txs","account")}/${eu(w,a)}`,"_blank"),children:(0,o.jsx)(ef.O,{size:18,className:"text-gray-400"})})]}),(0,o.jsx)("div",{className:"my-8",children:(0,o.jsx)(S.LineDivider,{size:"sm"})}),ed(w,a)&&(0,o.jsx)(eb.r,{description:ed(w,a),title:"Description",btnColor:B.w.getChainColor(x,p),forceChain:r})]}),(0,o.jsx)(eg,{refetchVote:R,proposalId:ei(w,a),isProposalInVotingPeriod:O,showCastVoteSheet:b,setShowCastVoteSheet:N,forceChain:r,forceNetwork:i})]})})}var eD=s("26227"),eL=s("59315"),eI=s("81532");function eM(){return(0,o.jsx)("div",{className:"flex-1 p-4 min-w-[344px]",children:(0,o.jsx)(eC.Z,{count:3})})}var eU=s("36400"),eV=s("71845"),eF=s("71198");let eG=[{key:"all",label:"All Proposals"},{key:eT.OPEN,label:"In Progress"},{key:eT.EXECUTED,label:"Executed"},{key:eT.REJECTED,label:"Rejected"}],eZ=(0,p.Pi)(e=>{let{proposalList:t,proposalListStatus:s,onClick:l,shouldPreferFallback:a,fetchMore:r,chainTagsStore:i}=e,[d,c]=(0,g.useState)(!1),[x,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(""),[p,v]=(0,g.useState)("all"),f=(0,eU.pb)(),j=(0,n.a74)(),b=(0,eP.a)(),w=(0,_.s0)(),O="loading"===s,E=f[j],A=(0,g.useMemo)(()=>null==t?void 0:t.reduce((e,t)=>("all"===p?m?(ea(t,a??!1).toLowerCase().includes(m)||String(t.id)===m)&&e.push(t):e.push(t):m||er(t,a??!1)!==p?er(t,a??!1)===p&&(ea(t,a??!1).toLowerCase().includes(m)||String(t.id)===m)&&e.push(t):e.push(t),e),[]),[t,p,m,a]);return(0,g.useEffect)(()=>{let e=document.querySelector("#bottom");if(!e||(null==A?void 0:A.length)===0||"success"!==s)return;let t=new IntersectionObserver(e=>{e[0].isIntersecting&&r()},{root:null,rootMargin:"0px",threshold:1});return t.observe(e),()=>{t.disconnect()}},[r,null==A?void 0:A.length,s]),(0,o.jsxs)("div",{className:"relative w-full overflow-clip panel-height enclosing-panel",children:[(0,o.jsxs)(k.Z,{header:(0,o.jsx)(S.Header,{action:{onClick:()=>w(-1),type:S.HeaderActionType.BACK},imgSrc:E.chainSymbolImageUrl??b,onImgClick:()=>c(!0),title:"Governance"}),children:[(0,o.jsx)(eL.h,{}),(0,o.jsxs)("div",{className:"w-full flex flex-col pt-6 pb-2 px-7 ",children:[(0,o.jsx)("div",{className:"text-[28px] text-black-100 dark:text-white-100 font-bold",children:"Proposals"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 font-bold",children:["List of proposals in ",j.toUpperCase()]}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-6 mb-4",children:[(0,o.jsx)(eI.M,{placeholder:"Search proposals...",onChange:e=>h(e.currentTarget.value.toLowerCase()),value:m,onClear:()=>h(""),inputClassName:"flex flex-grow text-base text-gray-600 dark:text-gray-200 outline-none bg-white-0",divClassName:"w-full flex h-10 bg-white-100 dark:bg-gray-900 rounded-[30px] py-2 pl-5 pr-[10px]"}),(0,o.jsx)("button",{className:"flex items-center justify-center h-10 bg-white-100 dark:bg-gray-900 rounded-full w-10 m-w-10 ml-3",style:{minWidth:40},onClick:()=>u(!0),children:(0,o.jsx)(eV.Z,{size:20,className:"dark:text-white-100 text-gray-800"})})]})]}),(0,o.jsxs)("div",{id:"governance-list",className:"pb-20 px-7",children:[(0,o.jsx)("div",{className:"rounded-2xl flex flex-col items-center w-full m-auto justify-center dark:bg-gray-900 bg-white-100",children:O?(0,o.jsx)(eM,{}):((null==A?void 0:A.length)??0)===0?(0,o.jsx)(y.S,{isRounded:!0,subHeading:m?"Please try again with something else":"",heading:m?"No results for “"+(0,eF.jr)(m)+"”":"No Proposals",src:P.r.Misc.Explore}):null==A?void 0:A.map((e,t)=>(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("div",{className:"p-4 cursor-pointer",onClick:()=>l(ei(e,a??!1)),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("div",{className:N()("w-[272px]",{"!w-[calc(100%-40px)]":(0,T.oj)()}),children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 font-bold text-base break-words",children:ea(e,a??!1)}),(0,o.jsxs)("div",{className:"text-gray-600 dark:text-gray-200 text-xs",children:["#",ei(e,a??!1)," \xb7"," ",(0,o.jsx)(eE,{status:er(e,a??!1)})]})]})}),(0,o.jsx)("img",{className:"ml-5",src:P.r.Misc.RightArrow})]})}),t<A.length-1?(0,o.jsx)(S.CardDivider,{}):null]},ei(e,a??!1)))}),(0,o.jsx)("div",{id:"bottom",className:"my-1"}),"fetching-more"===s?(0,o.jsx)("div",{className:"px-7 flex items-center justify-center",children:(0,o.jsx)(Z.T,{color:"white"})}):null]})]}),(0,o.jsx)(C.Z,{isVisible:d,onClose:()=>c(!1),chainTagsStore:i}),(0,o.jsx)(q.Z,{isOpen:x,onClose:()=>u(!1),title:"Filter by",children:(0,o.jsx)("div",{className:"rounded-2xl flex flex-col items-center w-full justify-center dark:bg-gray-900 bg-white-100",children:eG.map((e,t)=>(0,o.jsxs)(g.Fragment,{children:[(0,o.jsxs)("button",{className:"flex items-center justify-between text-md font-bold p-4 w-full text-gray-800 dark:text-white-100",onClick:()=>{v(e.key),u(!1)},children:[(0,o.jsx)("span",{children:e.label}),p===e.key?(0,o.jsx)(eD.f,{size:24,weight:"fill",className:"text-[#E18881]"}):null]}),t===eG.length-1?null:(0,o.jsx)(S.CardDivider,{})]},e.label))})})]})});var eB=s("86200");function eH(e){let{isOpen:t,onCloseHandler:s,onSubmitVote:l,selectedVote:a,error:r,loading:i,memo:d,setMemo:c,proposalId:x,gasOption:u,forceChain:m}=e,h=(0,n.a74)(),p=(0,g.useMemo)(()=>m||h,[h,m]);return(0,Q.X)(r),(0,o.jsx)(q.Z,{isOpen:t,onClose:s,title:"Review Transaction",className:"!p-0",children:(0,o.jsxs)("div",{className:"flex flex-col items-center w-[400px] gap-y-[16px] mt-[28px] mb-[40px] px-7",children:[(0,o.jsxs)("div",{className:"flex p-4 w-full bg-gray-50 dark:bg-gray-900 rounded-2xl",children:[(0,o.jsx)("div",{className:"h-10 w-10 bg-green-300 rounded-full flex items-center justify-center",children:(0,o.jsx)(M.V,{size:16,className:"text-green-700"})}),(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start px-3",children:[(0,o.jsx)("div",{className:"text-xs text-gray-400 text-left",children:"Vote message"}),(0,o.jsxs)("div",{className:"text-base text-black-100 dark:text-white-100 font-medium",children:["Vote ",(0,o.jsx)("b",{children:a})," on ",(0,o.jsxs)("b",{children:["Proposal #",x]})]})]})]}),(0,o.jsx)(S.Memo,{value:d,onChange:e=>{c(e.target.value)}}),(0,o.jsx)(G.a,{className:"mt-4"}),(0,o.jsx)(S.Buttons.Generic,{color:B.w.getChainColor(p),size:"normal",className:"w-[344px]",title:"Vote",onClick:async()=>{void 0!==a&&await l(a)},disabled:i,children:i?(0,o.jsx)(Z.T,{color:B.w.white100}):"Approve"}),r&&(0,o.jsx)(eB._,{text:(0,n.azN)(r,u,"vote")})]})})}function ez(e){let{selectedProposalChain:t,selectedProposalId:s,handleProposalDetailsBack:l,allProposals:a,shouldUseFallback:r,forceNetwork:i}=e;return"neutron"===t?(0,o.jsx)(eR,{selectedProp:s,onBack:l,proposalList:a,shouldUseFallback:r,forceChain:t,forceNetwork:i}):(0,o.jsx)(e5,{selectedProp:s,onBack:l,forceChain:t,forceNetwork:i,governanceStore:{chainProposals:{data:a,shouldUseFallback:r}}})}let e$=(0,p.Pi)(e=>{let{governanceStore:t,chainTagsStore:s}=e,l=(0,_.s0)(),{theme:a}=(0,S.useTheme)(),[r,i]=(0,g.useState)(!1),{votingProposals:d,nonVotingProposals:c,perChainShouldUseFallback:x}=t.aggregatedGov,u=(0,n.DI5)(),[m,h]=(0,g.useState)(!1),[p,v]=(0,g.useState)(""),[f,j]=(0,g.useState)(),[b,E]=(0,g.useState)(!1),[A,D]=(0,g.useState)(),I=(0,g.useMemo)(()=>{let e=d.filter(e=>R(e,p,u)).sort((e,t)=>L(e,t,u));return[...e,...c.filter(e=>R(e,p,u)).sort((e,t)=>L(e,t,u))]},[d,c,p,u]),M=(0,g.useCallback)((e,t)=>{j(e),E(x[t]),D(t)},[x]),U=(0,g.useCallback)(()=>{j(void 0),D(void 0),E(!1)},[]);return(0,o.jsx)("div",{className:"relative w-full overflow-clip enclosing-panel panel-height",children:f&&A?(0,o.jsx)(ez,{selectedProposalChain:A,selectedProposalId:f,handleProposalDetailsBack:U,allProposals:I,forceNetwork:"mainnet",shouldUseFallback:b}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.Z,{header:(0,o.jsx)(S.Header,{action:{onClick:()=>l(-1),type:S.HeaderActionType.BACK},imgSrc:a===S.ThemeName.DARK?P.r.Misc.AggregatedViewDarkSvg:P.r.Misc.AggregatedViewSvg,onImgClick:()=>i(!0),title:"Governance"}),children:(0,o.jsxs)("div",{className:"flex flex-col pt-[16px] px-[24px]",children:[m?(0,o.jsx)(w.SS,{handleClose:()=>{h(!1),v("")},handleChange:e=>v(e),value:p,placeholder:"Search proposal"}):(0,o.jsxs)("h1",{className:"flex items-center justify-between text-black-100 dark:text-white-100",children:[(0,o.jsx)("span",{className:"text-[24px] font-[700]",children:"Governance"}),(0,o.jsx)("button",{className:"bg-white-100 dark:bg-gray-950 w-[40px] h-[40px] rounded-full flex items-center justify-center",onClick:()=>h(!0),children:(0,o.jsx)("img",{src:P.r.Misc.SearchWhiteIcon,className:"w-[24px] h-[24px] invert dark:invert-0"})})]}),(0,o.jsx)("div",{className:N()({"mt-4":!m}),children:I.length>0?(0,o.jsx)(O.S_,{itemCount:I.length,width:352,height:(0,T.oj)()?Number(window.innerHeight-160):440,itemSize:()=>124,children:e=>{let{index:t,style:s}=e;return(0,o.jsx)("div",{style:s,children:(0,o.jsx)(eK,{proposal:I[t],handleClick:()=>{var e;return M(I[t].proposal_id,(null===(e=I[t])||void 0===e?void 0:e.chain)||"cosmos")}})})}}):(0,o.jsx)(o.Fragment,{children:p.trim().length>0?(0,o.jsx)(y.S,{isRounded:!0,subHeading:"Please try again with something else",heading:"No results for “"+(0,n.jrB)(p)+"”",src:P.r.Misc.Explore,classname:"dark:!bg-gray-950",imgContainerClassname:"dark:!bg-gray-900"}):null})})]})}),(0,o.jsx)(C.Z,{isVisible:r,onClose:()=>i(!1),chainTagsStore:s})]})})});var eY=s("56594"),eW=s("71566");let eq=K.w.useGetWallet,eX=(0,p.Pi)(e=>{var t,s;let{className:l,proposalId:a,refetchVote:r,showCastVoteSheet:i,setShowCastVoteSheet:d,isProposalInVotingPeriod:c,forceChain:x,forceNetwork:u}=e,m=(0,eW.a7)(),h=(0,g.useMemo)(()=>x||m,[m,x]),p=(0,n.obn)(),v=(0,g.useMemo)(()=>u||p,[p,u]),f=ee.gb.allDenoms,j=(0,X.e7)(f,{activeChain:h,selectedNetwork:v}),S=eq(),b=(0,es._)(),w=(0,n.dco)(),y=(0,n.DR3)(h),{loading:k,vote:P,error:C,memo:_,setMemo:O,feeText:T,showLedgerPopup:E,clearError:A,ledgerError:R}=(0,n.e5I)({denoms:f,proposalId:a,forceChain:h,forceNetwork:v}),{lcdUrl:D}=(0,n.U9i)(h,v),L=(0,n.VMC)(),M=(0,n.bkk)(f,h,v),U=(0,n._ty)(h),[V,G]=(0,g.useState)(!1),[Z,B]=(0,g.useState)(null),[H,$]=(0,g.useState)(M),[Y,W]=(0,g.useState)(void 0),[Q,K]=(0,g.useState)((null===(s=w[h])||void 0===s?void 0:null===(t=s.DEFAULT_GAS_TRANSFER)||void 0===t?void 0:t.toString())??I.N7W.DEFAULT_GAS_TRANSFER.toString()),[el,ea]=(0,g.useState)(Q),[er,ei]=(0,g.useState)({option:n.j1p.LOW,gasPrice:j.gasPrice}),eo=(0,n.dju)(h,v),en=(0,n.con)(h,v),ed=(0,n.q5i)(h,v),ec=(0,g.useRef)(!0);(0,g.useEffect)(()=>{!async function(){let e,t,s;let l=!1;if("uosmo"===H.coinMinimalDenom&&"osmosis"===h?({low:e,medium:t,high:s}=await (0,n.Q3h)(D??"",L),l=!0):en&&H.coinMinimalDenom===(null==M?void 0:M.coinMinimalDenom)&&({low:e,medium:t,high:s}=await ed(H.coinMinimalDenom),l=!0),l)switch(er.option){case n.j1p.LOW:ei(t=>({...t,gasPrice:I.DB5.fromString(`${e}${H.coinMinimalDenom}`)}));break;case n.j1p.MEDIUM:ei(e=>({...e,gasPrice:I.DB5.fromString(`${t}${H.coinMinimalDenom}`)}));break;case n.j1p.HIGH:ei(e=>({...e,gasPrice:I.DB5.fromString(`${s}${H.coinMinimalDenom}`)}))}}()},[h,el,H.coinMinimalDenom,er.option,null==M?void 0:M.coinMinimalDenom]);let ex=(0,g.useMemo)(()=>{let e=Math.ceil(Number(el)*U);return(0,eY.calculateFee)(e,er.gasPrice)},[U,el,er.gasPrice]),eu=(0,g.useCallback)((e,t)=>{ei(e),$({...t.denom,ibcDenom:t.ibcDenom})},[]),em=(0,g.useCallback)(async e=>{try{let t=await S(h);return!!await P({wallet:t,callback:b,voteOption:e,customFee:{stdFee:ex,feeDenom:H},isSimulation:!1})}catch(e){return(0,F.Tb)(e),!1}},[h,ex,H,S,b,P]),eh=(0,g.useCallback)(()=>{W(void 0),d(!1),A()},[A,d]),ep=(0,g.useCallback)(()=>{G(!1)},[]);return(0,g.useEffect)(()=>{let e=!1,t=async()=>{try{let t=(0,I.f3G)(H.coinMinimalDenom),s=await eo({proposalId:a,voteOption:n.RWi.YES,fee:t});if(null!==s&&!e){let e=s.gasUsed.toString();K(String(Number(e)*(y===I.Ufz.Version_Point_47?1.5:1))),ec.current&&(ea(String(Number(e)*(y===I.Ufz.Version_Point_47?1.5:1))),ec.current=!1)}}catch(e){}};return c&&t().catch(F.Tb),()=>{e=!0}},[y,a,eo,c]),(0,g.useEffect)(()=>{ei({option:n.j1p.LOW,gasPrice:j.gasPrice})},[j.gasPrice.amount.toString(),j.gasPrice.denom]),(0,o.jsx)("div",{className:N()("",l),children:(0,o.jsxs)(X.ZP,{recommendedGasLimit:Q,gasLimit:el,setGasLimit:e=>ea(e.toString()),gasPriceOption:er,onGasPriceOptionChange:eu,error:Z,setError:B,chain:h,network:v,rootDenomsStore:ee.gb,rootBalanceStore:et.jZ,children:[(0,o.jsx)(q.Z,{isOpen:i&&!E,onClose:()=>d(!1),title:"Cast your Vote",closeOnBackdropClick:!0,children:(0,o.jsx)(z,{feeDenom:H,gasLimit:el,gasPrice:er.gasPrice,setShowFeesSettingSheet:G,onSubmitVote:W,setRecommendedGasLimit:K,proposalId:a,isProposalInVotingPeriod:c,setGasLimit:ea,forceChain:h,forceNetwork:v})}),(0,o.jsx)(J.k,{showFeesSettingSheet:V,onClose:ep,gasError:Z}),(0,o.jsx)(te,{isOpen:void 0!==Y,proposalId:a,error:C,ledgerError:R,loading:k,feeText:T,memo:_,setMemo:O,selectedVote:Y,onSubmitVote:em,refetchCurrVote:r,onCloseHandler:eh,showLedgerPopup:E,gasOption:er.option,forceChain:h})]})})});var eJ=((i={}).PROPOSAL_STATUS_IN_PROGRESS="PROPOSAL_STATUS_IN_PROGRESS",i.PROPOSAL_STATUS_DEPOSIT_PERIOD="PROPOSAL_STATUS_DEPOSIT_PERIOD",i.PROPOSAL_STATUS_VOTING_PERIOD="PROPOSAL_STATUS_VOTING_PERIOD",i.PROPOSAL_STATUS_PASSED="PROPOSAL_STATUS_PASSED",i.PROPOSAL_STATUS_EXECUTED="PROPOSAL_STATUS_EXECUTED",i.PROPOSAL_STATUS_FAILED="PROPOSAL_STATUS_FAILED",i.PROPOSAL_STATUS_REJECTED="PROPOSAL_STATUS_REJECTED",i.PROPOSAL_STATUS_UNSPECIFIED="PROPOSAL_STATUS_UNSPECIFIED",i);function eQ(e){let{status:t}=e;switch(t){case"PROPOSAL_STATUS_DEPOSIT_PERIOD":return(0,o.jsx)("span",{className:" font-semibold dark:text-orange-300 text-orange-600",children:"Deposit Period"});case"PROPOSAL_STATUS_VOTING_PERIOD":return(0,o.jsx)("span",{className:"font-semibold  dark:text-orange-300 text-orange-600",children:"Voting Period"});case"PROPOSAL_STATUS_PASSED":return(0,o.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-300",children:"Passed"});case"PROPOSAL_STATUS_FAILED":return(0,o.jsx)("span",{className:"font-semibold text-red-300",children:"Failed"});case"PROPOSAL_STATUS_REJECTED":return(0,o.jsx)("span",{className:"font-semibold text-red-300",children:"Rejected"});case"PROPOSAL_STATUS_UNSPECIFIED":return(0,o.jsx)("span",{className:"font-semibold text-gray-400 ",children:"Unspecified"});default:return(0,o.jsx)("span",{className:"font-semibold text-gray-400",children:"Unspecified"})}}function eK(e){var t,s;let{proposal:l,style:a,handleClick:r}=e,i=(0,n.QSC)(l.chain??"cosmos");return(0,o.jsxs)("div",{className:"bg-white-100 dark:bg-gray-950 rounded-xl flex flex-col items-start justify-start gap-[2px] p-[12px] h-[112px] cursor-pointer",style:a,onClick:r,children:[(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-[12px] font-bold",children:(null==i?void 0:i.chainName)??"Unknown Chain"}),(0,o.jsx)("p",{className:"text-black-100 dark:text-white-100 font-[700] line-clamp-2",title:(null==l?void 0:l.title)??(null==l?void 0:null===(t=l.content)||void 0===t?void 0:t.title),children:(null==l?void 0:l.title)??(null==l?void 0:null===(s=l.content)||void 0===s?void 0:s.title)}),(0,o.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-[12px] font-[500]",children:["#",l.proposal_id," \xb7 ",(0,o.jsx)(eQ,{status:l.status})]})]})}var e0=s("29312"),e1=s("71603"),e2=s("80502"),e4=s("37906");let e3=[eJ.PROPOSAL_STATUS_VOTING_PERIOD,eJ.PROPOSAL_STATUS_DEPOSIT_PERIOD],e5=(0,p.Pi)(e=>{var t,s,l,a,r,i;let{selectedProp:d,onBack:c,forceChain:x,forceNetwork:u,governanceStore:m}=e,{data:h,shouldUseFallback:p}=m.chainProposals,v=(0,n.a74)(),f=(0,g.useMemo)(()=>x||v,[v,x]),b=(0,n.obn)(),N=(0,g.useMemo)(()=>u||b,[b,u]),{activeWallet:w}=(0,e1.ZP)(),y=(0,n.SFn)(f),P=(0,n.QSC)(f),{lcdUrl:C,txUrl:_}=(0,n.U9i)(f,N),[O,T]=(0,g.useState)(!1),E=(0,eP.a)(),{delegationInfo:A}=j.xO.delegationsForChain(f),R=(0,g.useMemo)(()=>{if("cosmos"===f||"atomone-1"===P.chainId){var e;return null==A?void 0:null===(e=A.totalDelegation)||void 0===e?void 0:e.gte(1)}return!0},[f,null==A?void 0:A.totalDelegation,P.chainId]),{topChainColor:L}=(0,e0.Cd)(),M=(0,g.useMemo)(()=>h.find(e=>e.proposal_id===d),[h,d]),U=(0,g.useMemo)(()=>[eJ.PROPOSAL_STATUS_VOTING_PERIOD,eJ.PROPOSAL_STATUS_IN_PROGRESS].includes(M.status),[M.status]),{data:V,refetch:G,isLoading:Z}=(0,ej.useQuery)(["currVote",f,y,d],async()=>{if(f)try{let{data:e}=await eS.Z.post(`https://api.leapwallet.io/gov/vote/${P.chainId}/${d}`,{userAddress:y});return e}catch(t){try{let e="/cosmos";return(null==P?void 0:P.chainId)==="govgen-1"&&(e="/govgen"),(null==P?void 0:P.chainId)==="atomone-1"&&(e="/atomone"),(await (0,I.F$d)({baseURL:C??"",method:"get",url:`${e}/gov/v1beta1/proposals/${d}/votes/${y}`},1,"proposals-votes")).data.vote.options[0].option.replace("VOTE_OPTION_","")}catch(t){var e;if(3===t.response.data.code||(null===(e=t.response.data.error)||void 0===e?void 0:e.code)===-32700)return"NO_VOTE";throw(0,F.Tb)(t,{tags:e4.r}),Error(t)}}},{retry:e=>2!==e,enabled:U}),{data:B,status:H}=(0,n._rB)(M.proposal_id,p,f,N);H=p?H:"success";let{yes:z,no:$,abstain:Y,no_with_veto:W}=M.tally||B||M.final_tally_result,q=[z,$,Y,W].reduce((e,t)=>e+Number(t??0),0)||1,X=(0,g.useMemo)(()=>{if(!q)return[{title:"loading",value:1,color:"#ccc",percent:"0%"}];let e=[{title:"YES",value:+z,color:"#29A874",percent:D(+z,q)},{title:"NO",value:+$,color:"#FF707E",percent:D(+$,q)}];return"atomone-1"!==P.chainId&&e.push({title:"No with Veto",value:+W,color:"#8583EC",percent:D(+W,q)}),e.push({title:"Abstain",value:+Y,color:"#D1A700",percent:D(+Y,q)}),e},[Y,$,W,q,z,P.chainId]),J=(0,g.useMemo)(()=>{let e=null==B?void 0:B.bonded_tokens;if("initia"===f&&Array.isArray(e)&&Array.isArray(null==B?void 0:B.voting_power_weights)){var t;let s=null==B?void 0:B.bonded_tokens,l=null==B?void 0:B.voting_power_weights;e=null===(t=s.reduce((e,t)=>{var s;let a=null==l?void 0:null===(s=l.find(e=>e.denom===t.denom))||void 0===s?void 0:s.amount;return a?e+=BigInt(t.amount)*BigInt(a):e},BigInt(0)))||void 0===t?void 0:t.toString()}return[{label:"Turnout",value:p?q/e*100:M.turnout},{label:"Quorum",value:p?(null==B?void 0:B.quorum)*100:M.quorum}]},[B,f,M.quorum,M.turnout,p,q]),Q=(0,g.useMemo)(()=>{var e,t,s,l,a,r;return p?(null==B?void 0:null===(e=B.proposer)||void 0===e?void 0:e.depositor)?{address:null==B?void 0:null===(t=B.proposer)||void 0===t?void 0:t.depositor,url:null==B?void 0:B.proposerTxUrl}:void 0:(null==M?void 0:null===(s=M.proposer)||void 0===s?void 0:s.address)?{address:null==M?void 0:null===(l=M.proposer)||void 0===l?void 0:l.address,url:(null==M?void 0:null===(a=M.proposer)||void 0===a?void 0:a.url)??`${null==_?void 0:_.replace("txs","account")}/${null==M?void 0:null===(r=M.proposer)||void 0===r?void 0:r.address}`}:void 0},[null==B?void 0:null===(t=B.proposer)||void 0===t?void 0:t.depositor,null==B?void 0:B.proposerTxUrl,null==M?void 0:null===(s=M.proposer)||void 0===s?void 0:s.address,null==M?void 0:null===(l=M.proposer)||void 0===l?void 0:l.url,p,_]);return(0,o.jsx)("div",{className:"relative w-full overflow-clip panel-height enclosing-panel",children:(0,o.jsxs)(k.Z,{children:[(0,o.jsx)(S.Header,{action:{onClick:c,type:S.HeaderActionType.BACK},title:"Proposal"}),(0,o.jsxs)("div",{className:"flex flex-col py-6 px-7 max-h-[calc(100%-80px)] overflow-y-scroll",children:[(0,o.jsxs)("div",{className:"text-gray-600 dark:text-gray-200 text-sm mb-1",children:["#",M.proposal_id," \xb7"," ",(0,o.jsx)(eQ,{status:M.status})]}),(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 font-bold text-xl break-words",children:(null==M?void 0:M.title)??(null==M?void 0:null===(a=M.content)||void 0===a?void 0:a.title)}),M.status===eJ.PROPOSAL_STATUS_VOTING_PERIOD&&!R&&(0,o.jsx)(e7,{forceChain:f,forceNetwork:N}),(0,o.jsx)(ti,{proposal:M,activeChain:f,onVote:()=>{(null==w?void 0:w.watchWallet)?e2.o.setShowPopup(!0):T(!0)},currVote:V??"",isLoading:Z,hasMinStaked:R}),(0,o.jsx)("div",{className:"my-8",children:(0,o.jsx)(S.LineDivider,{size:"sm"})}),M.status!==eJ.PROPOSAL_STATUS_DEPOSIT_PERIOD&&q&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-full h-full flex items-center justify-center mb-8",children:(0,o.jsxs)("div",{className:"w-[180px] h-[180px] flex items-center justify-center relative",children:["success"!==H?(0,o.jsx)(eC.Z,{circle:!0,count:1,width:"180px",height:"180px"}):(0,o.jsx)(e_.PieChart,{data:X,lineWidth:20}),(0,o.jsx)("p",{className:"text-md dark:text-white-100 text-dark-gray font-bold absolute",children:"Current Status"})]})}),(0,o.jsx)(ts,{dataMock:X,chain:P}),(0,o.jsx)(ta,{tallying:J})]}),e3.includes(M.status)&&(null==Q?void 0:Q.address)&&(0,o.jsxs)("div",{className:`rounded-2xl ${eJ.PROPOSAL_STATUS_DEPOSIT_PERIOD===M.status?"":"mt-6"} h-18 w-full p-4 flex items-center justify-between roundex-xxl bg-white-100 dark:bg-gray-900`,children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)("div",{style:{backgroundColor:"#FFECA8",lineHeight:28},className:"relative h-10 w-10 rounded-full flex items-center justify-center text-lg",children:[(0,o.jsx)("span",{className:"leading-none",children:"\uD83D\uDC64"}),(0,o.jsx)("img",{src:P.chainSymbolImageUrl??E,onError:(0,eO._)(E),alt:"chain logo",width:"16",height:"16",className:"rounded-full absolute bottom-0 right-0"})]}),(0,o.jsxs)("div",{className:"flex flex-col ml-3",children:[(0,o.jsx)(eN.Z,{size:"md",color:"font-bold dark:text-white-100 text-gray-800",children:"Proposer"}),Q?(0,o.jsx)(eN.Z,{size:"xs",color:"font-medium text-gray-400",children:`${Q.address.slice(0,5)}...${Q.address.slice(-6)}`}):(0,o.jsx)(eC.Z,{count:1,height:"16px",width:"150px",className:"z-0"})]})]}),(null==Q?void 0:Q.url)&&(0,o.jsx)("button",{className:"flex items-center justify-center px-1",onClick:()=>window.open(null==Q?void 0:Q.url,"_blank"),children:(0,o.jsx)(ef.O,{size:18,className:"text-gray-400"})})]}),(0,o.jsx)("div",{className:"my-8",children:(0,o.jsx)(S.LineDivider,{size:"sm"})}),((null==M?void 0:M.description)||(null==M?void 0:null===(r=M.content)||void 0===r?void 0:r.description))&&(0,o.jsx)(eb.r,{description:(null==M?void 0:M.description)||(null==M?void 0:null===(i=M.content)||void 0===i?void 0:i.description),title:"Description",btnColor:L,forceChain:f})]}),(0,o.jsx)(eX,{refetchVote:G,proposalId:M.proposal_id,isProposalInVotingPeriod:U,showCastVoteSheet:O,setShowCastVoteSheet:T,forceChain:f,forceNetwork:N})]})})}),e6=[{key:"all",label:"All Proposals"},{key:eJ.PROPOSAL_STATUS_VOTING_PERIOD,label:"Voting in Progress"},{key:eJ.PROPOSAL_STATUS_PASSED,label:"Passed"},{key:eJ.PROPOSAL_STATUS_REJECTED,label:"Rejected"}],e8=(0,p.Pi)(e=>{let{onClick:t,governanceStore:s,delegationsStore:l,validatorsStore:a,unDelegationsStore:r,claimRewardsStore:i,chainTagsStore:d}=e,{status:c,data:x,fetchMore:u}=s.chainProposals,m=(0,eU.pb)(),[h,p]=(0,g.useState)(""),v=(0,_.s0)(),[f,j]=(0,g.useState)(!1),[b,w]=(0,g.useState)("all"),[O,E]=(0,g.useState)(!1),A=(0,eW.a7)(),R=m[A],D="loading"===c,L=ee.gb.allDenoms,I=l.delegationsForChain(A),M=a.validatorsForChain(A),U=r.unDelegationsForChain(A),V=i.claimRewardsForChain(A),{totalDelegation:F}=(0,n.nDu)(L,I,M,U,V,A),G=(0,g.useMemo)(()=>"cosmos"!==A&&"atomone-1"!==R.chainId||(null==F?void 0:F.gte(1)),[A,R.chainId,F]),B=(0,g.useMemo)(()=>null==x?void 0:x.filter(e=>"PROPOSAL_STATUS_DEPOSIT_PERIOD"!==e.status).reduce((e,t)=>{var s,l,a,r,i,o,n,d;return"all"===b?h?((null===(l=t.content)||void 0===l?void 0:null===(s=l.title)||void 0===s?void 0:s.toLowerCase().includes(h))||(null===(a=t.title)||void 0===a?void 0:a.toLowerCase().includes(h))||(null===(r=t.proposal_id)||void 0===r?void 0:r.toLowerCase().includes(h)))&&e.push(t):e.push(t):h||t.status!==b?t.status===b&&((null===(o=t.content)||void 0===o?void 0:null===(i=o.title)||void 0===i?void 0:i.toLowerCase().includes(h))||(null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(h))||(null===(d=t.proposal_id)||void 0===d?void 0:d.toLowerCase().includes(h)))&&e.push(t):e.push(t),e},[]),[b,h,x]),H=(0,g.useCallback)(e=>{w(e),j(!1)},[]);(0,g.useEffect)(()=>{let e=document.querySelector("#bottom");if(!e||(null==B?void 0:B.length)===0||"success"!==c)return;let t=new IntersectionObserver(e=>{e[0].isIntersecting&&u()},{root:null,rootMargin:"0px",threshold:1});return t.observe(e),()=>{t.disconnect()}},[u,null==B?void 0:B.length,c]);let{headerChainImgSrc:z}=(0,e0.Cd)();return(0,o.jsxs)("div",{className:"relative w-full panel-height enclosing-panel overflow-clip",children:[(0,o.jsx)(k.Z,{header:(0,o.jsx)(S.Header,{action:{onClick:()=>v(-1),type:S.HeaderActionType.BACK},imgSrc:z,onImgClick:()=>E(!0),title:"Governance"}),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eL.h,{}),(0,o.jsxs)("div",{className:"w-full flex flex-col pt-6 pb-2 px-7 ",children:[(0,o.jsx)("div",{className:"text-[28px] text-black-100 dark:text-white-100 font-bold",children:"Proposals"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 font-bold",children:["List of proposals in ",(null==R?void 0:R.chainName)??""]}),!G&&(0,o.jsx)(e7,{}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-6 mb-4",children:[(0,o.jsx)(eI.M,{placeholder:"Search proposals...",onChange:e=>{p(e.currentTarget.value.toLowerCase())},value:h,onClear:()=>p(""),inputClassName:N()("flex flex-grow text-base text-gray-600 dark:text-gray-200 outline-none bg-white-0",{"w-[50px]":(0,T.oj)()}),divClassName:"w-full flex h-10 bg-white-100 dark:bg-gray-900 rounded-[30px] py-2 pl-5 pr-[10px]"}),(0,o.jsx)("button",{className:"flex items-center justify-center h-10 bg-white-100 dark:bg-gray-900 rounded-full w-10 m-w-10 ml-3",style:{minWidth:40},onClick:()=>j(!0),children:(0,o.jsx)(eV.Z,{size:20,className:"dark:text-white-100 text-gray-800"})})]})]}),(0,o.jsxs)("div",{id:"governance-list",className:"pb-8 px-7",children:[(0,o.jsx)("div",{className:"rounded-2xl flex flex-col items-center w-full m-auto justify-center dark:bg-gray-900 bg-white-100",children:D?(0,o.jsx)(eM,{}):((null==B?void 0:B.length)??0)===0?(0,o.jsx)(y.S,{isRounded:!0,subHeading:h?"Please try again with something else":"",heading:h?"No results for “"+(0,eF.jr)(h)+"”":"No Proposals",src:P.r.Misc.Explore}):null==B?void 0:B.map((e,s)=>{var l;return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("div",{className:"p-4 cursor-pointer",onClick:()=>t(e.proposal_id),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("div",{className:N()("w-[272px]",{"!w-[calc(100%-40px)]":(0,T.oj)()}),children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 font-bold text-base break-words",children:(null==e?void 0:e.title)??(null==e?void 0:null===(l=e.content)||void 0===l?void 0:l.title)}),(0,o.jsxs)("div",{className:"text-gray-600 dark:text-gray-200 text-xs",children:["#",e.proposal_id," \xb7"," ",(0,o.jsx)(eQ,{status:e.status})]})]})}),(0,o.jsx)("img",{className:"ml-5",src:P.r.Misc.RightArrow})]})}),s<B.length-1?(0,o.jsx)(S.CardDivider,{}):null]},e.proposal_id)})}),(0,o.jsx)("div",{id:"bottom",className:"my-1"}),"fetching-more"===c?(0,o.jsx)("div",{className:"px-7 flex items-center justify-center",children:(0,o.jsx)(Z.T,{color:"white"})}):null]})]})}),(0,o.jsx)(C.Z,{isVisible:O,onClose:()=>E(!1),chainTagsStore:d}),(0,o.jsx)(q.Z,{isOpen:f,onClose:()=>j(!1),title:"Filter by",children:(0,o.jsx)("div",{className:"rounded-2xl flex flex-col items-center w-full justify-center dark:bg-gray-900 bg-white-100",children:e6.map((e,t)=>(0,o.jsxs)(g.Fragment,{children:[(0,o.jsxs)("button",{className:"flex items-center justify-between text-md font-bold p-4 w-full text-gray-800 dark:text-white-100",onClick:()=>H(e.key),children:[(0,o.jsx)("span",{children:e.label}),b===e.key?(0,o.jsx)(eD.f,{weight:"fill",size:24,className:"text-[#E18881]"}):null]},e.label),t===e6.length-1?null:(0,o.jsx)(S.CardDivider,{})]},e.label))})})]})}),e7=(0,p.Pi)(e=>{let{forceChain:t,forceNetwork:s}=e,l=(0,n.QSC)(t),a=ee.gb.allDenoms,[r]=(0,n.JsT)(a,t,s),i=(0,_.s0)(),d=(0,g.useCallback)(()=>{i("/stake")},[i]);return(0,o.jsxs)("div",{className:"flex mt-4 p-4 w-full flex-row justify-between items-center gap-2 dark:bg-gray-900 bg-white-100 rounded-[20px]",children:[(0,o.jsxs)("div",{className:"text-xs font-medium !leading-[19.2px] dark:text-white-100",children:[l.chainName," requires you to have ",!(0,T.oj)()&&(0,o.jsx)("br",{}),"at least ",(0,o.jsxs)("span",{className:"font-bold",children:["1 ",null==r?void 0:r.coinDenom," staked"]})," to start voting"]}),(0,o.jsxs)("button",{onClick:d,className:"rounded-full shrink-0 bg-gray-950 dark:bg-white-100 font-bold text-xs text-gray-100 py-[6px] px-[12px] dark:text-gray-950 !leading-[20px]",children:["Stake ",null==r?void 0:r.coinDenom]})]})});var e9=s("42152");function te(e){let{isOpen:t,onCloseHandler:s,onSubmitVote:l,selectedVote:a,error:r,feeText:i,loading:d,memo:c,setMemo:x,proposalId:u,refetchCurrVote:m,showLedgerPopup:h,ledgerError:p,gasOption:v,forceChain:f}=e,j=(0,n.a74)(),b=(0,g.useMemo)(()=>f||j,[j,f]);return((0,Q.X)(r),h)?(0,o.jsx)(e9.Z,{showLedgerPopup:h}):(0,o.jsx)(q.Z,{isOpen:t,onClose:s,title:"Review Transaction",className:"!p-0",children:(0,o.jsxs)("div",{className:"flex flex-col items-center w-[400px] gap-y-[16px] mt-[28px] mb-[40px] px-7",children:[(0,o.jsxs)("div",{className:N()("flex p-4 w-full bg-gray-50 dark:bg-gray-900 rounded-2xl"),children:[(0,o.jsx)("div",{className:"h-10 w-10 bg-green-300 rounded-full flex items-center justify-center",children:(0,o.jsx)(M.V,{size:16,className:"text-green-700"})}),(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start px-3",children:[(0,o.jsx)("div",{className:"text-xs text-gray-400 text-left",children:"Vote message"}),(0,o.jsxs)("div",{className:"text-base text-black-100 dark:text-white-100 font-medium",children:["Vote ",(0,o.jsx)("b",{children:a})," on ",(0,o.jsxs)("b",{children:["Proposal #",u]})]})]})]}),(0,o.jsx)(S.Memo,{value:c,onChange:e=>{x(e.target.value)}}),(0,o.jsx)(eN.Z,{size:"sm",className:"text-gray-400 dark:text-gray-600 justify-center",children:i}),(r??p)&&(0,o.jsx)(eB._,{text:(0,n.azN)(r??p??"",v,"vote")}),(0,o.jsx)(S.Buttons.Generic,{color:B.w.getChainColor(b),size:"normal",className:"w-full",title:"Vote",disabled:h,onClick:async()=>{void 0!==a&&await l(a)&&(s(),m())},children:d?(0,o.jsx)(Z.T,{color:B.w.white100}):"Approve"})]})})}let tt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"natural",t=(0,g.useRef)(null),[s,l]=(0,g.useState)(null),[a,r]=(0,g.useState)(null),[i,o]=(0,g.useState)(!1),n=(0,g.useCallback)(e=>{t.current&&(l(e.screenX),r(t.current.scrollLeft),o(!0))},[]),d=(0,g.useCallback)(l=>{if(t&&t.current&&(l.preventDefault(),l.stopPropagation(),null!==s&&null!==a&&i)){let r=s-l.screenX;t.current.scrollLeft="natural"===e?a-r:a+r}},[s,i,a,e]),c=(0,g.useCallback)(()=>{i&&(l(null),r(null),o(!1))},[i]);return{props:{onMouseDown:n,onMouseMove:d,onMouseUp:c,onMouseLeave:c},scrollRef:t,clickStartX:s,scrollStartX:a,isDragging:i}};function ts(e){var t,s,l;let{dataMock:a,chain:r}=e,{scrollRef:i,props:n}=tt(),d=(null===(s=Object.values(r.nativeDenoms))||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.coinDecimals)??E[null==r?void 0:null===(l=r.bip44)||void 0===l?void 0:l.coinType];return(0,o.jsx)("div",{className:"h-[52px]",children:(0,o.jsx)("div",{className:"flex items-start no-scrollbar overflow-y-auto whitespace-nowrap",ref:i,...n,children:a.map(e=>{let t="loading"===e.title;return(0,o.jsx)("div",{className:`px-3 py-2 dark:bg-gray-900 bg-white-100 rounded-[12px] mr-3${t?" w-[150px]":""}`,children:t?(0,o.jsx)(eC.Z,{count:2}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"rounded-[2px] w-3 h-3 mr-1",style:{backgroundColor:e.color}}),(0,o.jsx)("p",{className:"dark:text-white-100 text-gray-400 whitespace-nowrap text-xs font-bold",children:`${e.title} - ${e.percent}`})]}),(0,o.jsx)(eN.Z,{size:"xs",color:"text-gray-400 font-medium whitespace-nowrap",style:{lineHeight:"20px"},children:`${new Intl.NumberFormat("en-US").format(+Number(e.value/Math.pow(10,d)).toFixed(2))} ${r.denom}`})]})},e.color)})})})}var tl=s("36906");function ta(e){let{tallying:t}=e,[s,l]=(0,g.useState)("");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"rounded-2xl mt-6 h-18 w-full roundex-xxl bg-white-100 dark:bg-gray-900",children:t.map((e,t)=>(0,o.jsxs)(g.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,o.jsxs)("div",{className:"flex flex-row items-center",children:[(0,o.jsx)("p",{className:"text-md font-bold text-gray-800 dark:text-white-100",children:e.label}),(0,o.jsx)("button",{onClick:()=>l(e.label),className:"h-[18px] w-[18px]",children:(0,o.jsx)(tl.k,{size:18,className:"text-gray-400 ml-1"})})]}),e.value?(0,o.jsx)("p",{className:"text-sm font-bold text-gray-800 dark:text-white-100",children:`${Number(e.value).toFixed(2)}%`}):(0,o.jsx)(eC.Z,{count:1,width:"50px"})]},e.label),0===t&&(0,o.jsx)(S.CardDivider,{})]},e.label))}),(0,o.jsx)(q.Z,{isOpen:!!s,onClose:()=>l(""),title:s,closeOnBackdropClick:!0,children:(0,o.jsx)(eN.Z,{size:"sm",color:"text-gray-800 dark:text-white-100",children:"Turnout"===s?"Defined as the percentage of voting power already casted on a proposal  as a percentage of total staked tokens.":"Defined as the minimum percentage of voting power that needs to be cast on a proposal for the result to be valid."})})]})}var tr=s("18203");function ti(e){let{currVote:t,proposal:s,isLoading:l,activeChain:a,hasMinStaked:r,onVote:i}=e,[n,d]=(0,g.useState)();switch((0,g.useEffect)(()=>{let e=setInterval(()=>{let e=ey()();d(A(ey()(s.status===eJ.PROPOSAL_STATUS_DEPOSIT_PERIOD?s.deposit_end_time:s.voting_end_time).diff(e,"seconds")))},1e3);return()=>clearInterval(e)},[s,A]),s.status){case eJ.PROPOSAL_STATUS_VOTING_PERIOD:return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4",children:[(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-base font-bold",children:"Voting Starts"}),(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold",children:ey()(s.voting_start_time).format("MMM DD, YYYY")})]}),(0,o.jsx)(S.CardDivider,{}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4",children:[(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-base font-bold",children:"Voting Ends"}),(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold",children:ey()(s.voting_end_time).format("MMM DD, YYYY")})]}),(0,o.jsx)("div",{className:"px-4 pb-4 text-xs text-gray-600 dark:text-gray-200 min-h-[32px]",children:n&&`Ending in ${n}`})]}),l?(0,o.jsxs)("div",{className:"rounded-2xl mt-4 h-18 w-full p-4 flex bg-white-100 dark:bg-gray-900",children:[(0,o.jsx)(eC.Z,{count:1,className:"rounded-full mt-4 h-10 w-10"}),(0,o.jsxs)("div",{className:"ml-3 w-full",children:[(0,o.jsx)(eC.Z,{count:1,className:"h-6"}),(0,o.jsx)(eC.Z,{count:1,className:"h-5"})]})]}):null,t&&"NO_VOTE"!==t&&(0,o.jsxs)("div",{className:N()("flex p-4 w-[344px] mt-4 dark:bg-green-900 bg-green-300 border-2 dark:border-green-800 border-green-600 rounded-2xl"),children:[(0,o.jsx)("div",{className:"h-10 w-10 bg-green-400 rounded-full flex items-center justify-center",children:(0,o.jsx)(M.V,{size:16,className:"text-green-700"})}),(0,o.jsxs)("div",{className:"flex flex-col justify-center items-start px-3",children:[(0,o.jsx)("div",{className:"text-base text-white-100 text-left",children:"Vote submitted"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 font-medium",children:["Voted ",t]})]})]}),(0,o.jsx)(S.Buttons.Generic,{color:B.w.getChainColor(a),size:"normal",className:"w-[344px] py-4 mt-4",onClick:()=>i(),disabled:!r,children:(0,o.jsxs)("div",{className:"flex justify-center text-white-100 items-center",children:[(0,o.jsx)(tr.Z,{size:20,className:"mr-2"}),(0,o.jsx)("span",{children:"Vote"})]})})]});case eJ.PROPOSAL_STATUS_DEPOSIT_PERIOD:return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4",children:[(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-base font-bold",children:"Deposit Period Ends"}),(0,o.jsx)("div",{className:"text-black-100 dark:text-white-100 text-sm font-bold",children:ey()(s.deposit_end_time).format("MMM DD, YYYY")})]}),n&&(0,o.jsx)("div",{className:"px-4 pb-4 text-xs text-gray-600 dark:text-gray-200 min-h-[32px]",children:n&&`Ending in ${n}`})]})});case eJ.PROPOSAL_STATUS_PASSED:case eJ.PROPOSAL_STATUS_FAILED:case eJ.PROPOSAL_STATUS_REJECTED:return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"rounded-2xl bg-white-100 dark:bg-gray-900 flex flex-col mt-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[(0,o.jsx)("div",{className:"text-gray-600 w-[200px] dark:text-gray-200 text-xs font-bold",children:"Results"}),(0,o.jsx)("div",{className:"text-gray-600 dark:text-gray-200 text-xs font-bold"})]}),(0,o.jsx)("div",{className:"flex flex-col justify-center gap-3 p-4",children:W(s.tally||s.final_tally_result).map(e=>(0,o.jsxs)("div",{className:N()("flex relative overflow-clip border-2 rounded-2xl",e.selectedBorderCSS),children:[(0,o.jsx)("div",{className:N()("text-black-100 dark:text-white-100 font-bold py-2 z-10 flex-1",e.selectedBorderCSS),children:(0,o.jsx)("span",{className:"ml-4 max-h-10",children:e.label})}),(0,o.jsx)("div",{className:N()("text-black-100 py-[10px] dark:text-white-100 shrink-0",e.selectedBorderCSS),children:(0,o.jsx)("span",{className:"absolute right-4 font-bold",children:e.percentage.toFixed(2)})}),(0,o.jsx)("div",{style:{width:(3.12*e.percentage).toString()+"px"},className:N()("h-10 absolute l-0 rounded-xl",e.selectedBackgroundCSS)})]},e.label))})]})})}return(0,o.jsx)(o.Fragment,{})}let to=(0,p.Pi)(e=>{let{governanceStore:t,chainTagsStore:s}=e,[l,a]=(0,g.useState)();return(0,h.$)({page:"governance",queryStatus:t.chainProposals.status,op:"governancePageLoad",description:"loading state on governance page"}),void 0===l?(0,o.jsx)(e8,{onClick:e=>a(e),governanceStore:t,delegationsStore:j.xO,validatorsStore:j.fe,unDelegationsStore:j.GO,claimRewardsStore:j.eq,chainTagsStore:s}):(0,o.jsx)(e5,{governanceStore:t,selectedProp:l,onBack:()=>a(void 0)})}),tn=(0,p.Pi)(e=>{let{governanceStore:t,chainTagsStore:s}=e,[l,a]=(0,g.useState)(),{data:r,status:i,shouldUseFallback:n,fetchMore:d}=t.chainProposals;(0,h.$)({page:"governance",queryStatus:i,op:"governancePageLoad",description:"loading state on governance page"});let c=e=>{let t=null==e?void 0:e.status;switch(null==e?void 0:e.status){case eJ.PROPOSAL_STATUS_EXECUTED:t=eT.EXECUTED;break;case eJ.PROPOSAL_STATUS_REJECTED:t=eT.REJECTED;break;case eJ.PROPOSAL_STATUS_PASSED:t=eT.PASSED;break;case eJ.PROPOSAL_STATUS_IN_PROGRESS:case eJ.PROPOSAL_STATUS_VOTING_PERIOD:t=eT.OPEN}return{...e,status:t}},x=(0,g.useMemo)(()=>n?r:null==r?void 0:r.map(e=>c(e)),[r,n]);return void 0===l?(0,o.jsx)(eZ,{proposalListStatus:i,proposalList:x,shouldPreferFallback:n,onClick:e=>a(e),chainTagsStore:s,fetchMore:d}):(0,o.jsx)(eR,{selectedProp:l,onBack:()=>a(void 0),proposalList:x,shouldUseFallback:n})}),td=function(){(0,m.a)(x.q.Governance);let e=(0,n.a74)(),t=(0,n.Xmk)({checkForExistenceType:"comingSoon",feature:"governance",platform:"Extension"});return e===u.HW?(0,o.jsx)(e$,{governanceStore:f.P,chainTagsStore:v.HN}):t?(0,o.jsx)(c.h,{chainTagsStore:v.HN,title:"Governance",bottomNavLabel:d.W.Governance}):"neutron"===e?(0,o.jsx)(tn,{governanceStore:f.P,chainTagsStore:v.HN}):(0,o.jsx)(to,{governanceStore:f.P,chainTagsStore:v.HN})}}}]);