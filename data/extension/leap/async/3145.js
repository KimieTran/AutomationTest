!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="518c978c-6b30-40df-a7dc-2baad9d8796d",e._sentryDebugIdIdentifier="sentry-dbid-518c978c-6b30-40df-a7dc-2baad9d8796d")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["3145"],{85406:function(e,t,a){a.d(t,{a:function(){return f},u:function(){return m}});var n=a(21950),s=a(2826),r=a(88054),l=a(2784),i=a(22014),o=a(72565),c=a.n(o),d=a(53108),u=a(58551);async function m(e,t,a,n){let r=s.tgY.create(e,s.oCA.secret.chainId,n);return!!(await r.getBalance(n,a,t)).balance}function f(){let e=(0,u.E)(),t=(0,n.VMC)(),a=n.rNU.useOperateCosmosTx(),{setViewingKeys:o}=(0,n.WdY)();return(0,l.useCallback)(async(l,u,f,g,w,y)=>{if(!i.M8.password)throw Error("Password not set");let x=await e(),h=s.KQf.create(l??"",u,x),v=null==y?void 0:y.key;if(w){if(!await m(l??"",v??"",g,f))return{validKey:!1,error:"Invalid viewing key",key:v}}else try{var b,E,p,_,j;let{txStatus:e,viewingKey:s}=await h.createViewingKey(f,g,t,{key:v,gasLimit:null==y?void 0:y.gasLimit,feeDenom:null==y?void 0:y.feeDenom});if(0!==e.code)return{validKey:!1,error:e.rawLog};a({txHash:e.transactionHash,txType:n.pb0.SecretTokenTransaction,metadata:{contract:g},feeDenomination:"uscrt",feeQuantity:(null===(j=e.tx)||void 0===j?void 0:null===(_=j.auth_info)||void 0===_?void 0:null===(p=_.fee)||void 0===p?void 0:null===(E=p.amount)||void 0===E?void 0:null===(b=E[0])||void 0===b?void 0:b.amount)??"0.01",chainId:u}),v=s}catch(e){return{validKey:!1,error:"Unable to create viewing key"}}let k=(0,r.HI)(v,i.M8.password),T=(await c().storage.local.get([d.rg]))[d.rg];if(T){let e=e=>({...T,[f]:{...T[f],[g]:e?k:v}});await c().storage.local.set({[d.rg]:e(!0)}),o(e(!1))}else{let e=e=>({[f]:{[g]:e?k:v}});await c().storage.local.set({[d.rg]:e(!0)}),o(e(!1))}return{validKey:!0,error:null,key:v}},[e,t,a,o])}},58551:function(e,t,a){a.d(t,{E:function(){return o}});var n=a(21950),s=a(88054),r=a(2784),l=a(44318),i=a(22014);function o(){let e=(0,n.rTu)();return(0,r.useCallback)(async()=>{if(!i.M8.password)throw Error("Password not set");let t=(0,s.pe)(null==e?void 0:e.cipher,i.M8.password);return new l.Wallet(t,{hdAccountIndex:null==e?void 0:e.addressIndex})},[e])}},13022:function(e,t,a){a.r(t),a.d(t,{default:()=>C});var n,s,r=a("52322"),l=a("21950");a("55968"),a("95238"),(n=s||(s={})).SEND_TX="send-tx-to-background",n.REQUEST_SIGN_DIRECT="request-sign-direct",n.REQUEST_SIGN_AMINO="request-sign-amino",n.GET_KEY="get-key",n.GET_KEYS="get-keys",n.ENABLE_ACCESS="enable-access",n.GET_SUPPORTED_CHAINS="get-supported-chains",n.GET_CONNECTION_STATUS="get-connection-status",n.ADD_SUGGESTED_CHAIN="add-suggested-chain",n.DISCONNECT="disconnect",n.GET_SECRET20_VIEWING_KEY="get-secret20-viewing-key",n.SUGGEST_TOKEN="suggest-token",n.SUGGEST_CW20_TOKEN="suggest-cw20-token",n.UPDATE_SECRET20_VIEWING_KEY="update-secret20-viewing-key",n.GET_PUBKEY_MSG="get-pubkey-msg",n.GET_TX_ENCRYPTION_KEY_MSG="get-tx-encryption-key-msg",n.REQUEST_ENCRYPT_MSG="request-encrypt-msg",n.REQUEST_DECRYPT_MSG="request-decrypt-msg",n.REQUEST_VERIFY_ADR36_AMINO_SIGN_DOC="request-verify-adr36-amino-sign-doc",n.REQUEST_SIGN_EIP712="request-sign-eip712";var i=a("2826"),o=a("26089"),c=a("89178"),d=a("19623"),u=a("69816"),m=a("53108"),f=a("79533"),g=a("85406"),w=a("75958"),y=a("2784"),x=a("10289"),h=a("42799"),v=a("48346"),b=a("46103"),E=a("53345"),p=a("50292"),_=a("48534"),j=a("37906"),k=a("72565"),T=a.n(k),S=a("94685");let N=(0,w.Pi)(e=>{let{handleRejectBtnClick:t}=e,a=(0,l.DI5)(),n=(0,g.a)(),w=(0,l.hU2)(),k=(0,x.s0)(),N=(0,l.yHI)("secret","mainnet",a),C=(0,l.lSw)(),I=(0,l.qZl)(),[A,G]=(0,y.useState)(""),[D,R]=(0,y.useState)(!1),[K,U]=(0,y.useState)(!1),[B,O]=(0,y.useState)(!1),[P,Y]=(0,y.useState)(!1),[L,M]=(0,y.useState)(!1),[W,Q]=(0,y.useState)(""),[z,F]=(0,y.useState)({decimals:0,name:"",symbol:""}),[q,V]=(0,y.useState)({contractAddress:"",address:"",viewingKey:"",type:"",chainId:"secret-4"}),$=q.type!==s.SUGGEST_CW20_TOKEN;(0,y.useEffect)(()=>{T().storage.local.get([m.RO]).then(async e=>{let t=e[m.RO],{lcdUrl:a}=N(!1,(await (0,f._d)())[t.chainId],"mainnet");if(t&&a)try{if(Y(!0),V(t),Q(""),t.type!==s.SUGGEST_CW20_TOKEN){if(null==w?void 0:w[t.contractAddress]){let e=w[t.contractAddress];F({name:e.name,symbol:e.symbol,decimals:e.decimals})}else{let e=i.tgY.create(a,t.chainId,t.address),n=await e.getTokenParams(t.contractAddress);n.token_info&&F(n.token_info)}}else{let e=await (0,E.s)(a,t.contractAddress);if("string"==typeof e&&e.includes("Invalid")){Q("Invalid Contract Address");return}F({name:e.name,symbol:e.symbol,decimals:e.decimals})}}catch(e){if(e instanceof c.d7){var n,r;Q((null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)??e.message)}else Q(e.message);(0,o.Tb)(e,{tags:j.r})}finally{Y(!1)}})},[N,w]);let H=(0,y.useCallback)(async()=>{U(!0);let{lcdUrl:e=""}=N(!1,(await (0,f._d)())[q.chainId],"mainnet"),t=await (0,g.u)(e,A,q.contractAddress,q.address);return O(!t),U(!1),t},[A,N,q.address,q.chainId,q.contractAddress]),Z=(0,y.useCallback)(async()=>{if($){if(A&&!await H())return;M(!0);let e=(await (0,f._d)())[q.chainId],{lcdUrl:t=""}=N(!1,e,"mainnet");if(await n(t,q.chainId,q.address,q.contractAddress,q.type===s.UPDATE_SECRET20_VIEWING_KEY||D&&!!A,{key:q.viewingKey||A}),!w[q.contractAddress]){let t={name:z.symbol,symbol:q.contractAddress,decimals:z.decimals,coinGeckoId:"",icon:""};await I(q.contractAddress,t,e)}}else{M(!0);let e=(await (0,f._d)())[q.chainId],a={coinDenom:z.symbol,coinMinimalDenom:q.contractAddress,coinDecimals:z.decimals,coinGeckoId:"",icon:"",chain:e};window.removeEventListener("beforeunload",t),await h.Xy.setBetaCW20Denoms(q.contractAddress,a,e);let n=[...h.bI.getEnabledCW20DenomsForChain(e),q.contractAddress];await h.bI.setEnabledCW20Denoms(n,e),v.jZ.loadBalances()}window.removeEventListener("beforeunload",t),await T().storage.local.set({[m.u1]:{data:"Approved"}}),setTimeout(async()=>{await T().storage.local.remove([m.RO]),await T().storage.local.remove(m.u1),M(!1),(0,_.oj)()?k("/home"):window.close()},50)},[D,z.decimals,z.symbol,n,A,N,$,q.address,q.chainId,q.contractAddress,q.type,q.viewingKey,w,k,C,I,H]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(S.X6,{text:"Adding token"}),(0,r.jsx)(S.GL,{text:`This will allow this token to be viewed within ${(0,p.l)()?"Compass":"Leap"} Wallet`}),(0,r.jsx)(S.QS,{address:q.contractAddress??""}),z&&!P&&(0,r.jsx)(S.P6,{name:z.name??"",symbol:z.symbol??"",decimals:z.decimals??0})]}),z&&!P&&(0,r.jsxs)("div",{className:"my-4 w-full",children:[D&&(0,r.jsxs)("div",{className:`relative w-full flex items-center border rounded-xl flex h-12 bg-white-100 dark:bg-gray-900 py-2 pl-5 pr-[10px] ${B&&A?"border-red-300":"border-gray-500"}`,children:[(0,r.jsx)("input",{placeholder:"viewing key",className:"flex flex-grow text-base dark:text-white-100 text-gray-400 outline-none bg-white-0 placeholder-gray-400::placeholder",value:A,onChange:e=>G(e.currentTarget.value),autoComplete:"off"}),K?(0,r.jsx)(d.T,{color:b.w.white100,className:"h-6 y-6"}):null]}),B&&A&&(0,r.jsx)(u.Z,{size:"sm",className:"mt-1",color:"text-red-300",children:"Invalid Viewing key provided"})]}),(0,r.jsxs)(S.$_,{error:W,isFetching:P,children:[$&&(0,r.jsxs)("div",{className:"flex mb-4 w-full items-center cursor-pointer ml-2",children:[(0,r.jsx)("input",{className:"h-4 w-4 border border-gray-300 rounded-xl",type:"checkbox",value:"",checked:D,onChange:()=>R(!D),id:"advancedFeature"}),(0,r.jsx)("label",{className:"form-check-label inline-block dark:text-white-100 text-gray-900 ml-2 text-md",htmlFor:"advancedFeature",children:"(Advanced) Import my own viewing key"})]}),(0,r.jsx)(S.No,{error:W,rejectBtnClick:t,rejectBtnText:"Reject",confirmBtnClick:Z,confirmBtnText:L||K?(0,r.jsx)(d.T,{color:b.w.white100}):"Approve",isConfirmBtnDisabled:(null==W?void 0:W.length)!==0||B&&(null==A?void 0:A.length)>0||!z.name})]})]})});function C(){return(0,r.jsx)(S.zb,{suggestKey:m.RO,children:e=>{let{handleRejectBtnClick:t}=e;return(0,r.jsx)(N,{handleRejectBtnClick:t})}})}},94685:function(e,t,a){a.d(t,{QS:()=>p,GL:()=>w,X6:()=>g,zb:()=>E,No:()=>m,P6:()=>j,$_:()=>i});var n=a("52322"),s=a("86200"),r=a("19623"),l=a("2784");function i(e){let{children:t,error:a,isFetching:l}=e;return(0,n.jsxs)("div",{className:"w-full flex flex-col flex-1 justify-end items-center box-border",children:[a?(0,n.jsx)("div",{className:"my-2",children:(0,n.jsx)(s._,{text:a})}):null,l?(0,n.jsx)(r.T,{color:"#E18881"}):(0,n.jsx)(n.Fragment,{children:t})]})}var o=a("39279"),c=a("94184"),d=a.n(c),u=a("46103");function m(e){let{error:t,rejectBtnClick:a,rejectBtnText:s,confirmBtnClick:r,confirmBtnText:l,isConfirmBtnDisabled:i}=e;return(0,n.jsxs)("div",{className:d()("flex flex-row justify-between w-full",{"mb-6":!!t}),children:[(0,n.jsx)(o.Buttons.Generic,{style:{height:"48px",background:u.w.gray900,color:u.w.white100},onClick:a,children:s}),(0,n.jsx)(o.Buttons.Generic,{style:{height:"48px",background:u.w.cosmosPrimary,color:u.w.white100,cursor:"pointer"},className:"ml-3 bg-gray-800",onClick:r,disabled:i,children:l})]})}var f=a("69816");function g(e){let{text:t}=e;return(0,n.jsx)(f.Z,{size:"lg",className:"font-bold mt-5",children:t})}function w(e){let{text:t}=e;return(0,n.jsx)(f.Z,{size:"xs",className:"font-bold text-center mt-[2px] max-w-[250px]",color:"text-gray-800 dark:text-gray-600 mb-2",children:t})}var y=a("53108"),x=a("10289"),h=a("48534"),v=a("72565"),b=a.n(v);function E(e){let{children:t,suggestKey:a}=e,s=(0,x.s0)(),r=(0,l.useCallback)(async()=>{await b().storage.local.set({[y.u1]:{error:"Rejected by the user."}}),setTimeout(async()=>{await b().storage.local.remove([a]),await b().storage.local.remove(y.u1),(0,h.oj)()?s("/home"):window.close()},10)},[s,a]);return(0,l.useEffect)(()=>(window.addEventListener("beforeunload",r),b().storage.local.remove(y.u1),function(){window.removeEventListener("beforeunload",r)}),[r]),(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsxs)("div",{className:"panel-width panel-height max-panel-height enclosing-panel",children:[(0,n.jsx)("div",{className:"w-full h-1 rounded-t-2xl",style:{backgroundColor:u.w.cosmosPrimary}}),(0,n.jsx)("div",{className:d()("relative h-full flex flex-col justify-between items-center pt-4 pb-10",{"px-4":(0,h.oj)(),"px-7":!(0,h.oj)()}),children:t({handleRejectBtnClick:r})})]})})}function p(e){let{address:t,img:a}=e;return(0,n.jsx)(o.GenericCard,{title:(0,n.jsx)("span",{className:"text-[15px]",children:"Contract Address"}),subtitle:(0,n.jsx)("span",{className:"break-all",children:t}),className:"h-[80px] py-8 my-5",img:a??null,size:"sm",isRounded:!0})}var _=a("41477");function j(e){let{name:t,symbol:a,decimals:s}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-[10px] bg-white-100 dark:bg-gray-900 rounded-2xl p-4 w-full",children:[(0,n.jsx)(_.sr,{children:"Coin Name"}),(0,n.jsx)(_.B4,{children:t}),_.iz,(0,n.jsx)(_.sr,{children:"Coin Symbol"}),(0,n.jsx)(_.B4,{children:a}),_.iz,(0,n.jsx)(_.sr,{children:"Coin Decimals"}),(0,n.jsx)(_.B4,{children:s})]})}},53345:function(e,t,a){a.d(t,{s:function(){return r}});var n=a(55334),s=a(48834).Buffer;async function r(e,t){let a=`${e}/cosmwasm/wasm/v1/contract/${t}/smart/${s.from('{"token_info":{}}').toString("base64")}`,{data:r}=await n.Z.get(a);return r.error&&r.error.toLowerCase().includes("decoding bech32 failed")?"Invalid Contract Address":r.data}},56052:function(){}}]);