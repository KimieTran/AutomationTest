!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=(new e.Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="3822ef07-61d6-4837-8fe8-671b78406e68",e._sentryDebugIdIdentifier="sentry-dbid-3822ef07-61d6-4837-8fe8-671b78406e68")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["9218"],{25089:function(e,i,s){s.r(i),s.d(i,{default:()=>D});var l=s("52322"),a=s("21950"),n=s("2826"),t=s("39279"),o=s("63161"),r=s("94184"),d=s.n(r),c=s("41477"),h=s("76464"),u=s("19623"),m=s("69816"),x=s("53108"),p=s("79533"),v=s("76131"),y=s("71603"),g=s("57124"),f=s("2784");let w=()=>{let[e,i]=(0,f.useState)(()=>({width:window.innerWidth,height:window.innerHeight}));return(0,f.useEffect)(()=>{function e(){i({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e};var b=s("98851"),j=s("10289"),N=s("46103"),k=s("32374"),I=s("50292"),C=s("48534"),z=s("72565"),E=s.n(z),M=s("70734");function Z(e){let{handleCancel:i,origin:s}=e,{theme:a}=(0,t.useTheme)();return(0,l.jsxs)("div",{className:"panel-height enclosing-panel relative w-screen max-w-3xl h-full self-center p-6 pb-0",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-4 items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2 items-center px-6 pb-4",children:[(0,l.jsx)("img",{src:b.r.Misc.Connect,width:80,height:80}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-0.5 items-center",children:[(0,l.jsx)(m.Z,{size:"lg",color:"text-black-100 dark:text-white-100",className:"font-bold text-center",children:s}),(0,l.jsx)(m.Z,{size:"md",color:"text-gray-800 dark:text-gray-200",className:"font-bold text-center",children:"wants to connect to your wallet"})]}),(0,l.jsxs)("div",{className:"flex gap-x-1 items-center",children:[(0,l.jsx)(m.Z,{size:"md",color:"text-green-500",className:"font-bold text-center",children:s}),(0,l.jsx)("img",{src:b.r.Activity.TxSwapSuccess,width:16,height:16})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-4 items-center rounded-[13px] dark:bg-gray-850 bg-gray-100 p-4 border border-orange-500",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:b.r.Misc.GreenEye,width:40,height:40}),(0,l.jsx)("img",{src:b.r.Activity.TxSwapFailure,width:18,height:18,className:"absolute top-0 left-[31px]"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2 items-center",children:[(0,l.jsx)(m.Z,{size:"md",color:"text-gray-800 dark:text-gray-200",className:"font-bold text-center",children:"You are watching this wallet."}),(0,l.jsx)(m.Z,{size:"md",color:"text-gray-800 dark:text-gray-200",className:"font-medium text-center",children:"Import the wallet using your recovery phrase to manage assets and sign transactions."})]})]})]}),(0,l.jsx)(t.Buttons.Generic,{size:"normal",color:a===t.ThemeName.DARK?N.w.gray900:N.w.gray100,className:"w-[344px] absolute bottom-0",onClick:i,children:"Cancel"})]})}let L=e=>{let{name:i}=e;return(0,l.jsxs)("div",{className:"flex flex-col align-middle justify-center m-auto",children:[(0,l.jsx)(m.Z,{size:"lg",className:"font-bold mt-3 mx-2 justify-center align-middle truncate",children:i}),(0,l.jsx)(m.Z,{size:"md",className:"justify-center align-middle mb-2",color:"text-gray-800 dark:text-gray-200",children:"wants to connect to your wallet"})]})},T=e=>{let{name:i}=e;return(0,l.jsxs)("div",{className:"flex flex-row align-middle justify-center m-auto",children:[(0,l.jsx)("img",{src:b.r.Misc.LockGreen,className:"h-[14px] mr-2 m-auto"}),(0,l.jsx)(m.Z,{size:"md",className:"justify-center align-middle",color:"text-green-500",children:i})]})};function _(){E().runtime.sendMessage({type:"popup-closed"}),setTimeout(()=>{window.close()},50)}async function S(e){try{await E().runtime.sendMessage(e)}catch(e){}}let D=()=>{let[e,i]=(0,f.useState)([]),s=(0,j.s0)(),{width:r}=w(),[z,D]=(0,f.useState)([]),[A,G]=(0,f.useState)(!1),[R,K]=(0,f.useState)(!1),[H,$]=(0,f.useState)([]),B=(0,a.rTu)(),{chains:P}=(0,a._IL)(),W=(0,g.a)(),q=(0,y.Af)(),F=(0,f.useRef)(!1),O=(0,f.useMemo)(()=>{var i,s,l,a,t;if((0,I.l)())return{type:"chains",chains:[{chain:"seiTestnet2",payloadId:"123"}]};if(z.every(e=>["movement","movementBardock","aptos"].includes(e.chain)))return{type:"address",chains:z,address:(null==e?void 0:null===(a=e[0])||void 0===a?void 0:null===(l=a.addresses)||void 0===l?void 0:l[null===(s=z[0])||void 0===s?void 0:s.chain])||""};if(z.every(e=>{var i;return null===(i=P[e.chain])||void 0===i?void 0:i.evmOnlyChain})&&(null==e?void 0:null===(i=e[0])||void 0===i?void 0:i.pubKeys)){let i=(0,n.DiR)(e[0].pubKeys[null===(t=z[0])||void 0===t?void 0:t.chain]||e[0].pubKeys.evmos);return{type:"address",chains:z,address:i}}return{type:"chains",chains:z.reduce((e,i)=>(!e.find(e=>e.chain===i.chain)&&e.push(i),e),[])}},[P,z,e]);(0,f.useEffect)(()=>{(async function s(){var s;let l=e[0];if(!l||!(null==O?void 0:O.chains)||F.current)return;let a=(null===(s=O.chains.filter(i=>{var s,l,a,n;let t=null==e?void 0:null===(l=e[0])||void 0===l?void 0:null===(s=l.addresses)||void 0===s?void 0:s[i.chain],o=null==e?void 0:null===(n=e[0])||void 0===n?void 0:null===(a=n.pubKeys)||void 0===a?void 0:a[i.chain];return P[i.chain]&&!t||!o}))||void 0===s?void 0:s.map(e=>e.chain))??[];if(!(null==a?void 0:a.length))return;let n={};for await(let e of a)n[e]=P[e];let t=await q(l,a,"UPDATE",void 0,n);F.current=!0,i(e.map(e=>{if(!t)return e;let i=t[e.id];return i?i:e}))})()},[O,e]);let U=(0,f.useCallback)(async()=>{if(!H[0]){(0,C.oj)()?s("/home"):_();return}for(let i of H){var e;let s=(null==i?void 0:i.validChainIds)??[null==i?void 0:null===(e=i[0])||void 0===e?void 0:e.chainId];await S({type:"chain-approval-rejected",payload:{origin,chainsIds:s,payloadId:i.payloadId,ecosystem:i.ecosystem},status:"failed"})}window.removeEventListener("beforeunload",U),(0,C.oj)()?s("/home"):_()},[s,H]);async function V(e,i){if(i.id===E().runtime.id&&"enable-access"===e.type){let i=await E().storage.local.get([x.vA,x.pV]),l=i[x.vA]||[],a=i[x.pV],n=e.payload.validChainIds??[e.payload.chainId??""],{isNewChainPresent:t}=await (0,p.qe)(n,l,{origin:e.payload.origin},a.id);if(t){$(i=>[...i,e.payload]);let i=await (0,p._d)();D(s=>[...s,...n.map(s=>({chain:i[s],payloadId:e.payload.payloadId}))]),K(!0)}else await E().runtime.sendMessage({type:"chain-enabled",payload:{origin,chainsIds:n,payloadId:e.payload.payloadId,ecosystem:e.payload.ecosystem,ethMethod:e.payload.ethMethod,isLeap:e.payload.isLeap},status:"success"}),(0,C.oj)()?s("/home"):_()}}(0,f.useEffect)(()=>{B&&i([B])},[B]),(0,f.useEffect)(()=>(window.addEventListener("beforeunload",U),E().storage.local.remove(x.u1),()=>{window.removeEventListener("beforeunload",U)}),[H]),(0,f.useEffect)(()=>(E().runtime.sendMessage({type:"approval-popup-open"}),E().runtime.onMessage.addListener(V),()=>{E().runtime.onMessage.removeListener(V)}),[]);let Y=async()=>{for await(let s of H){var i;let l=s?(null==s?void 0:s.validChainIds)??[null===(i=s[0])||void 0===i?void 0:i.chainId]:void 0;if(!l)return;let a=e.map(e=>e.id);await (0,M.E)(l,a,s.origin),await S({type:"chain-enabled",payload:{origin,chainsIds:l,payloadId:s.payloadId,ecosystem:s.ecosystem,ethMethod:s.ethMethod,isLeap:s.isLeap},status:"success"})}window.removeEventListener("beforeunload",U),(0,C.oj)()?s("/home"):_()};(0,v.$)({page:"approve-connection",queryStatus:R?"success":"loading",op:"approveConnectionPageLoad",description:"Load time for approve connection page"});if(null==B?void 0:B.watchWallet){var J;return(0,l.jsx)(Z,{origin:null==H?void 0:null===(J=H[0])||void 0===J?void 0:J.origin,handleCancel:U})}return R?(0,l.jsx)("div",{className:"relative w-screen max-w-3xl h-full self-center px-5 enclosing-panel",children:(0,l.jsxs)("div",{className:"flex flex-col mx-auto max-w-2xl box-border h-full overflow-scroll pt-5 pb-[72px]",children:[(0,l.jsx)(h.h,{HeadingComponent:()=>{var e;return(0,l.jsx)(L,{name:(null==H?void 0:null===(e=H[0])||void 0===e?void 0:e.origin)||"Connect Leap"})},SubTitleComponent:()=>{var e;return(0,l.jsx)(T,{name:null==H?void 0:null===(e=H[0])||void 0===e?void 0:e.origin})}}),(0,l.jsxs)("div",{className:d()("bg-white-100 dark:bg-gray-900 rounded-2xl py-4",{"h-[405px]":A,"h-[230px]":!A&&"chains"===O.type&&O.chains&&O.chains.length>1,"h-[100px]":"chains"===O.type&&O.chains&&O.chains.length<=1}),children:[(0,l.jsxs)("div",{className:d()("flex items-center px-5","chains"==O.type?"mb-4":"mb-0",{"cursor-pointer":A}),onClick:()=>G(!1),children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("img",{src:b.r.Misc.WalletIconTeal,className:"h-[20px] w-[20px] mr-3"}),(0,l.jsx)(m.Z,{size:"md",className:"text-black-100 dark:text-white-100 font-bold",children:`${"chains"===O.type?"Connecting ":""}${(0,k.k)((null==B?void 0:B.name)??"")}`}),"chains"===O.type&&O.chains&&O.chains.length>1&&A&&(0,l.jsx)(o.U,{size:16,className:"ml-auto text-gray-500"})]}),"address"===O.type?(0,l.jsx)(m.Z,{className:"ml-auto font-bold",size:"sm",color:"text-black-100 dark:text-white-100",children:(0,a.Hnh)(O.address)}):null]}),"chains"===O.type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:d()("flex flex-col overflow-auto",{"h-[340px] mb-2":A,"h-[120px] mb-2":!A&&z.length>2,"h-[70px] mb-2":!A&&2===z.length,"h-[16px] mb-4":z.length<=1}),children:O.chains.map((i,s)=>{var t,o,r,h,u,x,p,v,y,g,w,b;let j;let N=s===O.chains.length-1;if(null==e?void 0:null===(o=e[0])||void 0===o?void 0:null===(t=o.addresses)||void 0===t?void 0:t[i.chain])j=(null===(u=P[i.chain])||void 0===u?void 0:u.evmOnlyChain)?(0,n.DiR)(null==e?void 0:null===(p=e[0])||void 0===p?void 0:null===(x=p.pubKeys)||void 0===x?void 0:x[i.chain]):null==e?void 0:null===(y=e[0])||void 0===y?void 0:null===(v=y.addresses)||void 0===v?void 0:v[i.chain];else{let s=null==e?void 0:null===(w=e[0])||void 0===w?void 0:null===(g=w.pubKeys)||void 0===g?void 0:g.evmos;j=(null===(b=P[i.chain])||void 0===b?void 0:b.evmOnlyChain)&&s?(0,n.DiR)(s):""}return(0,l.jsxs)(f.Fragment,{children:[(0,l.jsxs)("div",{className:d()("flex items-center px-5",{"py-2.5":O.chains.length>1}),style:{display:s<=2||A?"flex":"none"},children:[(0,l.jsx)("img",{src:(null===(r=P[i.chain])||void 0===r?void 0:r.chainSymbolImageUrl)??W,className:"h-[16px] w-[16px] mr-2"}),(0,l.jsx)(m.Z,{size:"xs",color:"text-gray-400",children:(null===(h=P[i.chain])||void 0===h?void 0:h.chainName)??""}),(0,l.jsx)(m.Z,{className:"ml-auto",size:"xs",color:"text-gray-400",children:(0,a.Hnh)(j)})]}),(0,l.jsx)("div",{className:"px-5",style:{display:s<=1||A?"block":"none"},children:N?null:c.iz})]},i.payloadId)})}),!A&&O.chains.length>3&&(0,l.jsx)("button",{onClick:()=>G(!0),className:"flex w-full px-5",children:(0,l.jsx)(m.Z,{size:"xs",color:"text-osmosisPrimary",className:"ml-auto",children:`view more (${O.chains.length-3})`})})]})]}),A?null:(0,l.jsxs)("div",{className:"flex flex-col gap-y-[10px] bg-white-100 dark:bg-gray-900 rounded-2xl px-4 py-5 mt-4",children:[(0,l.jsx)(m.Z,{size:"xs",color:"text-gray-300 mb-1",children:"This app will be able to"}),(0,l.jsxs)(m.Z,{size:"sm",children:[(0,l.jsx)("img",{src:b.r.Misc.GreenTick,className:"h-[12px] mr-3 my-auto"}),"View your wallet balance and activity"]}),(0,l.jsxs)(m.Z,{size:"sm",children:[(0,l.jsx)("img",{src:b.r.Misc.GreenTick,className:"h-[12px] mr-3 my-auto"}),"Request approval for transactions."]}),(0,l.jsx)("div",{className:"my-1 border-[0.05px] border-solid border-white-100 dark:border-gray-800 opacity-50"}),(0,l.jsx)(m.Z,{size:"xs",color:"text-gray-300 mb-1",children:"This app won't be able to"}),(0,l.jsxs)(m.Z,{size:"sm",children:[(0,l.jsx)("img",{src:b.r.Misc.GreyCross,className:"h-[12px] mr-3 my-auto"}),"Move funds without your permission"]})]}),(0,l.jsxs)("div",{className:`fixed bottom-0 left-0 px-5 py-3 flex bg-white-0 dark:bg-black-100 flex-row w-full ${r&&r>800?"justify-center gap-4":"justify-between gap-2"}`,children:[(0,l.jsx)(t.Buttons.Generic,{style:{height:"48px",background:N.w.gray900,color:N.w.white100},onClick:U,children:"Cancel"}),(0,l.jsx)(t.Buttons.Generic,{style:{height:"48px",background:N.w.cosmosPrimary,color:N.w.white100},className:"bg-gray-800",onClick:Y,disabled:e.length<=0,children:"Connect"})]})]})}):(0,l.jsx)("div",{className:"panel-height enclosing-panel relative w-screen max-w-3xl h-full self-center p-5 pt-0",children:(0,l.jsx)("div",{className:"flex justify-center items-center panel-height",children:(0,l.jsx)(u.Z,{})})})}}}]);