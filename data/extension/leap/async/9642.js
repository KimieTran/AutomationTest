!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=(new e.Error).stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="5852d7c4-3cda-4c3f-8da6-fcbf68a68030",e._sentryDebugIdIdentifier="sentry-dbid-5852d7c4-3cda-4c3f-8da6-fcbf68a68030")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["9642"],{28529:function(e,o,t){t.r(o),t.d(o,{default:function(){return _}});var n=t(52322),l=t(88054),s=t(39279),a=t(46906),i=t(94184),r=t.n(i),d=t(58002),c=t(59432),u=t(3929),g=t(69816),h=t(46753),p=t(76131),f=t(71566),m=t(98851),x=t(75958),w=t(2784),v=t(10289),b=t(22014),y=t(46103),k=t(55736),j=t(50292),C=t(48534),L=t(72565),N=t.n(L),E=t(53108);function S(e){let o=(0,s.useTheme)().theme===s.ThemeName.DARK;return e.loading?(0,n.jsx)(u.Z,{children:(0,n.jsx)("div",{className:"flex flex-col items-center justify-center h-full"})}):(0,n.jsxs)(u.Z,{className:"!h-screen !max-h-[680px]",children:[(0,n.jsxs)("div",{className:"flex h-[72px] w-[400px] items-center px-7 mt-[8px]",children:[(0,n.jsx)("img",{className:r()({"w-[40px] h-[40px]":(0,j.l)(),"h-[30px]":!(0,j.l)()}),src:(0,j.l)()?m.r.Logos.CompassCircle:o?m.r.Logos.LeapDarkMode:m.r.Logos.LeapLightMode}),(0,j.l)()&&(0,n.jsx)("div",{className:"font-black inline-block text-2xl text-gray-900 dark:text-white-100 ml-2",children:"COMPASS"})]}),(0,n.jsxs)("form",{onSubmit:e.onSubmit,className:r()("relative flex items-center justify-center flex-col h-[calc(100%-96px)]",{"p-[48px]":!(0,C.oj)(),"p-7":(0,C.oj)()}),children:[(0,n.jsx)("div",{className:"dark:bg-gray-900 bg-white-100 rounded-[16px] mb-4 p-4",children:(0,n.jsx)(a.H,{size:48,className:"text-gray-400 dark:text-white-100"})}),(0,n.jsx)(g.Z,{size:"lg",className:"dark:text-white-100 text-gray-900 font-bold mb-1",children:"Welcome back"}),(0,n.jsx)(g.Z,{size:"md",color:"text-gray-400 font-bold mb-8","data-testing-id":"login-enter-your-password-ele",children:"Enter your password to unlock wallet"}),(0,n.jsx)("div",{className:"flex w-[304px] justify-center shrink",children:(0,n.jsx)(s.Input,{autoFocus:!0,type:"password",placeholder:"Enter password",isErrorHighlighted:e.errorHighlighted,onChange:o=>e.onChange(o),"data-testing-id":"login-input-enter-password"})}),(0,n.jsx)("div",{className:"h-[64px]",children:e.errorHighlighted&&(0,n.jsx)(g.Z,{size:"sm",color:"text-red-300 mt-[16px]","data-testing-id":"login-error-text",children:"Incorrect password. Please try again"})}),(0,n.jsx)("div",{className:"flex w-[304px] shrink",children:(0,n.jsx)(s.Buttons.Generic,{size:"normal",onClick:e.onClick,color:(0,j.l)()?y.w.compassPrimary:y.w.osmosisPrimary,"data-testing-id":"btn-unlock-wallet",disabled:e.unlockLoader,children:e.unlockLoader?(0,n.jsx)(d.Z,{}):"Unlock wallet"})}),(0,n.jsx)("div",{className:"p-[28px]",onClick:e.onClick1,children:(0,n.jsx)(g.Z,{size:"md",className:"font-semibold hover:underline cursor-pointer",children:"Forgot Password?"})})]})]})}let _=(0,x.Pi)(function(){let e=(0,f.a7)(),o=(0,v.TH)(),[t,s]=(0,w.useState)(""),a=(0,v.s0)(),i=(0,h.aC)(),[d,u]=(0,w.useState)(!1),[g,m]=(0,w.useState)(!1),[x,y]=(0,w.useState)(!1);(0,w.useEffect)(()=>{if(!i)return;let t=`${e}-send-address`;N().storage.local.get([t]).then(e=>{if("unlocked"===i.locked){var n;let l=null===(n=o.state)||void 0===n?void 0:n.from,s=(null==l?void 0:l.pathname)?`${null==l?void 0:l.pathname}${(null==l?void 0:l.search)?`${null==l?void 0:l.search}`:""}`:void 0;a(e[t]?"/send":s??"/home",{state:{from:"login"},replace:!0})}})},[e,i,o.state,a]),(0,w.useEffect)(()=>{N().storage.local.get([E.pV,l.rU]).then(e=>{if(!e[E.pV]&&!e[l.rU]){let e=N().extension.getViews({type:"tab"});-1!==N().extension.getViews({type:"popup"}).findIndex(e=>e===window)||(0,C.oj)()?(N().tabs.create({url:N().runtime.getURL("index.html#/onboarding")}),(0,k.I)()):(e.filter(e=>e!==window).forEach(e=>e.close()),a("/onboarding",{state:{from:"login"},replace:!0}))}})},[]),(0,w.useEffect)(()=>{let e=async()=>{var e;new URLSearchParams(o.search).has("close-on-login")||(null===(e=o.state)||void 0===e?void 0:e.from.search.includes("unlock-to-approve"))?N().runtime.sendMessage({type:"user-logged-in",payload:{status:"failed"}}):await N().storage.local.set({[E.u1]:{error:"Request rejected"}}),setTimeout(()=>{N().storage.local.remove(E.u1)},50)};return N().storage.local.get(E.AI).then(async e=>{e[E.AI]&&(u(!0),await N().storage.local.remove(E.u1))}),window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]);let j=(0,w.useCallback)(async()=>{if(t){y(!0);try{let e=new TextEncoder;await i.signin(e.encode(t),()=>{var e;if(s(""),b.RW.setLastActiveTime(),new URLSearchParams(o.search).has("close-on-login")){N().runtime.sendMessage({type:"user-logged-in",payload:{status:"success"}}),(0,C.oj)()?a("/home"):window.close();return}let t=null===(e=o.state)||void 0===e?void 0:e.from,n=(null==t?void 0:t.pathname)?`${null==t?void 0:t.pathname}${(null==t?void 0:t.search)?`${null==t?void 0:t.search}`:""}`:void 0;if(n&&n.includes("onboarding")&&i&&!i.noAccount)a("/home",{state:{from:"login"},replace:!0});else{let e=n??"/home";a(e,{state:{from:"login"},replace:!0})}y(!1)})}catch(e){m(!0),y(!1)}}},[i,o.state,a,t]),L=(0,w.useCallback)(e=>{e.preventDefault(),j()},[j]),_=N().extension.getViews({type:"popup"}),I=(0,w.useCallback)(()=>{0!==_.length||(0,C.oj)()?(window.open(N().runtime.getURL("index.html#/forgotPassword")),(0,k.I)()):a("/forgotPassword")},[a,_.length]);return(0,p.$)({page:"login",queryStatus:(null==i?void 0:i.loading)?"loading":"success",op:"loginPageLoad",description:"loading state on login page"}),0===_.length&&!d||(0,C.oj)()?(0,n.jsx)(c.Z,{children:(0,n.jsx)("div",{className:r()("absolute top-0 flex h-full z-5 justify-center items-center",{"w-1/2":!(0,C.oj)()}),children:(0,n.jsx)("div",{className:"dark:shadow-sm shadow-xl dark:shadow-gray-700 enclosing-panel panel-height",children:(0,n.jsx)(S,{unlockLoader:x,loading:i.loading||!!(null==i?void 0:i.noAccount),onSubmit:L,errorHighlighted:g,onChange:e=>{m(!1),s(e.target.value)},onClick:j,onClick1:I})})})}):(0,n.jsx)(S,{unlockLoader:x,loading:i.loading||!!(null==i?void 0:i.noAccount),onSubmit:L,errorHighlighted:g,fullHeight:!0,onChange:e=>{m(!1),s(e.target.value)},onClick:j,onClick1:I})})}}]);