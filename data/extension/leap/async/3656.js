!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="479437c8-6185-460a-be1e-f3be2f673696",e._sentryDebugIdIdentifier="sentry-dbid-479437c8-6185-460a-be1e-f3be2f673696")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["3656"],{78380:function(e,t,a){a.d(t,{$:function(){return i}});var s=a(21950),r=a(2784),l=a(46103);let i=e=>{let t=(0,s.a74)(),a=(0,r.useMemo)(()=>e||t,[e,t]),i=(0,s.QSC)(a);return l.w.getChainColor(a,i)}},61744:function(e,t,a){a.r(t),a.d(t,{default:()=>en,ServiceProviderEnum:()=>el,ServiceProviderBaseUrlEnum:()=>ei});var s,r,l=a("52322"),i=a("21950"),n=a("39279"),o=a("26007"),c=a("26089"),d=a("6391"),u=a.n(d),m=a("3929"),x=a("69816"),h=a("26571"),b=a("94751"),f=a("78646"),g=a("36400"),y=a("60431"),v=a("55334");function p(e){return Object.entries(e).map(e=>{let[t,a]=e;return`${t}=${a}`}).join("&")}var j=a("98851");let k=e=>{let t=null==e?void 0:e.toUpperCase();return j.r.Countries[t]??j.r.Logos.GenericDark},N="https://api.kado.money";async function w(e){let t=p(e),a=await v.Z.get(`${N}/v2/ramp/quote?${t}`,{timeout:15e3});return null==a?void 0:a.data}async function C(e){var t,a;let{from:s,to:r}=e,l=await v.Z.get(`${N}/v1/ramp/currencyconvert?from=${s}&to=${r}`);return null==l?void 0:null===(a=l.data)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.conversion}var S=a("42941"),A=a("78380"),I=a("18823"),D=a("86627"),T=a("7906"),E=a("25292"),R=a("8891"),_=a.n(R),M=a("2784"),O=a("86874"),$=a("10289"),L=a("46103"),Z=a("50292"),U=a("71198"),B=a("14281"),P=a("27963"),z=a("81532");function F(){return(0,l.jsxs)("div",{className:"flex items-center px-4 bg-white-100 dark:bg-gray-900 w-[344px] h-[72px] rounded-[16px] my-2",children:[(0,l.jsx)(O.Z,{circle:!0,width:28,height:28}),(0,l.jsxs)("div",{className:"w-[120px] ml-2",children:[(0,l.jsx)(O.Z,{count:1}),(0,l.jsx)(O.Z,{count:1})]})]})}function K(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F,{}),(0,l.jsx)(F,{}),(0,l.jsx)(F,{}),(0,l.jsx)(F,{}),(0,l.jsx)(F,{})]})}var G=a("42799"),Y=a("75958"),q=a("114"),H=a("49409");function Q(e){let{symbol:t,chainName:a,assetImg:s,onClick:r,chainSymbolImageUrl:o}=e,{theme:c}=(0,n.useTheme)();return(0,l.jsx)(n.GenericCard,{title:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("h3",{className:"text-md mr-1 text-ellipsis overflow-hidden whitespace-nowrap",title:t,children:(0,i.MDB)(t)})}),subtitle:a,img:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:s??(c===n.ThemeName.DARK?q.ImgNotAvailableDark:q.ImgNotAvailableLight),onError:(0,H._)(c===n.ThemeName.DARK?q.ImgNotAvailableDark:q.ImgNotAvailableLight),className:"w-[28px] h-[28px] mr-2 rounded-full bg-black-100 dark:bg-black-100"}),(0,l.jsx)("img",{src:o,className:"w-[12px] h-[12px] absolute -bottom-0.5 right-1 rounded-full bg-black-100 dark:bg-black-100"})]}),isRounded:!0,className:"my-2 bg-white-100 dark:bg-gray-950",onClick:r,size:"md"})}let V=(0,Y.Pi)(e=>{let{isVisible:t,onClose:a,onAssetSelect:s}=e,[r,n]=(0,M.useState)(""),{isLoading:o,data:c=[]}=function(){let e=(0,g.pb)(),t=G.gb.allDenoms,{data:a=[],isLoading:s}=(0,y.useQuery)(["kado-asset-list"],async()=>{var e,t;let a=await v.Z.get(`${N}/v1/ramp/blockchains`);return(null==a?void 0:null===(t=a.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.blockchains).reduce((e,t)=>{let a=[...e];return t.associatedAssets.forEach(e=>{a.push({...e,origin:t.origin})}),a},[])},{staleTime:6e4,cacheTime:3e5}),{data:r={},isLoading:l}=(0,i.PCF)();return(0,y.useQuery)(["filtered-kado-assets"],function(){let s=Object.values(t),l=Object.values(e),i=a.reduce((e,t)=>{let a=l.find(e=>(!(0,Z.l)()||"cosmos"!==e.key)&&(e.chainId===t.officialChainId||e.chainRegistryPath===t.origin)),i=s.find(e=>e.coinDenom.toLowerCase()===t.symbol.toLowerCase());if(a){var n;e.push({id:t._id,symbol:t.symbol,chainName:a.chainName,chainId:a.chainId,assetImg:null==i?void 0:i.icon,chainSymbolImageUrl:a.chainSymbolImageUrl,priority:null===(n=r[a.key])||void 0===n?void 0:n[t.symbol],origin:t.origin})}return e},[]);return i.sort((e,t)=>{let a=e.priority??1/0,s=t.priority??1/0;return a!==s?a-s:e.symbol.localeCompare(t.symbol)}),i},{enabled:e&&t&&!s&&!l})}(),d=(0,M.useMemo)(()=>c.filter(e=>e.symbol.toLowerCase().includes(r)||e.chainName.toLowerCase().includes(r)),[c,r]);return(0,l.jsxs)(B.Z,{isOpen:t,onClose:a,closeOnBackdropClick:!0,title:"Select Token",children:[(0,l.jsx)("div",{className:"flex flex-col items-center h-full",children:(0,l.jsx)(z.M,{value:r,onChange:e=>n(e.target.value),"data-testing-id":"buy-asset-input-search",placeholder:"Search token",onClear:()=>n("")})}),o&&(0,l.jsx)(K,{}),!o&&(0,l.jsxs)("div",{children:[(null==d?void 0:d.length)===0&&(0,l.jsx)(P.S,{isRounded:!0,subHeading:"Try a different search term",src:j.r.Misc.Explore,heading:"No results found","data-testing-id":"select-asset-empty-card"}),0!==d.length&&d.map(e=>(0,l.jsx)(Q,{symbol:e.symbol,chainName:e.chainName,assetImg:e.assetImg,chainSymbolImageUrl:e.chainSymbolImageUrl,onClick:()=>s(e)},e.id))]})]})});function W(e){let{onClick:t,logo:a,title:s}=e;return(0,l.jsxs)("button",{className:"flex items-center cursor-pointer",onClick:t,children:[(0,l.jsx)("img",{src:a,onError:(0,H._)(q.GenericLight),className:"h-6 w-6 mr-1 rounded-full"}),(0,l.jsx)("div",{className:"flex flex-col items-start p-1 pr-2",children:(0,l.jsx)("div",{className:"text-black-100 dark:text-white-100 font-bold text-xs",children:(0,i.MDB)(s)})}),(0,l.jsx)("img",{src:j.r.Misc.ArrowDown,className:"ml-2"})]})}function J(e){let{onClick:t,logo:a,title:s,subtitle:r,chainImg:o}=e,{theme:c}=(0,n.useTheme)();return(0,l.jsxs)("button",{className:"flex items-center cursor-pointer",onClick:t,children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:a??(c===n.ThemeName.DARK?q.ImgNotAvailableDark:q.ImgNotAvailableLight),className:"w-[24px] h-[24px] mr-1 rounded-full bg-black-100 dark:bg-black-100"}),(0,l.jsx)("img",{src:o,className:"w-[12px] h-[12px] absolute -bottom-0.5 right-1 rounded-full bg-black-100 dark:bg-black-100"})]}),(0,l.jsxs)("div",{className:"flex flex-col items-start p-1 pr-2",children:[(0,l.jsx)("div",{className:"text-black-100 dark:text-white-100 font-bold text-xs",children:(0,i.MDB)(s)}),(0,l.jsx)("div",{style:{fontSize:"10px"},className:"text-gray-600 dark:text-gray-400",children:(0,i.MDB)(r)})]}),(0,l.jsx)("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-800"}),(0,l.jsx)("img",{src:j.r.Misc.ArrowDown,className:"ml-3"})]})}function X(e){let{code:t,name:a,logo:s,onClick:r}=e;return(0,l.jsx)(n.GenericCard,{title:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("h3",{className:"text-md mr-1 text-ellipsis overflow-hidden whitespace-nowrap",title:t,children:(0,i.MDB)(t)})}),subtitle:a,img:(0,l.jsx)("img",{src:s,className:"w-[28px] h-[28px] mr-2 border rounded-full dark:border-[#333333] border-[#cccccc]"}),isRounded:!0,className:"my-2",onClick:r,size:"md"})}function ee(e){let{isVisible:t,onClose:a,onCurrencySelect:s}=e,[r,i]=(0,M.useState)(""),{isLoading:n,data:o=[]}=(0,y.useQuery)(["kado-currency-list"],async()=>{var e,t;let a=await v.Z.get(`${N}/v1/ramp/currencies`);return(null==a?void 0:null===(t=a.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.currencyData).map(e=>({...e,logo:k(e.code)}))},{staleTime:6e4,cacheTime:3e5}),c=(0,M.useMemo)(()=>o.filter(e=>e.code.toLowerCase().includes(r)||e.name.toLowerCase().includes(r)),[o,r]);return(0,l.jsxs)(B.Z,{isOpen:t,onClose:a,closeOnBackdropClick:!0,title:"Select Currency",children:[(0,l.jsx)("div",{className:"flex flex-col items-center h-full",children:(0,l.jsx)(z.M,{value:r,onChange:e=>i(e.target.value),"data-testing-id":"currency-input-search",placeholder:"Search currency",onClear:()=>i("")})}),n&&(0,l.jsx)(K,{}),!n&&(0,l.jsxs)("div",{children:[(null==c?void 0:c.length)===0&&(0,l.jsx)(P.S,{isRounded:!0,subHeading:"Try a different search term",src:j.r.Misc.Explore,heading:"No results found","data-testing-id":"select-currency-empty-card"}),0!==c.length&&c.map(e=>(0,l.jsx)(X,{code:e.code,name:e.name,logo:e.logo,onClick:()=>s(e.code)},e.code))]})]})}var et=a("81252"),ea=a("37906"),es=a(34406);let er=et.w.useWallets;var el=((s={}).KADO="kado",s);var ei=((r={}).KADO="https://app.kado.money",r);let en=()=>{let e=(0,S.Z)().get("pageSource")??void 0,t=(0,M.useMemo)(()=>({pageViewSource:e}),[e]);(0,f.a)(h.q.OnRampQuotePreview,!0,t);let a=(0,A.$)(),{theme:s}=(0,n.useTheme)(),r=(0,$.s0)(),d=(0,$.TH)().state,[y,v]=(0,M.useState)(!1),[j,N]=(0,M.useState)(!1),[R,B]=(0,M.useState)("USD"),[P,z]=(0,M.useState)(void 0),F=(0,I.S)(),[K,G]=(0,M.useState)("0"),Y=(0,i.NrF)(K,500),[q,H]=(0,M.useState)("0"),[Q,X]=(0,M.useState)("0"),[et,el]=(0,M.useState)(!1),[ei,en]=(0,M.useState)(null),eo=(0,M.useRef)(null),ec=(0,g.pb)(),ed=er(),eu=(0,M.useMemo)(()=>{let e=ed?Object.values(ed).map(e=>Object.values(e.addresses)).flat():[];return F?e.includes(F):null},[F,ed]);(0,M.useEffect)(()=>{async function e(){try{el(!0);let s=await w({transactionType:"buy",fiatMethod:"credit_card",partner:"fortress",amount:new(u())(Y).toNumber(),currency:R,asset:(null==P?void 0:P.symbol)??"ATOM",blockchain:(null==P?void 0:P.origin.toLowerCase())??"cosmos hub"});if(s.success){var e,t,a;X((null==s?void 0:null===(a=s.data)||void 0===a?void 0:null===(t=a.quote)||void 0===t?void 0:null===(e=t.receiveUnitCountAfterFees)||void 0===e?void 0:e.amount)??"0")}else X("0")}catch(t){(0,c.Tb)(t,{tags:ea.r});let e=t instanceof Error?t.message:"An error occurred";e.toLowerCase().includes("timeout")?en("Request timed out. Unable to fetch quote."):en(e)}finally{el(!1)}}Y&&new(u())(Y).isGreaterThan("0")?e():X("0")},[Y,P,R]),(0,M.useEffect)(()=>{if(eo.current){var e;null===(e=eo.current)||void 0===e||e.focus()}},[]),(0,M.useEffect)(()=>{if(e===h.q.AssetDetails){let e=ec[d.chain];z({symbol:d.symbol,chainName:e.chainName,chainId:e.chainId,chainSymbolImageUrl:e.chainSymbolImageUrl,assetImg:d.img,origin:e.chainName})}else N(!0)},[d,ec,e]),(0,M.useEffect)(()=>{(async function e(e,t){if("USD"!==t){let a=await C({from:t,to:"USD"});H(new(u())(e).multipliedBy(a).toString())}else H(e)})(Y,R)},[Y,R]),(0,M.useEffect)(()=>{(async function e(){if(en(null),parseFloat(q)>0){let e=await C({from:"USD",to:R});10>parseFloat(q)?en(`Amount should be at least ${(10*e).toFixed(2)} ${R}`):parseFloat(q)>1e4&&en(`Amount exceeds your daily limit of ${(1e4*e).toFixed(2)} ${R}`)}})()},[q,R]);let em=(0,M.useCallback)((e,t,a)=>{_().track(h.B_.ButtonClick,{buttonType:h.L$.ONRAMP,buttonName:h.$S.ONRAMP_PROVIDER_REDIRECTION,onRampProvider:h.zV.KADO,provider:"kado",buyToken:null==t?void 0:t.symbol,buyTokenNetwork:null==t?void 0:t.origin,chainName:null==t?void 0:t.chainName,chainId:null==t?void 0:t.chainId,fiatCurrency:a,fiatAmountInUSD:new(u())(e).toNumber(),fiatAmount:new(u())(Y).toNumber(),transferToSelf:eu,receiverAddress:F})},[Y,F,eu]),ex=(0,M.useCallback)(()=>{let e=p({apiKey:es.env.KADO_API_KEY,onPayAmount:K,onPayCurrency:R,onRevCurrency:null==P?void 0:P.symbol,onToAddress:F,network:null==P?void 0:P.origin,product:"BUY",productList:"BUY",mode:"minimal",theme:"dark"}),t=`https://app.kado.money?${e}`;window.open(t,"_blank"),P&&em(q,P,R)},[q,K,F,P,R,em]);return(0,l.jsxs)(b.E.div,{className:"relative h-full w-full",children:[(0,l.jsx)(m.Z,{header:(0,l.jsx)(n.Header,{action:{onClick:()=>r(-1),type:n.HeaderActionType.BACK},imgSrc:void 0,title:"Buy",topColor:a}),children:(0,l.jsxs)("div",{className:"flex flex-col justify-between",style:{height:"calc(100% - 72px)"},children:[(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"p-4 space-y-4 overflow-y-auto",children:[(0,l.jsxs)(b.E.div,{className:"card-container dark:bg-gray-950",children:[(0,l.jsx)("div",{className:"flex w-full items-center justify-between mb-3",children:(0,l.jsx)(x.Z,{size:"sm",className:"text-gray-600 dark:text-gray-200 font-bold",children:"You Pay"})}),(0,l.jsxs)("div",{className:`border border-transparent bg-gray-50 dark:bg-gray-900 rounded-lg focus-within:${ei?"border-red-300":"border-green-600"} dark:focus-within:${ei?"border-red-300":"border-green-600"} flex w-full justify-between items-center px-4`,children:[(0,l.jsx)("input",{className:" bg-gray-50 dark:bg-gray-900 text-md outline-none font-bold text-black-100 dark:text-white-100 py-2",value:K,onChange:e=>{en(null);let t=e.target.value,a=(0,U.Rv)(t);0>parseFloat(a)?en("Please enter a valid positive number."):G(a)},type:"number",placeholder:"Amount",ref:eo}),(0,l.jsx)(W,{onClick:()=>v(!0),logo:k(R),title:R})]}),ei&&(0,l.jsx)(x.Z,{size:"xs",className:"text-red-600 dark:text-red-300 pt-1.5",children:ei})]}),(0,l.jsxs)(b.E.div,{className:"card-container dark:bg-gray-950",children:[(0,l.jsx)("div",{className:"flex w-full items-center justify-between mb-3",children:(0,l.jsx)(x.Z,{size:"sm",className:"text-gray-600 dark:text-gray-200 font-bold",children:"You Get"})}),P&&(0,l.jsxs)("div",{className:"border border-gray-50 dark:border-gray-900 bg-gray-50 dark:bg-gray-900 rounded-lg flex w-full justify-between items-center px-4",children:[!et&&(0,l.jsx)(x.Z,{size:"md",className:"font-bold text-black-100 dark:text-white-100",children:1e4*parseFloat(Q)>0?(0,i.LHZ)(Q,void 0,4):Q}),et&&(0,l.jsx)("div",{className:"w-[50px] z-0",children:(0,l.jsx)(O.Z,{className:"rounded-full bg-gray-50 dark:bg-gray-800"})}),(0,l.jsx)(J,{onClick:()=>N(!0),logo:P.assetImg,chainImg:P.chainSymbolImageUrl,title:P.symbol,subtitle:P.chainName})]})]})]})}),(0,l.jsxs)("div",{className:"mx-4 mt-auto mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)(x.Z,{size:"sm",className:"text-gray-600 dark:text-gray-200 text-center font-extrabold",children:"Powered by Kado"}),(0,l.jsx)("img",{src:s===n.ThemeName.DARK?T:D,className:"w-[28px] h-[28px] rounded-full dark:border-[#333333] border-[#cccccc]"})]}),(0,l.jsx)("div",{className:"flex items-center justify-center mt-auto",children:(0,l.jsx)(x.Z,{size:"xs",className:"text-gray-600 dark:text-gray-200 text-center mb-2",children:"You'll be redirected to Kado's website for this transaction"})}),(0,l.jsx)("div",{className:"flex w-full justify-center",children:(0,l.jsx)(n.Buttons.Generic,{size:"normal",color:ei?"#FF707E":(0,Z.l)()?L.w.compassPrimary:"#29A874",onClick:ex,disabled:!new(u())(Q).isGreaterThan(0)||et||(0,E.isString)(ei),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{children:"Buy"}),(0,l.jsx)(o.O,{size:16,weight:"bold",className:"ml-1.5"})]})})})]})]})}),(0,l.jsx)(ee,{isVisible:y,onClose:()=>v(!1),onCurrencySelect:e=>{B(e),v(!1),eo.current&&eo.current.focus()}}),(0,l.jsx)(V,{isVisible:j,onClose:()=>{P?N(!1):r(-1)},onAssetSelect:e=>{z(e),N(!1),eo.current&&eo.current.focus()}})]})}}}]);