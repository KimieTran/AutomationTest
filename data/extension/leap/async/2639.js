!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a852f9f0-a4e6-403d-b083-16d0527402dd",e._sentryDebugIdIdentifier="sentry-dbid-a852f9f0-a4e6-403d-b083-16d0527402dd")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"0.17.3"};"use strict";(self.webpackChunk_leap_cosmos_extension=self.webpackChunk_leap_cosmos_extension||[]).push([["2639"],{23751:function(e,t,s){s.d(t,{D:function(){return i},KE:function(){return o},rb:function(){return l}});var r=s(52322);s(2784);var a=s(86874);function l(){return(0,r.jsxs)("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-4 flex-col p-4 w-full",children:[(0,r.jsx)(a.Z,{count:1,width:100,height:16}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Z,{count:1,width:50,height:30}),(0,r.jsx)(a.Z,{count:1,width:75,height:20})]}),(0,r.jsx)(a.Z,{count:1,borderRadius:16,height:70})]})}function i(){return(0,r.jsxs)("div",{className:"flex rounded-2xl bg-white-100 dark:bg-gray-950 gap-y-1.5 flex-col p-4 w-full",children:[(0,r.jsx)(a.Z,{width:100,height:20}),(0,r.jsx)(a.Z,{width:336,height:40}),(0,r.jsx)(a.Z,{width:100,height:24})]})}function o(){return(0,r.jsxs)("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-950 w-full rounded-2xl gap-x-4",children:[(0,r.jsx)(a.Z,{circle:!0,width:28,height:28,className:"!z-0"}),(0,r.jsx)(a.Z,{count:1,width:100,height:16,className:"!z-0"})]})}},17469:function(e,t,s){s.d(t,{Z:function(){return i},m:function(){return l}});var r=s(52322);s(2784);var a=s(86874);function l(){return(0,r.jsxs)("div",{className:"flex items-center px-4 py-3 bg-white-100 dark:bg-gray-900 w-full rounded-2xl my-2",children:[(0,r.jsx)(a.Z,{circle:!0,width:28,height:28,className:"z-0"}),(0,r.jsxs)("div",{className:"w-[120px] ml-2",children:[(0,r.jsx)(a.Z,{count:1,className:"z-0"}),(0,r.jsx)(a.Z,{count:1,className:"z-0"})]})]})}function i(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{}),(0,r.jsx)(l,{}),(0,r.jsx)(l,{}),(0,r.jsx)(l,{}),(0,r.jsx)(l,{})]})}},71845:function(e,t,s){s.d(t,{Z:function(){return n}});var r=s(52322),a=s(6806),l=s(2784);let i=new Map([["regular",(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_241_1099)",children:[(0,r.jsx)("path",{d:"M3 12.75H14.0625",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M3 8.25H21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M3 17.25H7.125",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_241_1099",children:(0,r.jsx)("rect",{width:"24",height:"24",fill:"currentColor"})})})]},"regular")],["bold",(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_256_253)",children:[(0,r.jsx)("path",{d:"M3 12.75H14.0625",stroke:"currentColor",strokeWidth:"2.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M3 8.25H21",stroke:"currentColor",strokeWidth:"2.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M3 17.25H7.125",stroke:"currentColor",strokeWidth:"2.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_256_253",children:(0,r.jsx)("rect",{width:"24",height:"24",fill:"currentColor"})})})]},"bold")],["fill",(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 0H20C22.2091 0 24 1.79086 24 4V20C24 22.2091 22.2091 24 20 24H4C1.79086 24 0 22.2091 0 20V4C0 1.79086 1.79086 0 4 0ZM3 12C2.58579 12 2.25 12.3358 2.25 12.75C2.25 13.1642 2.58579 13.5 3 13.5H14.0625C14.4767 13.5 14.8125 13.1642 14.8125 12.75C14.8125 12.3358 14.4767 12 14.0625 12H3ZM2.25 8.25C2.25 7.83579 2.58579 7.5 3 7.5H21C21.4142 7.5 21.75 7.83579 21.75 8.25C21.75 8.66421 21.4142 9 21 9H3C2.58579 9 2.25 8.66421 2.25 8.25ZM3 16.5C2.58579 16.5 2.25 16.8358 2.25 17.25C2.25 17.6642 2.58579 18 3 18H7.125C7.53921 18 7.875 17.6642 7.875 17.25C7.875 16.8358 7.53921 16.5 7.125 16.5H3Z",fill:"currentColor"},"fill")]]),o=(0,l.forwardRef)((e,t)=>(0,r.jsx)(a.Z,{viewBox:"0 0 24 24",ref:t,...e,weights:i}));o.displayName="Sort";let n=o},39102:function(e,t,s){s.r(t),s.d(t,{default:()=>eb});var r=s("52322"),a=s("21950"),l=s("39279"),i=s("35164"),o=s("48272"),n=s("6391"),d=s.n(n),c=s("94184"),u=s.n(c),x=s("23060"),m=s("51994"),h=s("80588"),g=s("3929"),v=s("23751"),f=s("69816"),p=s("26571"),k=s("42765"),j=s("91310"),b=s("19785"),w=s("71603"),y=s("81252"),N=s("8891"),E=s.n(N),C=s("75958"),S=s("2784"),D=s("10289"),L=s("46103"),M=s("50292"),A=s("48534"),T=s("31655");let Z=(0,C.Pi)(e=>{let{rootDenomsStore:t,activeChain:s,activeNetwork:l}=e,[i]=(0,a.JsT)(t.allDenoms,s,l),o=(0,a.QSC)(),n=(0,D.s0)(),d=(0,a.QSC)("osmosis");return(0,r.jsxs)("div",{className:"flex w-full items-center justify-between py-3 px-4 rounded-2xl bg-white-100 dark:bg-gray-950",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold",children:"Insufficient balance to stake"}),(0,r.jsxs)(f.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",className:"font-medium",children:["Get ",i.coinDenom," to stake and earn rewards"]})]}),(0,r.jsxs)("button",{onClick:()=>{(0,M.l)()?n("/buy?pageSource=stake"):n(`/swap?sourceChainId=${d.chainId}&sourceToken=${d.denom}&destinationChainId=${o.chainId}&destinationToken=${i.coinDenom}&pageSource=stake`)},className:"flex items-center cursor-pointer py-2.5 px-4 justify-between bg-black-100 dark:bg-white-100 rounded-full text-xs text-white-100 dark:text-black-100 font-bold",children:["Get ",(null==i?void 0:i.coinDenom)??""]})]})});var P=s("36906"),G=s("14281"),z=s("42152"),_=s("98851"),R=s("114"),F=s("63242"),$=s("97680"),B=s.n($),V=s("42799"),O=s("49409");function H(e){let{provider:t,handleMouseEnter:s,handleMouseLeave:a,positionClassName:l}=e;return(0,r.jsx)("div",{onMouseEnter:s,onMouseLeave:a,className:`absolute z-10 ${l}`,children:(0,r.jsxs)("div",{className:"flex flex-col py-3 px-4 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-800 rounded-lg gap-y-2 w-[220px]",children:[t.specs.length>0&&(0,r.jsx)(f.Z,{size:"sm",className:"font-bold",color:"text-gray-900 dark:text-gray-100",children:t.specs.map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(", ")}),(0,r.jsxs)(f.Z,{size:"xs",className:"font-medium",color:"text-gray-700 dark:text-gray-300",children:["Commission"," ",parseInt(t.delegateCommission??"0")>0?`${t.delegateCommission}%`:"-"]}),(0,r.jsx)(f.Z,{size:"xs",className:"font-medium",color:"text-gray-700 dark:text-gray-300",children:"APR is estimated and influenced by various factors such as number of delegators. More information is available in our tokenomics: docs.lavanet.xyz/token"})]})})}let I=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"DELEGATE":return"Stake";case"UNDELEGATE":return"Unstake";case"CANCEL_UNDELEGATION":return"Cancel Unstake";case"CLAIM_REWARDS":return"Claiming";case"REDELEGATE":return`Switching ${t?"Provider":"Validator"}`}},W=(0,C.Pi)(e=>{let{provider:t,rootDenomsStore:s}=e,[l,i]=(0,S.useState)(!1),{apr:o}=(0,a.EXf)(t.provider,s.allDenoms),n=(0,S.useCallback)(()=>{i(!0)},[]),d=(0,S.useCallback)(()=>{i(!1)},[]);return(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"flex justify-between items-center px-4 cursor-pointer w-[344px] h-[72px] rounded-[16px] bg-white-100 dark:bg-gray-950",children:(0,r.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,r.jsx)("img",{src:_.r.Misc.Validator,onError:(0,O._)(R.GenericLight),width:36,height:36,className:"border rounded-full dark:border-[#333333] border-[#cccccc] mr-3"}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-start w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:(0,a.MDB)(t.moniker,(0,A.oj)()?15+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,3)}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(P.k,{onMouseEnter:n,onMouseLeave:d,size:18,className:"text-gray-400 dark:text-gray-600"}),l&&(0,r.jsx)(H,{provider:t,handleMouseEnter:n,handleMouseLeave:d,positionClassName:"bottom-full -right-2 py-3"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsx)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:"Provider"}),parseFloat(o??"0")>0&&(0,r.jsxs)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:["Estimated APR\xa0",(0,r.jsx)("span",{className:"font-bold",children:(0,a._6x)(o??"",1)}),"%"]})]})]})]})})})});function U(e){let{isVisible:t,onClose:s,onSubmit:i,tokenAmount:o,token:n,validator:c,isLoading:u,error:x,mode:m,unstakingPeriod:h,gasError:g,showLedgerPopup:v,provider:p,ledgerError:k}=e,[j]=(0,a.fOz)(),{data:b}=(0,a.pD_)(c),w=(0,S.useMemo)(()=>new(d())((null==n?void 0:n.usdPrice)??"").gt(0)?j(new(d())(o).times((null==n?void 0:n.usdPrice)??"")):"",[j,null==n?void 0:n.usdPrice,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G.Z,{isOpen:t,onClose:s,closeOnBackdropClick:!0,title:"Review Transaction",className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-6 items-center",children:["REDELEGATE"===m&&c&&(0,r.jsxs)("div",{className:"flex items-start gap-x-3 p-4 rounded-2xl bg-blue-200 dark:bg-blue-900",children:[(0,r.jsx)(P.k,{size:20,className:"text-blue-500 dark:text-blue-300"}),(0,r.jsxs)(f.Z,{size:"xs",color:"text-black-100 dark:text-white-100",children:["Redelegating to a new validator takes ",h," as funds unbond from the source validator, then moved to the new one."]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,r.jsx)(l.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,r.jsx)("img",{src:null==n?void 0:n.img,onError:(0,O._)(R.GenericLight),width:36,height:36,className:"border rounded-full dark:border-[#333333] border-[#cccccc]"}),isRounded:!0,size:"md",title:(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:`${(0,a.LHZ)(o)} ${null==n?void 0:n.symbol}`}),subtitle:(0,r.jsx)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:w})}),c&&(0,r.jsx)(l.Card,{className:"bg-white-100 dark:bg-gray-950",avatar:(0,r.jsx)("img",{src:b??(null==c?void 0:c.image)??_.r.Misc.Validator,onError:(0,O._)(R.GenericLight),width:36,height:36,className:"border rounded-full dark:border-[#333333] border-[#cccccc]"}),isRounded:!0,size:"md",title:(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:(0,a.MDB)(null==c?void 0:c.moniker,(0,A.oj)()?15+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):10,2)}),subtitle:(0,r.jsx)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:"Validator"})}),p&&(0,r.jsx)(W,{provider:p,rootDenomsStore:V.gb})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-2",children:[k&&(0,r.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:k}),x&&(0,r.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:x}),g&&(0,r.jsx)("p",{className:"text-sm font-bold text-red-300 px-2",children:g}),(0,r.jsx)(l.Buttons.Generic,{className:"w-full",disabled:u||!!x&&!k||!!g,size:"normal",color:(0,M.l)()?L.w.compassPrimary:L.w.green600,onClick:i,children:u?(0,r.jsx)(B(),{loop:!0,autoplay:!0,animationData:F,rendererSettings:{preserveAspectRatio:"xMidYMid slice"},className:"h-[28px] w-[28px]"}):`Confirm ${I(m,!!p)}`})]})]})}),v&&(0,r.jsx)(z.Z,{showLedgerPopup:v})]})}function K(e){let{selectedValidator:t,setShowSelectValidatorSheet:s,selectDisabled:i,title:n}=e,{data:d}=(0,a.pD_)(t),c=(0,l.useTheme)().theme;return(0,r.jsxs)("div",{className:"flex flex-col gap-y-3 p-4 rounded-2xl bg-white-100 dark:bg-gray-950",children:[(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-medium",children:n}),(0,r.jsxs)("button",{className:"flex w-full items-center cursor-pointer py-2.5 px-4 justify-between bg-gray-50 dark:bg-gray-900 rounded-xl",onClick:()=>{!i&&s(!0)},disabled:i,children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("img",{src:t?d??(null==t?void 0:t.image)??_.r.Misc.Validator:c===l.ThemeName.DARK?R.GenericDark:R.GenericLight,onError:(0,O._)(R.GenericLight),className:"rounded-full",width:24,height:24}),(0,r.jsx)(f.Z,{size:"sm",color:t?"text-black-100 dark:text-white-100":"text-gray-700 dark:text-gray-400",className:" font-bold",children:t?(0,a.MDB)(t.moniker??"",(0,A.oj)()?21+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):30,0):"Select Validator"})]}),!i&&(0,r.jsx)(o.p,{size:16,className:t?"text-gray-800 dark:text-white-100":"text-gray-700 dark:text-gray-400"})]})]})}var J=s("27963"),Y=s("81532"),q=s("17469"),X=s("96128"),Q=s.n(X),ee=s("71566"),et=s("71845"),es=s("7474");let er=["Random","Amount staked","APR"];function ea(e){let{sortBy:t,setSortBy:s,isVisible:a,setVisible:i,onClose:o}=e;return(0,r.jsx)(G.Z,{isOpen:a,onClose:o,closeOnBackdropClick:!0,title:"Sort By",className:"p-6",children:(0,r.jsx)("div",{className:"flex flex-col gap-y-3",children:er.map(e=>(0,r.jsx)(l.GenericCard,{onClick:()=>{i(!1),s(e)},icon:t===e?(0,r.jsx)("img",{width:24,height:24,src:_.r.Misc.CheckGreenNew}):void 0,size:"md",title:e,isRounded:!0,className:"p-4 !h-auto bg-white-100 dark:bg-gray-950"},e))})})}let el=(0,C.Pi)(e=>{var t,s,l,i;let{validator:o,onClick:n,rootDenomsStore:c,activeChain:u,activeNetwork:x}=e,[m]=(0,a.JsT)(c.allDenoms,u,x),{data:h}=(0,a.pD_)(o);return(0,r.jsxs)("div",{onClick:n,className:`relative flex justify-between items-center p-4 mb-4 ${(null===(t=o.custom_attributes)||void 0===t?void 0:t.priority)?"bg-[#29A87426]":"bg-white-100 dark:bg-gray-950"} cursor-pointer rounded-xl`,children:[(null===(s=o.custom_attributes)||void 0===s?void 0:s.priority)!==void 0&&o.custom_attributes.priority>=1&&(0,r.jsx)("div",{className:"text-white-100 dark:text-white-100 absolute top-0 right-4 px-1.5 py-0.5 bg-green-600 rounded-b-[4px] text-[10px] font-bold",children:"Promoted"}),(0,r.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,r.jsx)("img",{src:h??(null==o?void 0:o.image)??_.r.Misc.Validator,onError:(0,O._)(R.GenericLight),width:30,height:30,className:"mr-3 border h-[30px] w-[30px] rounded-full dark:border-[#333333] border-[#cccccc]"}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-start w-full",children:[(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:(0,a.MDB)(o.moniker,26+Math.floor((Math.min(window.innerWidth,400)-320)/81*7),0)}),(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsx)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:`${Q()((null===(l=o.delegations)||void 0===l?void 0:l.total_tokens_display)??o.tokens??"",{symbol:"",precision:0}).format()} ${m.coinDenom}`}),(0,r.jsxs)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600 text-right",className:"font-medium",children:["Commission:"," ",(null===(i=o.commission)||void 0===i?void 0:i.commission_rates.rate)?`${new(d())(o.commission.commission_rates.rate).multipliedBy(100).toFixed(0)}%`:"N/A"]})]})]})]})]})});function ei(e){let{isVisible:t,onClose:s,onValidatorSelect:l,validators:i,apr:o,rootDenomsStore:n,forceChain:d,forceNetwork:c}=e,[u,x]=(0,S.useState)(""),[m,h]=(0,S.useState)(!1),[g,v]=(0,S.useState)("Random"),p=(0,ee.a7)(),k=(0,S.useMemo)(()=>d||p,[p,d]),j=(0,a.obn)(),b=(0,S.useMemo)(()=>c||j,[j,c]),[w,y]=(0,S.useState)(!1),[N,E]=(0,S.useMemo)(()=>{y(!0);let e=i.filter(e=>e.moniker.toLowerCase().includes(u.toLowerCase())||e.address.includes(u));e.sort((e,t)=>{switch(g){case"Amount staked":return+(e.tokens??"")<+(t.tokens??"")?1:-1;case"APR":return o?o[e.address]<o[t.address]?1:-1:0;case"Random":return Math.random()-.5}}),"Random"===g&&e.sort((e,t)=>{var s,r;let a=null===(s=e.custom_attributes)||void 0===s?void 0:s.priority,l=null===(r=t.custom_attributes)||void 0===r?void 0:r.priority;if(void 0!==a&&void 0!==l)return a!==l?a-l:Math.random()-.5;if(void 0!==a)return -1;if(void 0!==l)return 1;else return 0});let t=e.filter(e=>!1!==e.active),s=e.filter(e=>!1===e.active);return y(!1),[t,u?s:[]]},[i,u,g,o]),C=(0,S.useMemo)(()=>{let e=[...N];return E.length>0&&(e.push({itemType:"inactiveHeader"}),e.push(...E)),e},[N,E]),D=(0,S.useCallback)((e,t)=>"itemType"in t?(0,r.jsx)(f.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",className:"mb-4",children:"Inactive validator"}):(0,r.jsx)(el,{validator:t,onClick:()=>l(t),rootDenomsStore:n,activeChain:k,activeNetwork:b}),[n,k,b,l]);return(0,r.jsxs)(G.Z,{isOpen:t,onClose:()=>{x(""),s()},closeOnBackdropClick:!0,title:"Select Validator",containerClassName:"h-[calc(100%-34px)]",className:"p-6 !overflow-hidden max-h-[calc(100%-69px)] h-full",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-6 h-full",children:[(0,r.jsxs)("div",{className:"flex gap-x-2 justify-between items-center",children:[(0,r.jsx)(Y.M,{divClassName:"flex w-full bg-white-100 dark:bg-gray-950 rounded-full py-2 pl-5 pr-[10px] focus-within:border-green-600",value:u,onChange:e=>x(e.target.value),"data-testing-id":"validator-input-search",placeholder:"Search validators",onClear:()=>x("")}),(0,r.jsx)("button",{onClick:()=>h(!0),className:"text-black-100 dark:text-white-100 h-[2.5rem] px-3 flex items-center justify-center flex-shrink-0 rounded-3xl cursor-pointer dark:bg-gray-950 bg-white-100",children:(0,r.jsx)(et.Z,{size:20})})]}),(0,r.jsxs)("div",{className:"w-full h-full",style:{overflowY:"scroll"},children:[w&&(0,r.jsx)(q.Z,{}),!w&&0===C.length&&(0,r.jsx)(J.S,{isRounded:!0,subHeading:"Try a different search term",src:_.r.Misc.Explore,heading:`No validators found for '${u}'`,"data-testing-id":"select-validator-empty-card"}),!w&&C.length>0&&(0,r.jsx)(es.OO,{data:C,itemContent:D,style:{flexGrow:"1",width:"100%"}})]})]}),(0,r.jsx)(ea,{onClose:()=>h(!1),isVisible:m,setVisible:h,setSortBy:v,sortBy:g,activeChain:k})]})}var eo=s("2826"),en=s("2543"),ed=s("86874"),ec=s("64891");let eu=(0,C.Pi)(e=>{let{token:t,amount:s,setAmount:l,fees:i,hasError:o,setHasError:n,mode:c,delegationBalance:x,adjustAmount:m,setAdjustAmount:h,tokenLoading:g,rootDenomsStore:v,activeChain:p,activeNetwork:k,delegationBalanceLoading:j}=e,[b]=(0,a.JsT)(v.allDenoms,p,k),[w]=(0,a.fOz)(),[y,N]=(0,S.useState)(""),[E,C]=(0,S.useState)(!1),[D,T]=(0,S.useState)(!1),Z=(0,S.useMemo)(()=>y?E?new(d())(y).dividedBy(new(d())((null==t?void 0:t.usdPrice)??"0")).toString():new(d())(y).multipliedBy(new(d())((null==t?void 0:t.usdPrice)??"0")).toString():"",[y,E,null==t?void 0:t.usdPrice]),P=(0,S.useMemo)(()=>{if("DELEGATE"!==c)return E?new(d())((null==x?void 0:x.currencyAmount)??"").toFixed(6,1):new(d())((null==x?void 0:x.amount)??"").toFixed(6,1);{let e=(0,eo.hI1)((null==t?void 0:t.amount)??"0",(null==t?void 0:t.coinDecimals)??6),s=new(d())(e).minus((null==i?void 0:i.amount)??"0");if(s.lte(0))return"0";let r=new(d())((0,eo.TGo)(s.toString(),(null==t?void 0:t.coinDecimals)??6)).toFixed(6,1);return E?new(d())(r).multipliedBy((null==t?void 0:t.usdPrice)??"0").toFixed(6,1):r}},[null==x?void 0:x.amount,null==x?void 0:x.currencyAmount,null==i?void 0:i.amount,E,c,null==t?void 0:t.amount,null==t?void 0:t.coinDecimals,null==t?void 0:t.usdPrice]),G=!new(d())(y).isEqualTo(P),z=(0,S.useCallback)(e=>{let s;let r=new(d())(e);if(r.isLessThan(0)){n(!0);return}if(s="DELEGATE"===c?E?(null==t?void 0:t.usdValue)??"0":(null==t?void 0:t.amount)??"0":E?(null==x?void 0:x.currencyAmount)??"":(null==x?void 0:x.amount)??"",r.isGreaterThan(s)){n(!0);return}n(!1)},[null==x?void 0:x.amount,null==x?void 0:x.currencyAmount,E,c,n,t]),_=()=>{y&&N(E?(parseFloat(y)/parseFloat((null==t?void 0:t.usdPrice)??"0")).toFixed(6):(parseFloat(y)*parseFloat((null==t?void 0:t.usdPrice)??"0")).toFixed(6)),C(!E)},F=(0,S.useMemo)(()=>E?new(d())(("DELEGATE"===c?null==t?void 0:t.usdValue:null==x?void 0:x.currencyAmount)??""):new(d())(("DELEGATE"===c?null==t?void 0:t.amount:null==x?void 0:x.amount)??""),[null==x?void 0:x.amount,null==x?void 0:x.currencyAmount,E,c,null==t?void 0:t.amount,null==t?void 0:t.usdValue]);return(0,S.useEffect)(()=>{m&&(E?N((parseFloat(s)*parseFloat((null==t?void 0:t.usdPrice)??"0")).toFixed(6)):N(s),h(!1))},[m]),(0,S.useEffect)(()=>{y&&!o?l((E?parseFloat(y)/parseFloat((null==t?void 0:t.usdPrice)??"0"):parseFloat(y)).toFixed(6)):l("")},[y,E,null==t?void 0:t.usdPrice,o]),(0,S.useEffect)(()=>{"DELEGATE"===c?T(g):T(j)},[c,g,j]),(0,r.jsxs)("div",{className:"p-4 flex flex-col gap-y-3 rounded-2xl bg-white-100 dark:bg-gray-950",children:[(0,r.jsxs)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:" font-medium",children:["You are ","DELEGATE"===c||"REDELEGATE"===c?"staking":"unstaking"]}),(0,r.jsxs)("div",{className:`border border-transparent bg-gray-50 dark:bg-gray-900 rounded-xl focus-within:${o?"border-red-300":"border-green-600"} flex w-full justify-between items-center px-4 py-0.5`,children:[(0,r.jsx)("input",{className:u()(" bg-gray-50 dark:bg-gray-900 text-md outline-none font-bold text-black-100 dark:text-white-100 py-2",{"flex-1 w-[50px]":(0,A.oj)()}),value:E?`$${y}`:y,onChange:e=>{var t,s,r,a;let l=null===(r=(a=e.target.value.replace(/\$/,"")).replace)||void 0===r?void 0:null===(s=r.call(a,/^0+(?=\d)/,""))||void 0===s?void 0:null===(t=s.replace)||void 0===t?void 0:t.call(s,/(\.+)/g,".");/^\d*\.?\d*$/.test(l)&&(N(l),z(l))},placeholder:"0",autoFocus:!0}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2 shrink-0",children:[(0,r.jsx)("img",{src:null==b?void 0:b.icon,onError:(0,O._)(R.GenericLight),className:"rounded-full",width:24,height:24}),(0,r.jsx)(f.Z,{className:"font-bold",size:"sm",children:null==b?void 0:b.coinDenom})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[!y&&(0,r.jsxs)("div",{onClick:_,className:"hover:cursor-pointer rounded-2xl px-2.5 py-1 bg-gray-50 dark:bg-gray-900 flex items-center gap-x-0.5",children:[(0,r.jsxs)(f.Z,{size:"xs",className:"font-medium",color:"text-gray-800 dark:text-gray-200",children:["Switch to ",E?"TOKEN":"USD"," "]}),(0,r.jsx)(en.m,{size:12,className:"text-gray-800 dark:text-gray-200 rotate-90"})]}),y&&(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(f.Z,{size:"xs",color:"text-gray-800 dark:text-gray-200",children:E?`${(0,a.LHZ)(Z)} ${null==b?void 0:b.coinDenom}`:w(new(d())(Z))}),(0,r.jsx)("button",{onClick:_,className:"bg-gray-50 dark:bg-gray-850 rounded-full p-0.5",children:(0,r.jsx)(en.m,{size:12,className:"rotate-90 hover:cursor-pointer text-gray-800 dark:text-white-100"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[D?(0,r.jsx)(ed.Z,{count:1,width:50,height:16}):(0,r.jsxs)(f.Z,{size:"xs",color:`${o?"text-red-300 dark:text-red-300":"text-gray-800 dark:text-gray-200"}`,children:["Bal"," ",F.eq(0)?"0":E?w(F):(0,a.LHZ)(F.toString())]}),G&&new(d())((null==t?void 0:t.amount)??"0").isGreaterThan(0)&&(0,r.jsx)("div",{onClick:()=>{N(P??"")},className:"hover:cursor-pointer rounded-2xl px-3 py-1",style:{backgroundColor:(0,ec.r)((0,M.l)()?L.w.compassPrimary:L.w.green600,.2)},children:(0,r.jsx)(f.Z,{size:"xs",className:"font-medium",style:{color:L.w.green600},children:"Max"})})]})]})]})});var ex=s("13287"),em=s("80502");function eh(e){let{isOpen:t,tokenAmount:s,fee:a,setTokenAmount:i,onAdjust:o,onCancel:n,token:c}=e,{theme:u}=(0,l.useTheme)(),x=(0,S.useMemo)(()=>{let e=(0,eo.hI1)(c.amount??"0",(null==c?void 0:c.coinDecimals)??6),t=new(d())(e).minus((null==a?void 0:a.amount)??"");return t.lte(0)?"0":new(d())((0,eo.TGo)(t.toString(),(null==c?void 0:c.coinDecimals)??6)).toFixed(6,1)},[null==a?void 0:a.amount,c.amount,null==c?void 0:c.coinDecimals]),m=(0,S.useCallback)(()=>{x?(i(x),o()):n()},[o,n,i,x]),h=(0,S.useMemo)(()=>`${s} ${c.symbol??""}`,[c.symbol,s]),g=(0,S.useMemo)(()=>x?`${x} ${c.symbol??""}`:null,[c.symbol,x]);return(0,r.jsxs)(G.Z,{isOpen:t,onClose:n,closeOnBackdropClick:!1,title:"Adjust for Transaction Fees",children:[(0,r.jsxs)("div",{className:"rounded-2xl p-4 dark:bg-gray-900 bg-white-100 dark:text-gray-200 text-gray-800",children:[(0,r.jsxs)("p",{children:["Insufficient ",c.symbol??""," balance to pay transaction fees."]}),(0,r.jsxs)("p",{className:"mt-2",children:["Should we adjust the amount from"," ",(0,r.jsx)("span",{className:"text-green-500 font-medium",children:h})," to"," ",(0,r.jsx)("span",{className:"text-green-500 font-medium",children:g??"-"}),"?"]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-y-3 mt-5",children:[(0,r.jsx)(l.Buttons.Generic,{color:u===l.ThemeName.DARK?L.w.gray900:L.w.gray300,size:"normal",className:"w-full",title:"Don't adjust",onClick:n,children:"Cancel Transaction"}),(0,r.jsx)(l.Buttons.Generic,{color:(0,M.l)()?L.w.compassPrimary:L.w.green600,size:"normal",className:"w-full",title:"Auto-adjust",onClick:m,children:"Auto-adjust"})]})]})}let eg=(0,C.Pi)(e=>{let{selectedProvider:t,setShowSelectProviderSheet:s,selectDisabled:i,title:n,optional:d,rootDenomsStore:c}=e,u=(0,l.useTheme)().theme,{apr:x}=(0,a.EXf)((null==t?void 0:t.provider)??"",c.allDenoms),[m,h]=(0,S.useState)(!1),g=(0,S.useCallback)(()=>{h(!0)},[]),v=(0,S.useCallback)(()=>{h(!1)},[]);return(0,r.jsxs)("div",{className:"flex flex-col gap-y-3 p-4 rounded-2xl bg-white-100 dark:bg-gray-950 relative",children:[(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-medium",children:n}),t&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(P.k,{onMouseEnter:g,onMouseLeave:v,size:18,className:"text-gray-400 dark:text-gray-600"}),m&&(0,r.jsx)(H,{provider:t,handleMouseEnter:g,handleMouseLeave:v,positionClassName:"bottom-full -right-2 py-3"})]})]}),(0,r.jsxs)("button",{className:"flex w-full items-center cursor-pointer py-2.5 px-4 justify-between bg-gray-50 dark:bg-gray-900 rounded-xl",onClick:()=>{!i&&s(!0)},disabled:i,children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("img",{src:t?_.r.Misc.Validator:u===l.ThemeName.DARK?R.GenericDark:R.GenericLight,onError:(0,O._)(R.GenericLight),className:"rounded-full",width:24,height:24}),(0,r.jsx)(f.Z,{size:"sm",color:t?"text-black-100 dark:text-white-100":"text-gray-700 dark:text-gray-400",className:" font-bold",children:t?(0,a.MDB)(t.moniker??"",12,0):`Select Provider ${d?"(optional)":""}`}),t&&parseFloat(x??"0")>0&&(0,r.jsxs)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:["Estimated APR\xa0",(0,r.jsx)("span",{className:"font-bold",children:(0,a._6x)(x??"",1)}),"%"]})]}),!i&&(0,r.jsx)(o.p,{size:16,className:`${t?"text-gray-800 dark:text-white-100":"text-gray-700 dark:text-gray-400"}`})]})]})}),ev=(0,C.Pi)(e=>{let{provider:t,onClick:s,rootDenomsStore:l}=e,[i,o]=(0,S.useState)(!1),{apr:n}=(0,a.EXf)(t.provider,l.allDenoms),d=(0,S.useCallback)(()=>{o(!0)},[]),c=(0,S.useCallback)(()=>{o(!1)},[]);return(0,r.jsx)("div",{onClick:s,className:"relative flex justify-between items-center p-4 mb-4 bg-white-100 dark:bg-gray-950 cursor-pointer rounded-xl",children:(0,r.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,r.jsx)("img",{src:_.r.Misc.Validator,onError:(0,O._)(R.GenericLight),width:30,height:30,className:"mr-3 border rounded-full dark:border-[#333333] border-[#cccccc]"}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-start w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsx)(f.Z,{size:"sm",color:"text-black-100 dark:text-white-100",className:"font-bold mb-0.5",children:(0,a.MDB)(t.moniker,(0,A.oj)()?22+Math.floor((Math.min(window.innerWidth,400)-320)/81*7):30,0)}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(P.k,{onMouseEnter:d,onMouseLeave:c,size:18,className:"text-gray-400 dark:text-gray-600"}),i&&(0,r.jsx)(H,{provider:t,handleMouseEnter:d,handleMouseLeave:c,positionClassName:"-top-2 right-4 px-3"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[t.specs.length>0&&(0,r.jsx)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:`${t.specs.length} Services`}),parseFloat(n??"0")>0&&(0,r.jsxs)(f.Z,{size:"xs",color:"dark:text-gray-400 text-gray-600",className:"font-medium",children:["Estimated APR\xa0",(0,r.jsx)("span",{className:"font-bold",children:(0,a._6x)(n??"",1)}),"%"]})]})]})]})})});function ef(e){let{isVisible:t,onClose:s,onProviderSelect:a,providers:l}=e,[i,o]=(0,S.useState)(""),[n,d]=(0,S.useState)(!1),[c,u]=(0,S.useState)("Random"),x=(0,ee.a7)(),[m,h]=(0,S.useState)(!1),[g,v]=(0,S.useMemo)(()=>{h(!0);let e=l.filter(e=>e.moniker&&e.moniker.toLowerCase().includes(i.toLowerCase())).slice(0,100);e.sort(()=>{switch(c){case"Amount staked":case"APR":return 0;case"Random":return Math.random()-.5}});let t=e.filter(e=>"Active"===e.stakestatus),s=e.filter(e=>"Inactive"===e.stakestatus);return h(!1),[t,i?s:[]]},[l,i,c]),p=(0,S.useMemo)(()=>{let e=[...g];return v.length>0&&(e.push({itemType:"inactiveHeader"}),e.push(...v)),e},[g,v]),k=(0,S.useCallback)((e,t)=>"itemType"in t?(0,r.jsx)(f.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",className:"mb-4",children:"Inactive Provider"}):(0,r.jsx)(ev,{provider:t,onClick:()=>a(t),rootDenomsStore:V.gb}),[a]);return(0,r.jsxs)(G.Z,{isOpen:t,onClose:()=>{o(""),s()},closeOnBackdropClick:!0,title:"Select Provider",containerClassName:"h-[calc(100%-34px)]",className:"p-6 !overflow-hidden max-h-[calc(100%-69px)] h-full",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-6 h-full",children:[(0,r.jsx)(Y.M,{divClassName:"flex w-full bg-white-100 dark:bg-gray-950 rounded-full py-2 pl-5 pr-[10px] focus-within:border-green-600",value:i,onChange:e=>o(e.target.value),"data-testing-id":"provider-input-search",placeholder:"Search providers",onClear:()=>o("")}),(0,r.jsxs)("div",{className:"w-full h-full",style:{overflowY:"scroll"},children:[m&&(0,r.jsx)(q.Z,{}),!m&&0===p.length&&(0,r.jsx)(J.S,{isRounded:!0,subHeading:"Try a different search term",src:_.r.Misc.Explore,heading:`No providers found for '${i}'`,"data-testing-id":"select-provider-empty-card"}),!m&&p.length>0&&(0,r.jsx)(es.OO,{data:p,itemContent:k,style:{flexGrow:"1",width:"100%"}})]})]}),(0,r.jsx)(ea,{onClose:()=>d(!1),isVisible:n,setVisible:d,setSortBy:u,sortBy:c,activeChain:x})]})}function ep(e){let{isVisible:t,onClose:s,setShowSelectProviderSheet:a,onReviewStake:i}=e;return(0,r.jsx)(G.Z,{isOpen:t,onClose:s,closeOnBackdropClick:!0,title:"Restake with a Provider",className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,r.jsx)(f.Z,{className:"text-gray-400 dark:text-gray-600 text-center",size:"sm",children:"You're missing out on increased rewards. Select a provider to restake with for increased APR."}),(0,r.jsx)(eg,{selectDisabled:!1,title:"Provider",setShowSelectProviderSheet:a,rootDenomsStore:V.gb}),(0,r.jsx)(l.Buttons.Generic,{onClick:i,size:"normal",className:"w-full",color:L.w.green600,children:"Review Stake"})]})})}let ek=y.w.useGetWallet,ej=e=>{switch(e){case"DELEGATE":default:return"stake_delegate";case"REDELEGATE":return"stake_redelegate";case"UNDELEGATE":return"stake_undelegate";case"CANCEL_UNDELEGATION":return"stake_cancel_undelegate";case"CLAIM_REWARDS":return"stake_claim"}},eb=(0,C.Pi)(e=>{var t,s,n,c,y,N,C;let{rootDenomsStore:P,delegationsStore:G,validatorsStore:z,unDelegationsStore:_,claimRewardsStore:R,rootBalanceStore:F,nmsStore:$}=e,[B,V]=(0,S.useState)(),[O,H]=(0,S.useState)(!1),[W,J]=(0,S.useState)(!1),[Y,q]=(0,S.useState)(!1),[X,Q]=(0,S.useState)(!1),[ee,et]=(0,S.useState)(!1),[es,er]=(0,S.useState)(!1),[ea,el]=(0,S.useState)(!1),[eo,en]=(0,S.useState)(!1),[ed,ec]=(0,S.useState)(!1),ev=(0,D.s0)(),eb=(0,D.TH)(),{toValidator:ew,fromValidator:ey,mode:eN="DELEGATE",delegation:eE,forceChain:eC,forceNetwork:eS,toProvider:eD,fromProvider:eL,providerDelegation:eM}=(0,S.useMemo)(()=>{let e=JSON.parse(sessionStorage.getItem("navigate-stake-input-state")??"null");return(null==eb?void 0:eb.state)??e},[null==eb?void 0:eb.state]),[eA,eT]=(0,S.useState)(eD),eZ=(0,a.a74)(),eP=(0,a.obn)(),eG=(0,S.useMemo)(()=>eC||eZ,[eZ,eC]),ez=(0,S.useMemo)(()=>eS||eP,[eP,eS]),e_=P.allDenoms,eR=G.delegationsForChain(eG),eF=z.validatorsForChain(eG),e$=_.unDelegationsForChain(eG),eB=R.claimRewardsForChain(eG),[eV]=(0,a.JsT)(e_,eG,ez),{network:eO}=(0,a.nDu)(e_,eR,eF,e$,eB,eG,ez),{providers:eH}=(0,a.fHb)(),eI=(0,S.useMemo)(()=>{var e,t;return(0,T.z)((function(e,t){(0,b.Z)(2,arguments);var s=(0,k.Z)(t);return(0,j.Z)(e,1e3*s)})(new Date,(null==eO?void 0:null===(t=eO.chain)||void 0===t?void 0:null===(e=t.params)||void 0===e?void 0:e.unbonding_time)??86410).toISOString(),"")},[eO]),eW=(0,S.useMemo)(()=>{var e;return null===(e=eF.validatorData.validators)||void 0===e?void 0:e.reduce((e,t)=>(e[t.address]=t,e),{})},[eF.validatorData.validators]),eU=null==eO?void 0:eO.validatorAprs,{data:eK}=(0,a.S2A)(),{amount:eJ,setAmount:eY,recommendedGasLimit:eq,userPreferredGasLimit:eX,setUserPreferredGasLimit:eQ,userPreferredGasPrice:e0,setUserPreferredGasPrice:e1,gasOption:e2,setFeeDenom:e5,isLoading:e4,onReviewTransaction:e3,customFee:e6,feeDenom:e8,setGasOption:e7,error:e9,ledgerError:te,setLedgerError:tt,showLedgerPopup:ts,setMemo:tr}="lava"===eG&&(null==eK?void 0:null===(t=eK.restaking)||void 0===t?void 0:t.extension)==="active"?(0,a.$l7)(e_,eN,B,ey,[eE],[eM],eA,eL,void 0,eG,ez):(0,a.rKd)(e_,eN,B,ey,[eE],eG,ez),ta=(0,x.e7)(e_,{activeChain:eG,selectedNetwork:ez}),tl=ek(eG),{activeWallet:ti}=(0,w.ZP)(),[to,tn]=(0,S.useState)(null),[td,tc]=(0,S.useState)({option:e2,gasPrice:e0??ta.gasPrice}),[tu,tx]=(0,S.useState)(),tm=(0,S.useMemo)(()=>{var e;return null===(e=F.allSpendableTokens)||void 0===e?void 0:e.find(e=>e.symbol===(null==eV?void 0:eV.coinDenom))},[null==eV?void 0:eV.coinDenom,F.allSpendableTokens]),th=(0,a.Ewi)(eW,$,eG,ez),tg=(0,S.useMemo)(()=>th.filter(e=>!e.jailed).filter(e=>e.address!==(null==ey?void 0:ey.address)),[th,null==ey?void 0:ey.address]),tv=(0,S.useMemo)(()=>{let e=[...eH];return"REDELEGATE"===eN&&e.push({provider:"empty_provider",moniker:"Empty Provider",address:"empty_provider",specs:[],stakestatus:"Active",delegateCommission:"",delegateLimit:"",delegateTotal:""}),e.filter(e=>e.address!==(null==eL?void 0:eL.address))},[null==eL?void 0:eL.address,eN,eH]);(0,S.useEffect)(()=>{tc({option:e2,gasPrice:ta.gasPrice})},[ta.gasPrice.amount.toString(),ta.gasPrice.denom]),(0,S.useEffect)(()=>{if(!B){if(el(!0),ew)V(ew);else if("DELEGATE"===eN){let e=Object.values(eW??{}).find(e=>{var t;return(null===(t=e.custom_attributes)||void 0===t?void 0:t.priority)===0});e&&V(e)}el(!1)}},[eN,B,ew,eW]),(0,S.useEffect)(()=>{td.option&&e7(td.option),td.gasPrice&&e1(td.gasPrice)},[td,e7,e1]);let tf=(0,S.useCallback)((e,t)=>{tc(e),e5(t.denom)},[e5]),tp=(0,S.useCallback)(()=>{let e={validator:B,provider:eA,mode:eN,forceChain:eG,forceNetwork:ez};sessionStorage.setItem("navigate-stake-pending-txn-state",JSON.stringify(e)),ev("/stake/pending-txn",{state:e}),E().track(p.B_.TransactionSigned,{transactionType:"REDELEGATE"===eN&&eL?"provider_redelegate":ej(eN)})},[B,eA,eN,eG,ez,ev,eL]),tk=(0,S.useCallback)(async()=>{try{let e=await tl(eG);await e3(e,tp,!1,{stdFee:e6,feeDenom:e8})}catch(e){tt(e.message),setTimeout(()=>{tt("")},6e3)}},[eG,e6,e8,tl,e3,tt,tp]);(0,S.useEffect)(()=>{ed&&new(d())(eJ).gt(0)&&Q(!0)},[ed,eJ]),(0,S.useEffect)(()=>{var e,t;("DELEGATE"===eN||"REDELEGATE"===eN)&&(null==B?void 0:null===(e=B.custom_attributes)||void 0===e?void 0:e.priority)&&(null==B?void 0:null===(t=B.custom_attributes)||void 0===t?void 0:t.priority)>0?tr("Staked with Leap Wallet"):tr("")},[eN,null==B?void 0:null===(s=B.custom_attributes)||void 0===s?void 0:s.priority,tr]);let tj=(0,S.useMemo)(()=>eE?eE.balance:eM?eM.amount:void 0,[eE,eM]);(0,ex.U)(te||e9,{activeChain:eG,activeNetwork:ez,mode:eN});let tb=F.getLoadingStatusForChain(eG,ez),tw=null===(n=G.delegationsForChain(eG))||void 0===n?void 0:n.loadingDelegations;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(g.Z,{header:(0,r.jsx)(l.Header,{action:{onClick:()=>ev(-1),type:l.HeaderActionType.BACK},title:"UNDELEGATE"===eN?"Unstaking":"Staking"}),children:[(0,r.jsxs)("div",{className:"space-y-4 overflow-y-auto p-4",children:[ey&&(0,r.jsx)(K,{title:"Current Validator",selectedValidator:ey,setShowSelectValidatorSheet:H,selectDisabled:!0}),eL&&(0,r.jsx)(eg,{title:"Current Provider",selectedProvider:eL,setShowSelectProviderSheet:J,selectDisabled:!0,rootDenomsStore:P}),(0,r.jsx)(eu,{amount:eJ,setAmount:eY,adjustAmount:ed,setAdjustAmount:ec,token:tm,fees:null==e6?void 0:e6.amount[0],hasError:es,setHasError:er,mode:eN,tokenLoading:tb,delegationBalance:tj,rootDenomsStore:P,activeChain:eG,activeNetwork:ez,delegationBalanceLoading:tw}),!eL&&(ea?(0,r.jsx)(v.D,{}):(0,r.jsx)(K,{title:"lava"===eG&&(null==eK?void 0:null===(c=eK.restaking)||void 0===c?void 0:c.extension)==="active"&&"DELEGATE"===eN?"Stake to Validator":"Validator",selectedValidator:B,setShowSelectValidatorSheet:H,selectDisabled:"UNDELEGATE"===eN&&!!ew})),"lava"===eG&&(null==eK?void 0:null===(y=eK.restaking)||void 0===y?void 0:y.extension)==="active"&&("DELEGATE"===eN||"REDELEGATE"===eN&&eL||"UNDELEGATE"===eN&&eD)&&(0,r.jsx)(eg,{title:"DELEGATE"===eN?"Restake to Provider":"Provider",optional:"DELEGATE"===eN,selectedProvider:eA,setShowSelectProviderSheet:J,selectDisabled:"UNDELEGATE"===eN,rootDenomsStore:P}),tm&&new(d())(tm.amount).isEqualTo(0)&&(0,r.jsx)(Z,{rootDenomsStore:P,activeChain:eG,activeNetwork:ez})]}),(0,r.jsxs)("div",{className:u()("absolute bottom-4 px-3",{"mt-auto":(0,A.oj)()}),children:[new(d())(eJ).isGreaterThan(0)&&(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2 px-2",children:["babylon"!==eG&&(0,r.jsxs)("div",{className:"flex gap-x-1",children:[(0,r.jsx)(f.Z,{size:"xs",color:"text-gray-700 dark:text-gray-400",className:"font-medium text-center",children:"Unstaking period"}),(0,r.jsx)(f.Z,{size:"xs",color:"text-black-100 dark:text-white-100",className:"font-medium",children:eI})]}),(null==tu?void 0:tu.fiatValue)&&(0,r.jsxs)("div",{onClick:()=>q(!0),className:"flex gap-x-1 items-center hover:cursor-pointer ml-auto",children:[(0,r.jsx)(i.P,{size:20,className:"text-black-100 dark:text-white-100"}),(0,r.jsx)(f.Z,{size:"xs",color:"text-black-100 dark:text-white-100",className:"font-medium",children:null==tu?void 0:tu.fiatValue}),(0,r.jsx)(o.p,{size:16,className:"text-black-100 dark:text-white-100"})]})]}),(0,r.jsx)(l.Buttons.Generic,{size:"normal",className:"mt-2",color:es?L.w.red300:(0,M.l)()?L.w.compassPrimary:L.w.green600,onClick:()=>{if("DELEGATE"===eN&&parseFloat(eJ)+((null==tu?void 0:tu.value)??0)>parseFloat((null==tm?void 0:tm.amount)??""))en(!0);else{var e;"lava"!==eG||(null==eK?void 0:null===(e=eK.restaking)||void 0===e?void 0:e.extension)!=="active"||"DELEGATE"!==eN||eA?(null==ti?void 0:ti.watchWallet)?em.o.setShowPopup(!0):Q(!0):et(!0)}},disabled:!new(d())(eJ).isGreaterThan(0)||es||(ey||"DELEGATE"===eN)&&!B||eL&&!eA||!!te,children:es?"Insufficient Balance":`Review ${I(eN,!!eL)}`})]})]}),(0,r.jsx)(ei,{isVisible:O,onClose:()=>H(!1),onValidatorSelect:e=>{V(e),H(!1)},validators:tg,apr:eU,rootDenomsStore:P,forceChain:eG,forceNetwork:ez}),"lava"===eG&&(null==eK?void 0:null===(N=eK.restaking)||void 0===N?void 0:N.extension)==="active"&&(0,r.jsx)(ef,{isVisible:W,onClose:()=>J(!1),onProviderSelect:e=>{eT(e),J(!1)},providers:tv}),(B||"REDELEGATE"===eN&&eA)&&(0,r.jsx)(U,{isVisible:X,isLoading:e4,onClose:()=>Q(!1),onSubmit:tk,tokenAmount:eJ,token:tm,validator:B,provider:eA,error:e9,gasError:to,mode:eN,unstakingPeriod:eI,showLedgerPopup:ts,ledgerError:te}),"DELEGATE"===eN&&tm&&e6&&eo?(0,r.jsx)(eh,{tokenAmount:eJ,setTokenAmount:eY,token:tm,fee:e6.amount[0],onAdjust:()=>{en(!1),ec(!0),Q(!0)},onCancel:()=>{en(!1)},isOpen:eo}):null,"lava"===eG&&(null==eK?void 0:null===(C=eK.restaking)||void 0===C?void 0:C.extension)==="active"&&"DELEGATE"===eN&&(0,r.jsx)(ep,{isVisible:ee,onClose:()=>et(!1),setShowSelectProviderSheet:()=>{et(!1),J(!0)},onReviewStake:()=>{et(!1),Q(!0)}}),(0,r.jsxs)(x.ZP,{recommendedGasLimit:eq,gasLimit:(null==eX?void 0:eX.toString())??eq,setGasLimit:e=>eQ(Number(e.toString())),gasPriceOption:td,onGasPriceOptionChange:tf,error:to,setError:tn,chain:eG,network:ez,rootDenomsStore:P,rootBalanceStore:F,children:[(0,r.jsx)(m.a,{className:"hidden",setDisplayFeeValue:tx,setShowFeesSettingSheet:q}),(0,r.jsx)(h.k,{showFeesSettingSheet:Y,onClose:()=>q(!1),gasError:null})]})]})})},31655:function(e,t,s){s.d(t,{z:function(){return l}});var r=s(27484),a=s.n(r);let l=(e,t,s)=>{let r=a()(e).diff(s??new Date),l=Math.floor(r/864e5),i=Math.floor(r/36e5),o=Math.floor((r-36e5*i)/6e4),n=Math.floor((r-36e5*i-6e4*o)/1e3),d="";for(let e of[[l,"day"],[i,"hour"],[o,"minute"],[n,"second"]])if(0!==e[0]){d=`${e[0]} ${1===e[0]?e[1]:e[1]+"s"} ${t??"left"}`;break}return d}}}]);